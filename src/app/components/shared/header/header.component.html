<nav class="navbar navbar-expand-lg navbar-dark bg-dark bg-gradient shadow-sm px-3 py-2 top-nav">
  <a class="navbar-brand d-flex align-items-center gap-2 fw-semibold tracking-tight" routerLink="/dashboard">
    <i class="bi bi-intersect fs-5 text-primary"></i>
    <span>Interview Portal</span>
  </a>
  <button class="navbar-toggler border-0" type="button" data-bs-toggle="collapse" data-bs-target="#mainNav">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="mainNav">
    <ul class="navbar-nav me-auto main-menu">
      <li class="nav-item" *ngFor="let item of [
          {label:'Dashboard', icon:'speedometer2', link:'/dashboard'},
          {label:'Candidates', icon:'people', link:'/candidates'},
          {label:'Register', icon:'person-plus', link:'/candidate/register'},
          {label:'Admin', icon:'sliders', link:'/admin/settings'}]">
        <a class="nav-link d-flex align-items-center gap-1 px-3 position-relative" 
           routerLink="{{item.link}}" routerLinkActive="active">
          <i class="bi bi-{{item.icon}}"></i>
          <span>{{item.label}}</span>
          <span class="active-indicator"></span>
        </a>
      </li>
    </ul>
    <div class="d-flex align-items-center" *ngIf="(fs.currentUser$ | async) as user; else loginLink">
      <div class="dropdown">
        <button class="btn btn-sm btn-outline-light d-flex align-items-center gap-2 dropdown-toggle user-btn" data-bs-toggle="dropdown">
          <div class="avatar bg-primary bg-gradient text-white">{{user.name.substring(0,1)}}</div>
          <div class="text-start small lh-sm">
            <div class="fw-semibold d-flex align-items-center gap-2">
              <span>{{user.name}}</span>
              <span class="role-badge" [ngClass]="'role-'+user.role">{{ user.role | titlecase }}</span>
            </div>
          </div>
        </button>
        <ul class="dropdown-menu dropdown-menu-end shadow-sm small">
          <li class="dropdown-header text-secondary">Session</li>
          <li><a class="dropdown-item" routerLink="/profile"><i class="bi bi-person-circle me-2"></i>Profile</a></li>
          <li><hr class="dropdown-divider"></li>
          <li><button class="dropdown-item text-danger" (click)="logout()"><i class="bi bi-box-arrow-right me-2"></i>Logout</button></li>
        </ul>
      </div>
    </div>
    <ng-template #loginLink>
      <a class="btn btn-sm btn-primary" routerLink="/login"><i class="bi bi-box-arrow-in-right me-1"></i>Login</a>
    </ng-template>
  </div>
</nav>

<style>
  .top-nav .navbar-brand { font-size:1rem; letter-spacing:.5px; }
  .top-nav .main-menu .nav-link { position:relative; font-weight:500; font-size:.85rem; }
  .top-nav .main-menu .nav-link .active-indicator { display:none; position:absolute; left:0; bottom:0; height:3px; width:100%; background:linear-gradient(90deg,#0d6efd,#5a45ff); border-radius:2px; }
  .top-nav .main-menu .nav-link.active .active-indicator { display:block; }
  .top-nav .main-menu .nav-link.active, .top-nav .main-menu .nav-link:hover { color:#fff; }
  .avatar { width:32px; height:32px; border-radius:50%; display:flex; align-items:center; justify-content:center; font-size:.9rem; font-weight:600; }
  .user-btn { background:rgba(255,255,255,.05); backdrop-filter:blur(6px); }
  .role-badge { font-size:.55rem; letter-spacing:.5px; text-transform:uppercase; padding:2px 6px; border-radius:12px; font-weight:600; background:linear-gradient(90deg,#495057,#343a40); color:#fff; box-shadow:0 0 0 1px rgba(255,255,255,.25); }
  .role-admin { background:linear-gradient(90deg,#d63384,#6f42c1); }
  .role-hr { background:linear-gradient(90deg,#20c997,#0d6efd); }
  .role-interviewer { background:linear-gradient(90deg,#6610f2,#0d6efd); }
  .role-manager { background:linear-gradient(90deg,#fd7e14,#dc3545); }
  @media (max-width: 991.98px){
    .top-nav .main-menu .nav-link { padding-left:0 !important; }
    .top-nav .main-menu .nav-link .active-indicator{ display:none !important; }
  }
</style>
