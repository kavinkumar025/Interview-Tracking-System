import{a as B}from"./chunk-PJRJ33IU.js";import{b as M,c as t,d as C,e as N,g as R,h as j,i as T,l as O,m as A,n as P,o as D,p as G,q as H,r as q,t as V}from"./chunk-46GCKG2T.js";import{b as y,d as x}from"./chunk-AHEKFUMX.js";import{Da as h,Ha as f,Oa as c,Qb as E,Ra as r,Rb as w,Sa as n,Ta as u,Xa as b,Yb as k,c as v,db as m,dc as _,eb as I,fb as F,mb as p,sb as S,ua as s,ya as g}from"./chunk-BULBJQPZ.js";var $=()=>({key:"leadershipPotential",label:"Leadership"}),K=()=>({key:"teamFit",label:"Team Fit"}),W=()=>({key:"decisionMakingAbility",label:"Decision Making"}),z=()=>({key:"domainExpertise",label:"Domain Expertise"}),J=()=>({key:"projectManagementSkills",label:"Project Mgmt"}),Q=()=>({key:"strategicThinking",label:"Strategic Thinking"}),X=()=>({key:"conflictResolution",label:"Conflict Resolution"}),Y=(o,e,i,a,d,l,L)=>[o,e,i,a,d,l,L];function Z(o,e){if(o&1&&(r(0,"div",9)(1,"label",6),m(2),n(),u(3,"input",19),n()),o&2){let i=e.$implicit;s(2),F("",i.label," (1-5)"),s(),c("formControlName",i.key)}}function ee(o,e){if(o&1&&(r(0,"option",20),m(1),n()),o&2){let i=e.$implicit;c("value",i.value),s(),I(i.label)}}function te(o,e){o&1&&(r(0,"span"),m(1,"Save Manager Evaluation"),n())}function ie(o,e){o&1&&u(0,"span",21)}var U=class o{constructor(e,i,a,d,l){this.fb=e;this.route=i;this.fs=a;this.toast=d;this.router=l}form;candidateId="";candidate;submitting=!1;recommendationOptions=[{value:"strong-hire",label:"Strong Hire"},{value:"hire",label:"Hire"},{value:"no-hire",label:"No Hire"},{value:"strong-no-hire",label:"Strong No Hire"}];ngOnInit(){return v(this,null,function*(){this.candidateId=this.route.snapshot.paramMap.get("candidateId")||"",this.form=this.fb.group({leadershipPotential:[5,[t.required,t.min(1),t.max(5)]],teamFit:[5,[t.required,t.min(1),t.max(5)]],decisionMakingAbility:[5,[t.required,t.min(1),t.max(5)]],domainExpertise:[5,[t.required,t.min(1),t.max(5)]],projectManagementSkills:[5,[t.required,t.min(1),t.max(5)]],strategicThinking:[5,[t.required,t.min(1),t.max(5)]],conflictResolution:[5,[t.required,t.min(1),t.max(5)]],pastProjectsDiscussion:[""],leadershipExamples:[""],strengths:[""],weaknesses:[""],recommendation:["hire",t.required]}),this.candidateId&&(this.candidate=yield this.fs.getCandidateById(this.candidateId),this.candidate||(this.toast.error("Candidate not found"),this.router.navigate(["/candidates"])))})}get f(){return this.form.controls}save(){return v(this,null,function*(){if(this.form.invalid){this.form.markAllAsTouched();return}this.submitting=!0;try{let e=this.form.value,i=(e.strengths||"").split(/\n|,/).map(l=>l.trim()).filter(l=>!!l),a=(e.weaknesses||"").split(/\n|,/).map(l=>l.trim()).filter(l=>!!l),d={candidateId:this.candidateId,candidateName:this.candidate?.name||"Candidate",position:this.candidate?.position||"Unknown",stage:"manager",interviewerId:this.fs.currentUserSubject.value?.id||"unknown",interviewerName:this.fs.currentUserSubject.value?.name||"Unknown",isCompleted:!0,overallRating:this.calculateOverall(e),recommendation:e.recommendation,comments:e.pastProjectsDiscussion||"",strengths:i,areasForImprovement:a,managerInterview:{leadershipPotential:e.leadershipPotential,teamFit:e.teamFit,decisionMakingAbility:e.decisionMakingAbility,domainExpertise:e.domainExpertise,projectManagementSkills:e.projectManagementSkills,strategicThinking:e.strategicThinking,conflictResolution:e.conflictResolution,pastProjectsDiscussion:e.pastProjectsDiscussion,leadershipExamples:e.leadershipExamples}};yield this.fs.createEvaluation(d),this.toast.success("Manager evaluation saved"),this.router.navigate(["/evaluation/hr",this.candidateId])}catch(e){this.toast.error(e.message||"Failed to save")}this.submitting=!1})}calculateOverall(e){let i=[e.leadershipPotential,e.teamFit,e.decisionMakingAbility,e.domainExpertise,e.projectManagementSkills,e.strategicThinking,e.conflictResolution];return+(i.reduce((a,d)=>a+d,0)/i.length).toFixed(2)}static \u0275fac=function(i){return new(i||o)(g(q),g(y),g(_),g(B),g(x))};static \u0275cmp=h({type:o,selectors:[["app-manager-interview-form"]],decls:33,vars:22,consts:[[1,"container","py-4","manager-form-wrapper"],[1,"mb-3"],[1,"card","p-4","shadow-sm",3,"ngSubmit","formGroup"],[1,"row","g-3"],["class","col-md-4",4,"ngFor","ngForOf"],[1,"col-md-6"],[1,"form-label"],["rows","4","formControlName","pastProjectsDiscussion","placeholder","Key project impacts, scale, domain",1,"form-control"],["rows","4","formControlName","leadershipExamples","placeholder","Example 1\\nExample 2",1,"form-control"],[1,"col-md-4"],["formControlName","recommendation",1,"form-select"],[3,"value",4,"ngFor","ngForOf"],["rows","3","formControlName","strengths",1,"form-control"],["rows","3","formControlName","weaknesses",1,"form-control"],[1,"mt-4","d-flex","gap-2"],[1,"btn","btn-primary",3,"disabled"],[4,"ngIf"],["class","spinner-border spinner-border-sm",4,"ngIf"],["type","button",1,"btn","btn-outline-secondary",3,"click","disabled"],["type","number","min","1","max","5",1,"form-control",3,"formControlName"],[3,"value"],[1,"spinner-border","spinner-border-sm"]],template:function(i,a){i&1&&(r(0,"div",0)(1,"h4",1),m(2,"Manager Interview Feedback"),n(),r(3,"form",2),b("ngSubmit",function(){return a.save()}),r(4,"div",3),f(5,Z,4,2,"div",4),r(6,"div",5)(7,"label",6),m(8,"Past Projects Discussion"),n(),u(9,"textarea",7),n(),r(10,"div",5)(11,"label",6),m(12,"Leadership Examples"),n(),u(13,"textarea",8),n(),r(14,"div",9)(15,"label",6),m(16,"Recommendation"),n(),r(17,"select",10),f(18,ee,2,2,"option",11),n()(),r(19,"div",9)(20,"label",6),m(21,"Strengths (comma/new line)"),n(),u(22,"textarea",12),n(),r(23,"div",9)(24,"label",6),m(25,"Weaknesses / Areas to Improve"),n(),u(26,"textarea",13),n()(),r(27,"div",14)(28,"button",15),f(29,te,2,0,"span",16)(30,ie,1,0,"span",17),n(),r(31,"button",18),b("click",function(){return a.router.navigate(["/candidates"])}),m(32,"Cancel"),n()()()()),i&2&&(s(3),c("formGroup",a.form),s(2),c("ngForOf",S(14,Y,p(7,$),p(8,K),p(9,W),p(10,z),p(11,J),p(12,Q),p(13,X))),s(13),c("ngForOf",a.recommendationOptions),s(10),c("disabled",a.form.invalid||a.submitting),s(),c("ngIf",!a.submitting),s(),c("ngIf",a.submitting),s(),c("disabled",a.submitting))},dependencies:[k,E,w,V,R,P,D,M,j,A,C,N,H,G,T,O],styles:[".manager-form-wrapper[_ngcontent-%COMP%]{max-width:1100px}"]})};export{U as ManagerInterviewFormComponent};
