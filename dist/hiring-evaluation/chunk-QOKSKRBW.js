import{a as u}from"./chunk-YQAL34G4.js";import{Da as E,Ha as c,Oa as o,Qa as b,Qb as P,Ra as e,Rb as T,Sa as t,Ta as m,Ua as C,Va as I,Vb as M,Wb as R,Xa as w,Ya as f,Yb as k,c as S,cc as H,db as i,dc as N,eb as d,fb as g,gb as O,nb as v,qb as D,tb as p,ua as r,ub as F,vb as h,ya as y}from"./chunk-BULBJQPZ.js";var B=a=>({label:"Total Candidates",value:a,icon:"people-fill",color:"primary"}),$=a=>({label:"Interviews Scheduled",value:a,icon:"calendar2-event",color:"info"}),z=a=>({label:"Interviews Completed",value:a,icon:"check2-circle",color:"success"}),V=a=>({label:"Overall Pass Rate",value:a,icon:"bar-chart-line",color:"warning"}),L=(a,l,n,s)=>[a,l,n,s];function W(a,l){if(a&1&&(e(0,"div",11),m(1,"i",12),i(2),t()),a&2){let n=f();r(2),d(n.error)}}function K(a,l){a&1&&(e(0,"div",13),m(1,"div",14),t())}function Z(a,l){if(a&1&&(e(0,"div",47)(1,"div",48)(2,"div"),m(3,"i"),t(),e(4,"div",49),i(5),t(),e(6,"div",50),i(7),t()()()),a&2){let n=l.$implicit;r(2),b("icon-wrap bg-",n.color," bg-gradient"),r(),b("bi bi-",n.icon,""),r(2),d(n.label),r(2),d(n.value)}}function q(a,l){if(a&1&&(e(0,"tr")(1,"td",51),i(2),t(),e(3,"td"),i(4),t(),e(5,"td"),i(6),t(),e(7,"td",52),i(8),t(),e(9,"td",53),i(10),t(),e(11,"td"),i(12),p(13,"number"),t()()),a&2){let n=l.$implicit;r(2),d(n.key.replace("-"," ")),r(2),d(n.value.total),r(2),d(n.value.completed),r(2),d(n.value.passed),r(2),d(n.value.failed),r(2),d(h(13,6,n.value.averageRating,"1.1-1"))}}function G(a,l){if(a&1&&(e(0,"tr")(1,"td",51),i(2),t(),e(3,"td"),i(4),t(),e(5,"td"),i(6),p(7,"number"),t()()),a&2){let n=l.$implicit;r(2),d(n.stage.replace("-"," ")),r(2),d(n.candidateCount),r(2),g("",h(7,3,n.dropOffRate,"1.0-1"),"%")}}function J(a,l){a&1&&(e(0,"tr")(1,"td",54),i(2,"No data"),t()())}function Q(a,l){if(a&1&&(e(0,"tr")(1,"td"),i(2),t(),e(3,"td"),i(4),t(),e(5,"td"),i(6),t(),e(7,"td"),i(8),t()()),a&2){let n=l.$implicit;r(2),d(n.interviewerName),r(2),d(n.totalInterviews),r(2),d(n.averageRating),r(2),g("",n.consistency,"%")}}function U(a,l){a&1&&(e(0,"tr")(1,"td",55),i(2,"No data"),t()())}function X(a,l){if(a&1&&(e(0,"tr")(1,"td"),i(2),t(),e(3,"td"),i(4),t(),e(5,"td",52),i(6),t(),e(7,"td",53),i(8),t()()),a&2){let n=l.$implicit;r(2),O("",n.month," ",n.year,""),r(2),d(n.totalCandidates),r(2),d(n.hired),r(2),d(n.rejected)}}function Y(a,l){a&1&&(e(0,"tr")(1,"td",55),i(2,"No data"),t()())}function ee(a,l){if(a&1&&(e(0,"tr")(1,"td"),i(2),t(),e(3,"td"),i(4),t(),e(5,"td",52),i(6),t(),e(7,"td"),i(8),t(),e(9,"td",51),i(10),t()()),a&2){let n=l.$implicit;r(2),d(n.position),r(2),d(n.totalCandidates),r(2),d(n.hired),r(2),d(n.averageRating),r(2),d(n.mostCommonFailureStage?n.mostCommonFailureStage.replace("-"," "):"-")}}function te(a,l){a&1&&(e(0,"tr")(1,"td",56),i(2,"No data"),t()())}function ie(a,l){if(a&1&&(C(0),e(1,"div",15),c(2,Z,8,8,"div",16),p(3,"number"),t(),e(4,"div",17)(5,"div",18)(6,"div",19)(7,"div",20)(8,"h6",21),m(9,"i",22),i(10," Stage Outcomes"),t()(),e(11,"div",23),m(12,"canvas",24),t()()(),e(13,"div",25)(14,"div",19)(15,"div",20)(16,"h6",21),m(17,"i",26),i(18," Pass Rate"),t()(),e(19,"div",27)(20,"div",28),m(21,"canvas",29),e(22,"div",30),i(23),p(24,"number"),t()()()()()(),e(25,"div",31)(26,"div",32)(27,"h6",21),m(28,"i",33),i(29," Stage Statistics"),t()(),e(30,"div",34)(31,"table",35)(32,"thead",36)(33,"tr")(34,"th"),i(35,"Stage"),t(),e(36,"th"),i(37,"Total"),t(),e(38,"th"),i(39,"Completed"),t(),e(40,"th"),i(41,"Passed"),t(),e(42,"th"),i(43,"Failed"),t(),e(44,"th"),i(45,"Avg Rating"),t()()(),e(46,"tbody"),c(47,q,14,9,"tr",37),p(48,"keyvalue"),t()()()(),e(49,"div",38)(50,"div",39)(51,"div",40)(52,"div",32)(53,"h6",21),m(54,"i",41),i(55," Funnel"),t()(),e(56,"div",42)(57,"table",43)(58,"thead",36)(59,"tr")(60,"th"),i(61,"Stage"),t(),e(62,"th"),i(63,"Candidates"),t(),e(64,"th"),i(65,"Drop Off%"),t()()(),e(66,"tbody"),c(67,G,8,6,"tr",37)(68,J,3,0,"tr",10),t()()()()(),e(69,"div",39)(70,"div",40)(71,"div",32)(72,"h6",21),m(73,"i",44),i(74," Top Interviewers"),t()(),e(75,"div",42)(76,"table",43)(77,"thead",36)(78,"tr")(79,"th"),i(80,"Name"),t(),e(81,"th"),i(82,"Interviews"),t(),e(83,"th"),i(84,"Avg"),t(),e(85,"th"),i(86,"Consistency"),t()()(),e(87,"tbody"),c(88,Q,9,4,"tr",37)(89,U,3,0,"tr",10),t()()()()(),e(90,"div",39)(91,"div",40)(92,"div",32)(93,"h6",21),m(94,"i",45),i(95," Monthly Trends"),t()(),e(96,"div",42)(97,"table",43)(98,"thead",36)(99,"tr")(100,"th"),i(101,"Month"),t(),e(102,"th"),i(103,"Total"),t(),e(104,"th"),i(105,"Hired"),t(),e(106,"th"),i(107,"Rejected"),t()()(),e(108,"tbody"),c(109,X,9,5,"tr",37)(110,Y,3,0,"tr",10),t()()()()()(),e(111,"div",31)(112,"div",32)(113,"h6",21),m(114,"i",46),i(115," Position Statistics"),t()(),e(116,"div",34)(117,"table",35)(118,"thead",36)(119,"tr")(120,"th"),i(121,"Position"),t(),e(122,"th"),i(123,"Candidates"),t(),e(124,"th"),i(125,"Hired"),t(),e(126,"th"),i(127,"Avg Rating"),t(),e(128,"th"),i(129,"Common Failure Stage"),t()()(),e(130,"tbody"),c(131,ee,11,5,"tr",37)(132,te,3,0,"tr",10),t()()()(),I()),a&2){let n=f();r(2),o("ngForOf",D(27,L,v(19,B,n.metrics.totalCandidates),v(21,$,n.metrics.interviewsScheduled),v(23,z,n.metrics.interviewsCompleted),v(25,V,h(3,11,n.metrics.overallPassRate,"1.0-0")+"%"))),r(21),g("",h(24,14,n.metrics.overallPassRate,"1.0-0"),"%"),r(24),o("ngForOf",F(48,17,n.metrics.stageStats)),r(20),o("ngForOf",n.metrics.candidateFunnelData),r(),o("ngIf",!n.metrics.candidateFunnelData.length),r(20),o("ngForOf",n.metrics.interviewerStats),r(),o("ngIf",!n.metrics.interviewerStats.length),r(20),o("ngForOf",n.metrics.monthlyHiringTrends),r(),o("ngIf",!n.metrics.monthlyHiringTrends.length),r(21),o("ngForOf",n.metrics.positionWiseStats),r(),o("ngIf",!n.metrics.positionWiseStats.length)}}var j=class a{constructor(l){this.fs=l}loading=!1;error="";metrics;charts=[];InterviewStage=H;ngOnInit(){this.fetch()}fetch(){return S(this,null,function*(){this.loading=!0,this.error="";try{this.metrics=yield this.fs.getHRDashboardMetrics(),setTimeout(()=>this.buildCharts(),0)}catch(l){this.error=l.message||"Failed to load metrics"}this.loading=!1})}ngAfterViewInit(){}buildCharts(){if(this.destroyCharts(),!this.metrics)return;let l=document.getElementById("stageChart");if(l){let s=Object.keys(this.metrics.stageStats),_=s.map(x=>this.metrics.stageStats[x].passed),A=s.map(x=>this.metrics.stageStats[x].failed);this.charts.push(new u(l,{type:"bar",data:{labels:s,datasets:[{label:"Passed",data:_,backgroundColor:"#198754"},{label:"Failed",data:A,backgroundColor:"#dc3545"}]},options:{responsive:!0,plugins:{legend:{position:"bottom"}},scales:{x:{stacked:!1},y:{beginAtZero:!0}}}}))}let n=document.getElementById("passRateChart");n&&this.charts.push(new u(n,{type:"doughnut",data:{labels:["Pass Rate","Remaining"],datasets:[{data:[this.metrics.overallPassRate,100-this.metrics.overallPassRate],backgroundColor:["#0d6efd","#e9ecef"]}]},options:{cutout:"60%",plugins:{legend:{display:!1}}}}))}refresh(){this.fetch()}destroyCharts(){this.charts.forEach(l=>l.destroy()),this.charts=[]}ngOnDestroy(){this.destroyCharts()}static \u0275fac=function(n){return new(n||a)(y(N))};static \u0275cmp=E({type:a,selectors:[["app-dashboard"]],decls:14,vars:4,consts:[[1,"container-fluid","py-4","dashboard-wrapper"],[1,"d-flex","justify-content-between","align-items-center","mb-4","flex-wrap","gap-3"],[1,"fw-bold","mb-1","d-flex","align-items-center","gap-2"],[1,"bi","bi-speedometer2","text-primary"],[1,"text-muted"],[1,"d-flex","gap-2"],[1,"btn","btn-outline-secondary","btn-sm",3,"click","disabled"],[1,"bi","bi-arrow-clockwise"],["class","alert alert-danger py-2 small d-flex align-items-center gap-2",4,"ngIf"],["class","text-center py-5",4,"ngIf"],[4,"ngIf"],[1,"alert","alert-danger","py-2","small","d-flex","align-items-center","gap-2"],[1,"bi","bi-exclamation-triangle-fill"],[1,"text-center","py-5"],[1,"spinner-border","text-primary"],[1,"row","g-4","mb-1"],["class","col-6 col-md-3",4,"ngFor","ngForOf"],[1,"row","g-4","mt-1"],[1,"col-xl-7"],[1,"card","h-100","shadow-sm","rounded-4"],[1,"card-header","bg-transparent","border-0","d-flex","align-items-center","justify-content-between","py-3"],[1,"mb-0","fw-semibold"],[1,"bi","bi-diagram-3","me-1","text-primary"],[1,"card-body","pt-0"],["id","stageChart","height","220"],[1,"col-xl-5"],[1,"bi","bi-pie-chart-fill","me-1","text-primary"],[1,"card-body","pt-0","d-flex","flex-column","align-items-center","justify-content-center"],[1,"position-relative",2,"width","230px"],["id","passRateChart","height","230"],[1,"chart-center-label","fw-bold","text-primary"],[1,"card","shadow-sm","rounded-4","mt-4"],[1,"card-header","bg-transparent","border-0","py-3","d-flex","align-items-center","gap-2"],[1,"bi","bi-table","me-1","text-primary"],[1,"table-responsive"],[1,"table","table-sm","align-middle","mb-0"],[1,"table-light"],[4,"ngFor","ngForOf"],[1,"row","g-4","mt-4"],[1,"col-xl-4"],[1,"card","shadow-sm","rounded-4","h-100"],[1,"bi","bi-filter-circle","me-1","text-primary"],[1,"card-body","p-0"],[1,"table","table-sm","mb-0","align-middle"],[1,"bi","bi-people","me-1","text-primary"],[1,"bi","bi-calendar3","me-1","text-primary"],[1,"bi","bi-briefcase","me-1","text-primary"],[1,"col-6","col-md-3"],[1,"kpi-card","h-100","shadow-sm","rounded-4","p-3","p-lg-4","position-relative"],[1,"mt-2","small","text-uppercase","fw-semibold","text-muted","tracking-tight"],[1,"display-value","fw-bold"],[1,"text-capitalize"],[1,"text-success","fw-semibold"],[1,"text-danger","fw-semibold"],["colspan","3",1,"text-center","text-muted","small","py-2"],["colspan","4",1,"text-center","text-muted","small","py-2"],["colspan","5",1,"text-center","text-muted","small","py-2"]],template:function(n,s){n&1&&(e(0,"div",0)(1,"div",1)(2,"div")(3,"h3",2),m(4,"i",3),i(5," Hiring Dashboard"),t(),e(6,"small",4),i(7,"Real-time overview of pipeline performance"),t()(),e(8,"div",5)(9,"button",6),w("click",function(){return s.refresh()}),m(10,"i",7),t()()(),c(11,W,3,1,"div",8)(12,K,2,0,"div",9)(13,ie,133,32,"ng-container",10),t()),n&2&&(r(9),o("disabled",s.loading),r(2),o("ngIf",s.error),r(),o("ngIf",s.loading),r(),o("ngIf",!s.loading&&s.metrics))},dependencies:[k,P,T,R,M],styles:[".dashboard-wrapper[_ngcontent-%COMP%]{max-width:1500px}.kpi-card[_ngcontent-%COMP%]{background:#fff;position:relative;overflow:hidden}.kpi-card[_ngcontent-%COMP%]   .icon-wrap[_ngcontent-%COMP%]{width:48px;height:48px;display:flex;align-items:center;justify-content:center;color:#fff;border-radius:14px;font-size:20px;box-shadow:0 8px 18px -6px #00000040}.kpi-card[_ngcontent-%COMP%]   .display-value[_ngcontent-%COMP%]{font-size:1.75rem;line-height:1.1}.chart-center-label[_ngcontent-%COMP%]{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;font-size:1.8rem}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{vertical-align:middle}.card[_ngcontent-%COMP%]{border:1px solid #ebedf0}"]})};export{j as DashboardComponent};
