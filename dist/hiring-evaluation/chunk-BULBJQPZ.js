var O0=Object.defineProperty,F0=Object.defineProperties;var L0=Object.getOwnPropertyDescriptors;var ov=Object.getOwnPropertySymbols,V0=Object.getPrototypeOf,U0=Object.prototype.hasOwnProperty,j0=Object.prototype.propertyIsEnumerable,B0=Reflect.get;var av=(t,e,n)=>e in t?O0(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ie=(t,e)=>{for(var n in e||={})U0.call(e,n)&&av(t,n,e[n]);if(ov)for(var n of ov(e))j0.call(e,n)&&av(t,n,e[n]);return t},De=(t,e)=>F0(t,L0(e));var Kn=(t,e,n)=>B0(V0(t),n,e);var _=(t,e,n)=>new Promise((r,i)=>{var s=u=>{try{a(n.next(u))}catch(l){i(l)}},o=u=>{try{a(n.throw(u))}catch(l){i(l)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(s,o);a((n=n.apply(t,e)).next())});function kd(t,e){return Object.is(t,e)}var Ve=null,Na=!1,Od=1,St=Symbol("SIGNAL");function te(t){let e=Ve;return Ve=t,e}function Fd(){return Ve}var Ks={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Qs(t){if(Na)throw new Error("");if(Ve===null)return;Ve.consumerOnSignalRead(t);let e=Ve.nextProducerIndex++;if(ka(Ve),e<Ve.producerNode.length&&Ve.producerNode[e]!==t&&Ws(Ve)){let n=Ve.producerNode[e];xa(n,Ve.producerIndexOfThis[e])}Ve.producerNode[e]!==t&&(Ve.producerNode[e]=t,Ve.producerIndexOfThis[e]=Ws(Ve)?uv(t,Ve,e):0),Ve.producerLastReadVersion[e]=t.version}function cv(){Od++}function Ld(t){if(!(Ws(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Od)){if(!t.producerMustRecompute(t)&&!Bd(t)){xd(t);return}t.producerRecomputeValue(t),xd(t)}}function Vd(t){if(t.liveConsumerNode===void 0)return;let e=Na;Na=!0;try{for(let n of t.liveConsumerNode)n.dirty||H0(n)}finally{Na=e}}function Ud(){return Ve?.consumerAllowSignalWrites!==!1}function H0(t){t.dirty=!0,Vd(t),t.consumerMarkedDirty?.(t)}function xd(t){t.dirty=!1,t.lastCleanEpoch=Od}function Ma(t){return t&&(t.nextProducerIndex=0),te(t)}function jd(t,e){if(te(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Ws(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)xa(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Bd(t){ka(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(Ld(n),r!==n.version))return!0}return!1}function Hd(t){if(ka(t),Ws(t))for(let e=0;e<t.producerNode.length;e++)xa(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function uv(t,e,n){if(lv(t),t.liveConsumerNode.length===0&&dv(t))for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=uv(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function xa(t,e){if(lv(t),t.liveConsumerNode.length===1&&dv(t))for(let r=0;r<t.producerNode.length;r++)xa(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];ka(i),i.producerIndexOfThis[r]=e}}function Ws(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function ka(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function lv(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function dv(t){return t.producerNode!==void 0}function $d(t,e){let n=Object.create($0);n.computation=t,e!==void 0&&(n.equal=e);let r=()=>{if(Ld(n),Qs(n),n.value===Pa)throw n.error;return n.value};return r[St]=n,r}var Pd=Symbol("UNSET"),Md=Symbol("COMPUTING"),Pa=Symbol("ERRORED"),$0=De(ie({},Ks),{value:Pd,dirty:!0,error:null,equal:kd,kind:"computed",producerMustRecompute(t){return t.value===Pd||t.value===Md},producerRecomputeValue(t){if(t.value===Md)throw new Error("Detected cycle in computations.");let e=t.value;t.value=Md;let n=Ma(t),r,i=!1;try{r=t.computation(),te(null),i=e!==Pd&&e!==Pa&&r!==Pa&&t.equal(e,r)}catch(s){r=Pa,t.error=s}finally{jd(t,n)}if(i){t.value=e;return}t.value=r,t.version++}});function q0(){throw new Error}var hv=q0;function fv(t){hv(t)}function qd(t){hv=t}var z0=null;function zd(t,e){let n=Object.create(Oa);n.value=t,e!==void 0&&(n.equal=e);let r=()=>(Qs(n),n.value);return r[St]=n,r}function Ys(t,e){Ud()||fv(t),t.equal(t.value,e)||(t.value=e,G0(t))}function Gd(t,e){Ud()||fv(t),Ys(t,e(t.value))}var Oa=De(ie({},Ks),{equal:kd,value:void 0,kind:"signal"});function G0(t){t.version++,cv(),Vd(t),z0?.()}function Wd(t){let e=te(null);try{return t()}finally{te(e)}}var Kd;function Js(){return Kd}function wn(t){let e=Kd;return Kd=t,e}var Fa=Symbol("NotFound");function G(t){return typeof t=="function"}function vi(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var La=vi(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Zs(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Ue=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(G(r))try{r()}catch(s){e=s instanceof La?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{pv(s)}catch(o){e=e??[],o instanceof La?e=[...e,...o.errors]:e.push(o)}}if(e)throw new La(e)}}add(e){var n;if(e&&e!==this)if(this.closed)pv(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Zs(n,e)}remove(e){let{_finalizers:n}=this;n&&Zs(n,e),e instanceof t&&e._removeParent(this)}};Ue.EMPTY=(()=>{let t=new Ue;return t.closed=!0,t})();var Qd=Ue.EMPTY;function Va(t){return t instanceof Ue||t&&"closed"in t&&G(t.remove)&&G(t.add)&&G(t.unsubscribe)}function pv(t){G(t)?t():t.unsubscribe()}var xt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ii={setTimeout(t,e,...n){let{delegate:r}=Ii;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Ii;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Ua(t){Ii.setTimeout(()=>{let{onUnhandledError:e}=xt;if(e)e(t);else throw t})}function Xs(){}var gv=Yd("C",void 0,void 0);function mv(t){return Yd("E",void 0,t)}function yv(t){return Yd("N",t,void 0)}function Yd(t,e,n){return{kind:t,value:e,error:n}}var Dr=null;function Ei(t){if(xt.useDeprecatedSynchronousErrorHandling){let e=!Dr;if(e&&(Dr={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Dr;if(Dr=null,n)throw r}}else t()}function _v(t){xt.useDeprecatedSynchronousErrorHandling&&Dr&&(Dr.errorThrown=!0,Dr.error=t)}var Cr=class extends Ue{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Va(e)&&e.add(this)):this.destination=Z0}static create(e,n,r){return new Qn(e,n,r)}next(e){this.isStopped?Zd(yv(e),this):this._next(e)}error(e){this.isStopped?Zd(mv(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Zd(gv,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Y0=Function.prototype.bind;function Jd(t,e){return Y0.call(t,e)}var Xd=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){ja(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){ja(r)}else ja(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){ja(n)}}},Qn=class extends Cr{constructor(e,n,r){super();let i;if(G(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&xt.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Jd(e.next,s),error:e.error&&Jd(e.error,s),complete:e.complete&&Jd(e.complete,s)}):i=e}this.destination=new Xd(i)}};function ja(t){xt.useDeprecatedSynchronousErrorHandling?_v(t):Ua(t)}function J0(t){throw t}function Zd(t,e){let{onStoppedNotification:n}=xt;n&&Ii.setTimeout(()=>n(t,e))}var Z0={closed:!0,next:Xs,error:J0,complete:Xs};var wi=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Et(t){return t}function X0(...t){return eh(t)}function eh(t){return t.length===0?Et:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var le=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=tA(n)?n:new Qn(n,r,i);return Ei(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=vv(r),new r((i,s)=>{let o=new Qn({next:a=>{try{n(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[wi](){return this}pipe(...n){return eh(n)(this)}toPromise(n){return n=vv(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function vv(t){var e;return(e=t??xt.Promise)!==null&&e!==void 0?e:Promise}function eA(t){return t&&G(t.next)&&G(t.error)&&G(t.complete)}function tA(t){return t&&t instanceof Cr||eA(t)&&Va(t)}function th(t){return G(t?.lift)}function oe(t){return e=>{if(th(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ne(t,e,n,r,i){return new nh(t,e,n,r,i)}var nh=class extends Cr{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function rh(){return oe((t,e)=>{let n=null;t._refCount++;let r=ne(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var ih=class extends le{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,th(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ue;let n=this.getSubject();e.add(this.source.subscribe(ne(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ue.EMPTY)}return e}refCount(){return rh()(this)}};var Iv=vi(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Yt=(()=>{class t extends le{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Ba(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Iv}next(n){Ei(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Ei(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Ei(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?Qd:(this.currentObservers=null,s.push(n),new Ue(()=>{this.currentObservers=null,Zs(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new le;return n.source=this,n}}return t.create=(e,n)=>new Ba(e,n),t})(),Ba=class extends Yt{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Qd}};var Sr=class extends Yt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var eo=new le(t=>t.complete());function Ev(t){return t&&G(t.schedule)}function wv(t){return t[t.length-1]}function Ha(t){return G(wv(t))?t.pop():void 0}function Yn(t){return Ev(wv(t))?t.pop():void 0}function sh(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function bv(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(h){try{l(r.next(h))}catch(p){o(p)}}function u(h){try{l(r.throw(h))}catch(p){o(p)}}function l(h){h.done?s(h.value):i(h.value).then(a,u)}l((r=r.apply(t,e||[])).next())})}function Tv(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ar(t){return this instanceof Ar?(this.v=t,this):new Ar(t)}function Dv(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(m){return function(w){return Promise.resolve(w).then(m,p)}}function a(m,w){r[m]&&(i[m]=function(N){return new Promise(function(R,O){s.push([m,N,R,O])>1||u(m,N)})},w&&(i[m]=w(i[m])))}function u(m,w){try{l(r[m](w))}catch(N){g(s[0][3],N)}}function l(m){m.value instanceof Ar?Promise.resolve(m.value.v).then(h,p):g(s[0][2],m)}function h(m){u("next",m)}function p(m){u("throw",m)}function g(m,w){m(w),s.shift(),s.length&&u(s[0][0],s[0][1])}}function Cv(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Tv=="function"?Tv(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,u){o=t[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}}var $a=t=>t&&typeof t.length=="number"&&typeof t!="function";function qa(t){return G(t?.then)}function za(t){return G(t[wi])}function Ga(t){return Symbol.asyncIterator&&G(t?.[Symbol.asyncIterator])}function Wa(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function nA(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Ka=nA();function Qa(t){return G(t?.[Ka])}function Ya(t){return Dv(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Ar(n.read());if(i)return yield Ar(void 0);yield yield Ar(r)}}finally{n.releaseLock()}})}function Ja(t){return G(t?.getReader)}function Pe(t){if(t instanceof le)return t;if(t!=null){if(za(t))return rA(t);if($a(t))return iA(t);if(qa(t))return sA(t);if(Ga(t))return Sv(t);if(Qa(t))return oA(t);if(Ja(t))return aA(t)}throw Wa(t)}function rA(t){return new le(e=>{let n=t[wi]();if(G(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function iA(t){return new le(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function sA(t){return new le(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Ua)})}function oA(t){return new le(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function Sv(t){return new le(e=>{cA(t,e).catch(n=>e.error(n))})}function aA(t){return Sv(Ya(t))}function cA(t,e){var n,r,i,s;return bv(this,void 0,void 0,function*(){try{for(n=Cv(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function dt(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function Za(t,e=0){return oe((n,r)=>{n.subscribe(ne(r,i=>dt(r,t,()=>r.next(i),e),()=>dt(r,t,()=>r.complete(),e),i=>dt(r,t,()=>r.error(i),e)))})}function Xa(t,e=0){return oe((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function Av(t,e){return Pe(t).pipe(Xa(e),Za(e))}function Rv(t,e){return Pe(t).pipe(Xa(e),Za(e))}function Nv(t,e){return new le(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function Pv(t,e){return new le(n=>{let r;return dt(n,e,()=>{r=t[Ka](),dt(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>G(r?.return)&&r.return()})}function ec(t,e){if(!t)throw new Error("Iterable cannot be null");return new le(n=>{dt(n,e,()=>{let r=t[Symbol.asyncIterator]();dt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function Mv(t,e){return ec(Ya(t),e)}function xv(t,e){if(t!=null){if(za(t))return Av(t,e);if($a(t))return Nv(t,e);if(qa(t))return Rv(t,e);if(Ga(t))return ec(t,e);if(Qa(t))return Pv(t,e);if(Ja(t))return Mv(t,e)}throw Wa(t)}function Jn(t,e){return e?xv(t,e):Pe(t)}function uA(...t){let e=Yn(t);return Jn(t,e)}function lA(t,e){let n=G(t)?t:()=>t,r=i=>i.error(n());return new le(e?i=>e.schedule(r,0,i):r)}function dA(t){return!!t&&(t instanceof le||G(t.lift)&&G(t.subscribe))}var Tn=vi(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function hA(t,e){let n=typeof e=="object";return new Promise((r,i)=>{let s=new Qn({next:o=>{r(o),s.unsubscribe()},error:i,complete:()=>{n?r(e.defaultValue):i(new Tn)}});t.subscribe(s)})}function Rr(t,e){return oe((n,r)=>{let i=0;n.subscribe(ne(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:fA}=Array;function pA(t,e){return fA(e)?t(...e):t(e)}function tc(t){return Rr(e=>pA(t,e))}var{isArray:gA}=Array,{getPrototypeOf:mA,prototype:yA,keys:_A}=Object;function nc(t){if(t.length===1){let e=t[0];if(gA(e))return{args:e,keys:null};if(vA(e)){let n=_A(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function vA(t){return t&&typeof t=="object"&&mA(t)===yA}function rc(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function IA(...t){let e=Yn(t),n=Ha(t),{args:r,keys:i}=nc(t);if(r.length===0)return Jn([],e);let s=new le(EA(r,e,i?o=>rc(i,o):Et));return n?s.pipe(tc(n)):s}function EA(t,e,n=Et){return r=>{kv(e,()=>{let{length:i}=t,s=new Array(i),o=i,a=i;for(let u=0;u<i;u++)kv(e,()=>{let l=Jn(t[u],e),h=!1;l.subscribe(ne(r,p=>{s[u]=p,h||(h=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function kv(t,e,n){t?dt(n,t,e):e()}function Ov(t,e,n,r,i,s,o,a){let u=[],l=0,h=0,p=!1,g=()=>{p&&!u.length&&!l&&e.complete()},m=N=>l<r?w(N):u.push(N),w=N=>{s&&e.next(N),l++;let R=!1;Pe(n(N,h++)).subscribe(ne(e,O=>{i?.(O),s?m(O):e.next(O)},()=>{R=!0},void 0,()=>{if(R)try{for(l--;u.length&&l<r;){let O=u.shift();o?dt(e,o,()=>w(O)):w(O)}g()}catch(O){e.error(O)}}))};return t.subscribe(ne(e,m,()=>{p=!0,g()})),()=>{a?.()}}function Nr(t,e,n=1/0){return G(e)?Nr((r,i)=>Rr((s,o)=>e(r,s,i,o))(Pe(t(r,i))),n):(typeof e=="number"&&(n=e),oe((r,i)=>Ov(r,i,t,n)))}function oh(t=1/0){return Nr(Et,t)}function Fv(){return oh(1)}function ic(...t){return Fv()(Jn(t,Yn(t)))}function wA(t){return new le(e=>{Pe(t()).subscribe(e)})}function TA(...t){let e=Ha(t),{args:n,keys:r}=nc(t),i=new le(s=>{let{length:o}=n;if(!o){s.complete();return}let a=new Array(o),u=o,l=o;for(let h=0;h<o;h++){let p=!1;Pe(n[h]).subscribe(ne(s,g=>{p||(p=!0,l--),a[h]=g},()=>u--,void 0,()=>{(!u||!p)&&(l||s.next(r?rc(r,a):a),s.complete())}))}});return e?i.pipe(tc(e)):i}function to(t,e){return oe((n,r)=>{let i=0;n.subscribe(ne(r,s=>t.call(e,s,i++)&&r.next(s)))})}function Lv(t){return oe((e,n)=>{let r=null,i=!1,s;r=e.subscribe(ne(n,void 0,void 0,o=>{s=Pe(t(o,Lv(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function Vv(t,e,n,r,i){return(s,o)=>{let a=n,u=e,l=0;s.subscribe(ne(o,h=>{let p=l++;u=a?t(u,h,p):(a=!0,h),r&&o.next(u)},i&&(()=>{a&&o.next(u),o.complete()})))}}function bA(t,e){return G(e)?Nr(t,e,1):Nr(t,1)}function no(t){return oe((e,n)=>{let r=!1;e.subscribe(ne(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function sc(t){return t<=0?()=>eo:oe((e,n)=>{let r=0;e.subscribe(ne(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function oc(t=DA){return oe((e,n)=>{let r=!1;e.subscribe(ne(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function DA(){return new Tn}function CA(t){return oe((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function SA(t,e){let n=arguments.length>=2;return r=>r.pipe(t?to((i,s)=>t(i,s,r)):Et,sc(1),n?no(e):oc(()=>new Tn))}function ah(t){return t<=0?()=>eo:oe((e,n)=>{let r=[];e.subscribe(ne(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function AA(t,e){let n=arguments.length>=2;return r=>r.pipe(t?to((i,s)=>t(i,s,r)):Et,ah(1),n?no(e):oc(()=>new Tn))}function RA(t,e){return oe(Vv(t,e,arguments.length>=2,!0))}function NA(...t){let e=Yn(t);return oe((n,r)=>{(e?ic(t,n,e):ic(t,n)).subscribe(r)})}function PA(t,e){return oe((n,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();n.subscribe(ne(r,u=>{i?.unsubscribe();let l=0,h=s++;Pe(t(u,h)).subscribe(i=ne(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function MA(t){return oe((e,n)=>{Pe(t).subscribe(ne(n,()=>n.complete(),Xs)),!n.closed&&e.subscribe(n)})}function xA(t,e,n){let r=G(t)||e||n?{next:t,error:e,complete:n}:t;return r?oe((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(ne(s,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),s.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),s.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),s.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Et}var CI="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",Q=class extends Error{code;constructor(e,n){super(SI(e,n)),this.code=e}};function kA(t){return`NG0${Math.abs(t)}`}function SI(t,e){return`${kA(t)}${e?": "+e:""}`}var AI=Symbol("InputSignalNode#UNSET"),OA=De(ie({},Oa),{transformFn:void 0,applyValueToInputSignal(t,e){Ys(t,e)}});function RI(t,e){let n=Object.create(OA);n.value=t,n.transformFn=e?.transform;function r(){if(Qs(n),n.value===AI){let i=null;throw new Q(-950,i)}return n.value}return r[St]=n,r}function go(t){return{toString:t}.toString()}var ac="__parameters__";function FA(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function NI(t,e,n){return go(()=>{let r=FA(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(u,l,h){let p=u.hasOwnProperty(ac)?u[ac]:Object.defineProperty(u,ac,{value:[]})[ac];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(o),u}}return i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var Ti=globalThis;function ye(t){for(let e in t)if(t[e]===ye)return e;throw Error("Could not find renamed property on target object.")}function LA(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function pt(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(pt).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function wh(t,e){return t?e?`${t} ${e}`:t:e||""}var VA=ye({__forward_ref__:ye});function PI(t){return t.__forward_ref__=PI,t.toString=function(){return pt(this())},t}function at(t){return MI(t)?t():t}function MI(t){return typeof t=="function"&&t.hasOwnProperty(VA)&&t.__forward_ref__===PI}function he(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function xI(t){return{providers:t.providers||[],imports:t.imports||[]}}function $c(t){return Uv(t,kI)||Uv(t,OI)}function Yq(t){return $c(t)!==null}function Uv(t,e){return t.hasOwnProperty(e)?t[e]:null}function UA(t){let e=t&&(t[kI]||t[OI]);return e||null}function jv(t){return t&&(t.hasOwnProperty(Bv)||t.hasOwnProperty(jA))?t[Bv]:null}var kI=ye({\u0275prov:ye}),Bv=ye({\u0275inj:ye}),OI=ye({ngInjectableDef:ye}),jA=ye({ngInjectorDef:ye}),se=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=he({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function FI(t){return t&&!!t.\u0275providers}var BA=ye({\u0275cmp:ye}),HA=ye({\u0275dir:ye}),$A=ye({\u0275pipe:ye}),qA=ye({\u0275mod:ye}),mc=ye({\u0275fac:ye}),oo=ye({__NG_ELEMENT_ID__:ye}),Hv=ye({__NG_ENV_ID__:ye});function Ot(t){return typeof t=="string"?t:t==null?"":String(t)}function zA(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Ot(t)}function LI(t,e){throw new Q(-200,t)}function Tf(t,e){throw new Q(-201,!1)}var X=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(X||{}),Th;function VI(){return Th}function ht(t){let e=Th;return Th=t,e}function UI(t,e,n){let r=$c(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&X.Optional)return null;if(e!==void 0)return e;Tf(t,"Injector")}var GA={},Mr=GA,bh="__NG_DI_FLAG__",yc=class{injector;constructor(e){this.injector=e}retrieve(e,n){let r=n;return this.injector.get(e,r.optional?Fa:Mr,r)}},_c="ngTempTokenPath",WA="ngTokenPath",KA=/\n/gm,QA="\u0275",$v="__source";function YA(t,e=X.Default){if(Js()===void 0)throw new Q(-203,!1);if(Js()===null)return UI(t,void 0,e);{let n=Js(),r;return n instanceof yc?r=n.injector:r=n,r.get(t,e&X.Optional?null:void 0,e)}}function Ge(t,e=X.Default){return(VI()||YA)(at(t),e)}function K(t,e=X.Default){return Ge(t,qc(e))}function qc(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Dh(t){let e=[];for(let n=0;n<t.length;n++){let r=at(t[n]);if(Array.isArray(r)){if(r.length===0)throw new Q(900,!1);let i,s=X.Default;for(let o=0;o<r.length;o++){let a=r[o],u=JA(a);typeof u=="number"?u===-1?i=a.token:s|=u:i=a}e.push(Ge(i,s))}else e.push(Ge(r))}return e}function jI(t,e){return t[bh]=e,t.prototype[bh]=e,t}function JA(t){return t[bh]}function ZA(t,e,n,r){let i=t[_c];throw e[$v]&&i.unshift(e[$v]),t.message=XA(`
`+t.message,i,n,r),t[WA]=i,t[_c]=null,t}function XA(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==QA?t.slice(2):t;let i=pt(e);if(Array.isArray(e))i=e.map(pt).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):pt(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(KA,`
  `)}`}var BI=jI(NI("Optional"),8);var HI=jI(NI("SkipSelf"),4);function kr(t,e){let n=t.hasOwnProperty(mc);return n?t[mc]:null}function eR(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],s=e[r];if(n&&(i=n(i),s=n(s)),s!==i)return!1}return!0}function tR(t){return t.flat(Number.POSITIVE_INFINITY)}function bf(t,e){t.forEach(n=>Array.isArray(n)?bf(n,e):e(n))}function $I(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function vc(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function nR(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let s=i-2;t[i]=t[s],i--}t[e]=n,t[e+1]=r}}function Df(t,e,n){let r=mo(t,e);return r>=0?t[r|1]=n:(r=~r,nR(t,r,e,n)),r}function ch(t,e){let n=mo(t,e);if(n>=0)return t[n|1]}function mo(t,e){return rR(t,e,1)}function rR(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}var Or={},ft=[],Ic=new se(""),qI=new se("",-1),zI=new se(""),Ec=class{get(e,n=Mr){if(n===Mr){let r=new Error(`NullInjectorError: No provider for ${pt(e)}!`);throw r.name="NullInjectorError",r}return n}};function GI(t,e){let n=t[qA]||null;if(!n&&e===!0)throw new Error(`Type ${pt(t)} does not have '\u0275mod' property.`);return n}function Fr(t){return t[BA]||null}function iR(t){return t[HA]||null}function sR(t){return t[$A]||null}function WI(t){return{\u0275providers:t}}function oR(...t){return{\u0275providers:KI(!0,t),\u0275fromNgModule:!0}}function KI(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return bf(e,o=>{let a=o;Ch(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&QI(i,s),n}function QI(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Cf(i,s=>{e(s,r)})}}function Ch(t,e,n,r){if(t=at(t),!t)return!1;let i=null,s=jv(t),o=!s&&Fr(t);if(!s&&!o){let u=t.ngModule;if(s=jv(u),s)i=u;else return!1}else{if(o&&!o.standalone)return!1;i=t}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let u=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of u)Ch(l,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{bf(s.imports,h=>{Ch(h,e,n,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&QI(l,e)}if(!a){let l=kr(i)||(()=>new i);e({provide:i,useFactory:l,deps:ft},i),e({provide:zI,useValue:i,multi:!0},i),e({provide:Ic,useValue:()=>Ge(i),multi:!0},i)}let u=s.providers;if(u!=null&&!a){let l=t;Cf(u,h=>{e(h,l)})}}else return!1;return i!==t&&t.providers!==void 0}function Cf(t,e){for(let n of t)FI(n)&&(n=n.\u0275providers),Array.isArray(n)?Cf(n,e):e(n)}var aR=ye({provide:String,useValue:ye});function YI(t){return t!==null&&typeof t=="object"&&aR in t}function cR(t){return!!(t&&t.useExisting)}function uR(t){return!!(t&&t.useFactory)}function Ni(t){return typeof t=="function"}function lR(t){return!!t.useClass}var JI=new se(""),lc={},qv={},uh;function Sf(){return uh===void 0&&(uh=new Ec),uh}var tr=class{},ao=class extends tr{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,Ah(e,o=>this.processProvider(o)),this.records.set(qI,bi(void 0,this)),i.has("environment")&&this.records.set(tr,bi(void 0,this));let s=this.records.get(JI);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(zI,ft,X.Self))}retrieve(e,n){let r=n;return this.get(e,r.optional?Fa:Mr,r)}destroy(){io(this),this._destroyed=!0;let e=te(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),te(e)}}onDestroy(e){return io(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){io(this);let n=wn(this),r=ht(void 0),i;try{return e()}finally{wn(n),ht(r)}}get(e,n=Mr,r=X.Default){if(io(this),e.hasOwnProperty(Hv))return e[Hv](this);r=qc(r);let i,s=wn(this),o=ht(void 0);try{if(!(r&X.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=gR(e)&&$c(e);l&&this.injectableDefInScope(l)?u=bi(Sh(e),lc):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u,r)}let a=r&X.Self?Sf():this.parent;return n=r&X.Optional&&n===Mr?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[_c]=a[_c]||[]).unshift(pt(e)),s)throw a;return ZA(a,e,"R3InjectorError",this.source)}else throw a}finally{ht(o),wn(s)}}resolveInjectorInitializers(){let e=te(null),n=wn(this),r=ht(void 0),i;try{let s=this.get(Ic,ft,X.Self);for(let o of s)o()}finally{wn(n),ht(r),te(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(pt(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=at(e);let n=Ni(e)?e:at(e&&e.provide),r=hR(e);if(!Ni(e)&&e.multi===!0){let i=this.records.get(n);i||(i=bi(void 0,lc,!0),i.factory=()=>Dh(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){let i=te(null);try{return n.value===qv?LI(pt(e)):n.value===lc&&(n.value=qv,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&pR(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{te(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=at(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Sh(t){let e=$c(t),n=e!==null?e.factory:kr(t);if(n!==null)return n;if(t instanceof se)throw new Q(204,!1);if(t instanceof Function)return dR(t);throw new Q(204,!1)}function dR(t){if(t.length>0)throw new Q(204,!1);let n=UA(t);return n!==null?()=>n.factory(t):()=>new t}function hR(t){if(YI(t))return bi(void 0,t.useValue);{let e=ZI(t);return bi(e,lc)}}function ZI(t,e,n){let r;if(Ni(t)){let i=at(t);return kr(i)||Sh(i)}else if(YI(t))r=()=>at(t.useValue);else if(uR(t))r=()=>t.useFactory(...Dh(t.deps||[]));else if(cR(t))r=(i,s)=>Ge(at(t.useExisting),s!==void 0&&s&X.Optional?X.Optional:void 0);else{let i=at(t&&(t.useClass||t.provide));if(fR(t))r=()=>new i(...Dh(t.deps));else return kr(i)||Sh(i)}return r}function io(t){if(t.destroyed)throw new Q(205,!1)}function bi(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function fR(t){return!!t.deps}function pR(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function gR(t){return typeof t=="function"||typeof t=="object"&&t instanceof se}function Ah(t,e){for(let n of t)Array.isArray(n)?Ah(n,e):n&&FI(n)?Ah(n.\u0275providers,e):e(n)}function XI(t,e){let n;t instanceof ao?(io(t),n=t):n=new yc(t);let r,i=wn(n),s=ht(void 0);try{return e()}finally{wn(i),ht(s)}}function eE(){return VI()!==void 0||Js()!=null}function mR(t){if(!eE())throw new Q(-203,!1)}function yR(t){return typeof t=="function"}var Cn=0,J=1,q=2,Ze=3,Lt=4,Ut=5,wc=6,Tc=7,gt=8,Pi=9,bn=10,Ce=11,co=12,zv=13,ji=14,Zt=15,Lr=16,Di=17,Dn=18,zc=19,tE=20,Xn=21,lh=22,bc=23,At=24,Ai=25,ct=26,nE=1;var Vr=7,Dc=8,Mi=9,wt=10;function er(t){return Array.isArray(t)&&typeof t[nE]=="object"}function Sn(t){return Array.isArray(t)&&t[nE]===!0}function Af(t){return(t.flags&4)!==0}function Bi(t){return t.componentOffset>-1}function Gc(t){return(t.flags&1)===1}function Xt(t){return!!t.template}function Cc(t){return(t[q]&512)!==0}function Hi(t){return(t[q]&256)===256}var Rh=class{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function rE(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}var _R=(()=>{let t=()=>iE;return t.ngInherit=!0,t})();function iE(t){return t.type.prototype.ngOnChanges&&(t.setInput=IR),vR}function vR(){let t=oE(this),e=t?.current;if(e){let n=t.previous;if(n===Or)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function IR(t,e,n,r,i){let s=this.declaredInputs[r],o=oE(t)||ER(t,{previous:Or,current:null}),a=o.current||(o.current={}),u=o.previous,l=u[s];a[s]=new Rh(l&&l.currentValue,n,u===Or),rE(t,e,i,n)}var sE="__ngSimpleChanges__";function oE(t){return t[sE]||null}function ER(t,e){return t[sE]=e}var Gv=null;var fe=function(t,e=null,n){Gv?.(t,e,n)},wR="svg",TR="math";function en(t){for(;Array.isArray(t);)t=t[Cn];return t}function aE(t,e){return en(e[t])}function nn(t,e){return en(e[t.index])}function cE(t,e){return t.data[e]}function Wc(t,e){return t[e]}function bR(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function tn(t,e){let n=e[t];return er(n)?n:n[Cn]}function DR(t){return(t[q]&4)===4}function Rf(t){return(t[q]&128)===128}function CR(t){return Sn(t[Ze])}function xi(t,e){return e==null?null:t[e]}function uE(t){t[Di]=0}function lE(t){t[q]&1024||(t[q]|=1024,Rf(t)&&yo(t))}function SR(t,e){for(;t>0;)e=e[ji],t--;return e}function Kc(t){return!!(t[q]&9216||t[At]?.dirty)}function Nh(t){t[bn].changeDetectionScheduler?.notify(8),t[q]&64&&(t[q]|=1024),Kc(t)&&yo(t)}function yo(t){t[bn].changeDetectionScheduler?.notify(0);let e=Ur(t);for(;e!==null&&!(e[q]&8192||(e[q]|=8192,!Rf(e)));)e=Ur(e)}function dE(t,e){if(Hi(t))throw new Q(911,!1);t[Xn]===null&&(t[Xn]=[]),t[Xn].push(e)}function AR(t,e){if(t[Xn]===null)return;let n=t[Xn].indexOf(e);n!==-1&&t[Xn].splice(n,1)}function Ur(t){let e=t[Ze];return Sn(e)?e[Ze]:e}function Nf(t){return t[Tc]??=[]}function Pf(t){return t.cleanup??=[]}function RR(t,e,n,r){let i=Nf(e);i.push(n),t.firstCreatePass&&Pf(t).push(r,i.length-1)}var Y={lFrame:vE(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Ph=!1;function NR(){return Y.lFrame.elementDepthCount}function PR(){Y.lFrame.elementDepthCount++}function MR(){Y.lFrame.elementDepthCount--}function Mf(){return Y.bindingsEnabled}function xR(){return Y.skipHydrationRootTNode!==null}function kR(t){return Y.skipHydrationRootTNode===t}function OR(){Y.skipHydrationRootTNode=null}function $(){return Y.lFrame.lView}function Me(){return Y.lFrame.tView}function Jq(t){return Y.lFrame.contextLView=t,t[gt]}function Zq(t){return Y.lFrame.contextLView=null,t}function Xe(){let t=hE();for(;t!==null&&t.type===64;)t=t.parent;return t}function hE(){return Y.lFrame.currentTNode}function FR(){let t=Y.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Gr(t,e){let n=Y.lFrame;n.currentTNode=t,n.isParent=e}function xf(){return Y.lFrame.isParent}function fE(){Y.lFrame.isParent=!1}function LR(){return Y.lFrame.contextLView}function pE(){return Ph}function Wv(t){let e=Ph;return Ph=t,e}function rn(){let t=Y.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function gE(){return Y.lFrame.bindingIndex}function VR(t){return Y.lFrame.bindingIndex=t}function Qc(){return Y.lFrame.bindingIndex++}function Yc(t){let e=Y.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function UR(){return Y.lFrame.inI18n}function jR(t,e){let n=Y.lFrame;n.bindingIndex=n.bindingRootIndex=t,Mh(e)}function BR(){return Y.lFrame.currentDirectiveIndex}function Mh(t){Y.lFrame.currentDirectiveIndex=t}function HR(t){let e=Y.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function mE(){return Y.lFrame.currentQueryIndex}function kf(t){Y.lFrame.currentQueryIndex=t}function $R(t){let e=t[J];return e.type===2?e.declTNode:e.type===1?t[Ut]:null}function yE(t,e,n){if(n&X.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&X.Host);)if(i=$R(s),i===null||(s=s[ji],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=Y.lFrame=_E();return r.currentTNode=e,r.lView=t,!0}function Of(t){let e=_E(),n=t[J];Y.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function _E(){let t=Y.lFrame,e=t===null?null:t.child;return e===null?vE(t):e}function vE(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function IE(){let t=Y.lFrame;return Y.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var EE=IE;function Ff(){let t=IE();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function qR(t){return(Y.lFrame.contextLView=SR(t,Y.lFrame.contextLView))[gt]}function An(){return Y.lFrame.selectedIndex}function jr(t){Y.lFrame.selectedIndex=t}function Jc(){let t=Y.lFrame;return cE(t.tView,t.selectedIndex)}function zR(){return Y.lFrame.currentNamespace}var wE=!0;function Zc(){return wE}function Xc(t){wE=t}function GR(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=iE(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function Lf(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function dc(t,e,n){TE(t,e,3,n)}function hc(t,e,n,r){(t[q]&3)===n&&TE(t,e,n,r)}function dh(t,e){let n=t[q];(n&3)===e&&(n&=16383,n+=1,t[q]=n)}function TE(t,e,n,r){let i=r!==void 0?t[Di]&65535:0,s=r??-1,o=e.length-1,a=0;for(let u=i;u<o;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[Di]+=65536),(a<s||s==-1)&&(WR(t,n,e,u),t[Di]=(t[Di]&4294901760)+u+2),u++}function Kv(t,e){fe(4,t,e);let n=te(null);try{e.call(t)}finally{te(n),fe(5,t,e)}}function WR(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=t[o];i?t[q]>>14<t[Di]>>16&&(t[q]&3)===e&&(t[q]+=16384,Kv(a,s)):Kv(a,s)}var Ri=-1,Br=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r){this.factory=e,this.canSeeViewProviders=n,this.injectImpl=r}};function KR(t){return(t.flags&8)!==0}function QR(t){return(t.flags&16)!==0}function YR(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{let s=i,o=n[++r];JR(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function bE(t){return t===3||t===4||t===6}function JR(t){return t.charCodeAt(0)===64}function ki(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?Qv(t,n,i,null,e[++r]):Qv(t,n,i,null,null))}}return t}function Qv(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){i!==null&&(t[s+1]=i);return}s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),i!==null&&t.splice(s++,0,i)}function DE(t){return t!==Ri}function Sc(t){return t&32767}function ZR(t){return t>>16}function Ac(t,e){let n=ZR(t),r=e;for(;n>0;)r=r[ji],n--;return r}var xh=!0;function Rc(t){let e=xh;return xh=t,e}var XR=256,CE=XR-1,SE=5,eN=0,Jt={};function tN(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(oo)&&(r=n[oo]),r==null&&(r=n[oo]=eN++);let i=r&CE,s=1<<i;e.data[t+(i>>SE)]|=s}function Nc(t,e){let n=AE(t,e);if(n!==-1)return n;let r=e[J];r.firstCreatePass&&(t.injectorIndex=e.length,hh(r.data,t),hh(e,null),hh(r.blueprint,null));let i=Vf(t,e),s=t.injectorIndex;if(DE(i)){let o=Sc(i),a=Ac(i,e),u=a[J].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|u[o+l]}return e[s+8]=i,s}function hh(t,e){t.push(0,0,0,0,0,0,0,0,e)}function AE(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Vf(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=xE(i),r===null)return Ri;if(n++,i=i[ji],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Ri}function kh(t,e,n){tN(t,e,n)}function nN(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let s=n[i];if(bE(s))break;if(s===0)i=i+2;else if(typeof s=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(s===e)return n[i+1];i=i+2}}}return null}function RE(t,e,n){if(n&X.Optional||t!==void 0)return t;Tf(e,"NodeInjector")}function NE(t,e,n,r){if(n&X.Optional&&r===void 0&&(r=null),(n&(X.Self|X.Host))===0){let i=t[Pi],s=ht(void 0);try{return i?i.get(e,r,n&X.Optional):UI(e,r,n&X.Optional)}finally{ht(s)}}return RE(r,e,n)}function PE(t,e,n,r=X.Default,i){if(t!==null){if(e[q]&2048&&!(r&X.Self)){let o=oN(t,e,n,r,Jt);if(o!==Jt)return o}let s=ME(t,e,n,r,Jt);if(s!==Jt)return s}return NE(e,n,r,i)}function ME(t,e,n,r,i){let s=iN(n);if(typeof s=="function"){if(!yE(e,t,r))return r&X.Host?RE(i,n,r):NE(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&X.Optional))Tf(n);else return o}finally{EE()}}else if(typeof s=="number"){let o=null,a=AE(t,e),u=Ri,l=r&X.Host?e[Zt][Ut]:null;for((a===-1||r&X.SkipSelf)&&(u=a===-1?Vf(t,e):e[a+8],u===Ri||!Jv(r,!1)?a=-1:(o=e[J],a=Sc(u),e=Ac(u,e)));a!==-1;){let h=e[J];if(Yv(s,a,h.data)){let p=rN(a,e,n,o,r,l);if(p!==Jt)return p}u=e[a+8],u!==Ri&&Jv(r,e[J].data[a+8]===l)&&Yv(s,a,e)?(o=h,a=Sc(u),e=Ac(u,e)):a=-1}}return i}function rN(t,e,n,r,i,s){let o=e[J],a=o.data[t+8],u=r==null?Bi(a)&&xh:r!=o&&(a.type&3)!==0,l=i&X.Host&&s===a,h=fc(a,o,n,u,l);return h!==null?uo(e,o,h,a,i):Jt}function fc(t,e,n,r,i){let s=t.providerIndexes,o=e.data,a=s&1048575,u=t.directiveStart,l=t.directiveEnd,h=s>>20,p=r?a:a+h,g=i?a+h:l;for(let m=p;m<g;m++){let w=o[m];if(m<u&&n===w||m>=u&&w.type===n)return m}if(i){let m=o[u];if(m&&Xt(m)&&m.type===n)return u}return null}function uo(t,e,n,r,i){let s=t[n],o=e.data;if(s instanceof Br){let a=s;a.resolving&&LI(zA(o[n]));let u=Rc(a.canSeeViewProviders);a.resolving=!0;let l,h=a.injectImpl?ht(a.injectImpl):null,p=yE(t,r,X.Default);try{s=t[n]=a.factory(void 0,i,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&GR(n,o[n],e)}finally{h!==null&&ht(h),Rc(u),a.resolving=!1,EE()}}return s}function iN(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(oo)?t[oo]:void 0;return typeof e=="number"?e>=0?e&CE:sN:e}function Yv(t,e,n){let r=1<<t;return!!(n[e+(t>>SE)]&r)}function Jv(t,e){return!(t&X.Self)&&!(t&X.Host&&e)}var xr=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return PE(this._tNode,this._lView,e,qc(r),n)}};function sN(){return new xr(Xe(),$())}function Xq(t){return go(()=>{let e=t.prototype.constructor,n=e[mc]||Oh(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[mc]||Oh(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Oh(t){return MI(t)?()=>{let e=Oh(at(t));return e&&e()}:kr(t)}function oN(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[q]&2048&&!Cc(o);){let a=ME(s,o,n,r|X.Self,Jt);if(a!==Jt)return a;let u=s.parent;if(!u){let l=o[tE];if(l){let h=l.get(n,Jt,r);if(h!==Jt)return h}u=xE(o),o=o[ji]}s=u}return i}function xE(t){let e=t[J],n=e.type;return n===2?e.declTNode:n===1?t[Ut]:null}function aN(t){return nN(Xe(),t)}function Zv(t,e=null,n=null,r){let i=kE(t,e,n,r);return i.resolveInjectorInitializers(),i}function kE(t,e=null,n=null,r,i=new Set){let s=[n||ft,oR(t)];return r=r||(typeof t=="object"?void 0:pt(t)),new ao(s,e||Sf(),r||null,i)}var Hr=class t{static THROW_IF_NOT_FOUND=Mr;static NULL=new Ec;static create(e,n){if(Array.isArray(e))return Zv({name:""},n,e,"");{let r=e.name??"";return Zv({name:r},e.parent,e.providers,r)}}static \u0275prov=he({token:t,providedIn:"any",factory:()=>Ge(qI)});static __NG_ELEMENT_ID__=-1};var cN=new se("");cN.__NG_ELEMENT_ID__=t=>{let e=Xe();if(e===null)throw new Q(204,!1);if(e.type&2)return e.value;if(t&X.Optional)return null;throw new Q(204,!1)};var OE=!1,Uf=(()=>{class t{static __NG_ELEMENT_ID__=uN;static __NG_ENV_ID__=n=>n}return t})(),Fh=class extends Uf{_lView;constructor(e){super(),this._lView=e}onDestroy(e){let n=this._lView;return Hi(n)?(e(),()=>{}):(dE(n,e),()=>AR(n,e))}};function uN(){return new Fh($())}var Oi=class{},jf=new se("",{providedIn:"root",factory:()=>!1});var FE=new se(""),LE=new se(""),eu=(()=>{class t{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new Sr(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=he({token:t,providedIn:"root",factory:()=>new t})}return t})();var Lh=class extends Yt{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,eE()&&(this.destroyRef=K(Uf,{optional:!0})??void 0,this.pendingTasks=K(eu,{optional:!0})??void 0)}emit(e){let n=te(null);try{super.next(e)}finally{te(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof Ue&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Zn=Lh;function Pc(...t){}function VE(t){let e,n;function r(){t=Pc;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function Xv(t){return queueMicrotask(()=>t()),()=>{t=Pc}}var Bf="isAngularZone",Mc=Bf+"_ID",lN=0,Tt=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Zn(!1);onMicrotaskEmpty=new Zn(!1);onStable=new Zn(!1);onError=new Zn(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=OE}=e;if(typeof Zone>"u")throw new Q(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,fN(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Bf)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new Q(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new Q(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,dN,Pc,Pc);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},dN={};function Hf(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function hN(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){VE(()=>{t.callbackScheduled=!1,Vh(t),t.isCheckStableRunning=!0,Hf(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),Vh(t)}function fN(t){let e=()=>{hN(t)},n=lN++;t._inner=t._inner.fork({name:"angular",properties:{[Bf]:!0,[Mc]:n,[Mc+n]:!0},onInvokeTask:(r,i,s,o,a,u)=>{if(pN(u))return r.invokeTask(s,o,a,u);try{return eI(t),r.invokeTask(s,o,a,u)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),tI(t)}},onInvoke:(r,i,s,o,a,u,l)=>{try{return eI(t),r.invoke(s,o,a,u,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!gN(u)&&e(),tI(t)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,Vh(t),Hf(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function Vh(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function eI(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function tI(t){t._nesting--,Hf(t)}var Uh=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Zn;onMicrotaskEmpty=new Zn;onStable=new Zn;onError=new Zn;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function pN(t){return UE(t,"__ignore_ng_zone__")}function gN(t){return UE(t,"__scheduler_tick__")}function UE(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var $r=class{_console=console;handleError(e){this._console.error("ERROR",e)}},mN=new se("",{providedIn:"root",factory:()=>{let t=K(Tt),e=K($r);return n=>t.runOutsideAngular(()=>e.handleError(n))}});function nI(t,e){return RI(t,e)}function yN(t){return RI(AI,t)}var e6=(nI.required=yN,nI);function _N(){return $i(Xe(),$())}function $i(t,e){return new Wr(nn(t,e))}var Wr=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=_N}return t})();function vN(t){return t instanceof Wr?t.nativeElement:t}function IN(t){return typeof t=="function"&&t[St]!==void 0}function t6(t,e){let n=zd(t,e?.equal),r=n[St];return n.set=i=>Ys(r,i),n.update=i=>Gd(r,i),n.asReadonly=EN.bind(n),n}function EN(){let t=this[St];if(t.readonlyFn===void 0){let e=()=>this();e[St]=t,t.readonlyFn=e}return t.readonlyFn}function jE(t){return IN(t)&&typeof t.set=="function"}function wN(){return this._results[Symbol.iterator]()}var jh=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Yt}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=tR(e);(this._changesDetected=!eR(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=wN};function BE(t){return(t.flags&128)===128}var HE=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(HE||{}),$E=new Map,TN=0;function bN(){return TN++}function DN(t){$E.set(t[zc],t)}function Bh(t){$E.delete(t[zc])}var rI="__ngContext__";function qi(t,e){er(e)?(t[rI]=e[zc],DN(e)):t[rI]=e}function qE(t){return GE(t[co])}function zE(t){return GE(t[Lt])}function GE(t){for(;t!==null&&!Sn(t);)t=t[Lt];return t}var Hh;function n6(t){Hh=t}function CN(){if(Hh!==void 0)return Hh;if(typeof document<"u")return document;throw new Q(210,!1)}var r6=new se("",{providedIn:"root",factory:()=>SN}),SN="ng",AN=new se(""),RN=new se("",{providedIn:"platform",factory:()=>"unknown"});var i6=new se("",{providedIn:"root",factory:()=>CN().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var NN="h",PN="b";var WE=!1,MN=new se("",{providedIn:"root",factory:()=>WE});var $f=function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t}($f||{}),tu=new se(""),iI=new Set;function nu(t){iI.has(t)||(iI.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var KE=(()=>{class t{view;node;constructor(n,r){this.view=n,this.node=r}static __NG_ELEMENT_ID__=xN}return t})();function xN(){return new KE($(),Xe())}var Ci=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(Ci||{}),QE=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=he({token:t,providedIn:"root",factory:()=>new t})}return t})(),kN=[Ci.EarlyRead,Ci.Write,Ci.MixedReadWrite,Ci.Read],ON=(()=>{class t{ngZone=K(Tt);scheduler=K(Oi);errorHandler=K($r,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){K(tu,{optional:!0})}execute(){let n=this.sequences.size>0;n&&fe(16),this.executing=!0;for(let r of kN)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let s=i.hooks[r];return s(i.pipelinedValue)},i.snapshot))}catch(s){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(s)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),n&&fe(17)}register(n){let{view:r}=n;r!==void 0?((r[Ai]??=[]).push(n),yo(r),r[q]|=8192):this.executing?this.deferredRegistrations.add(n):this.addSequence(n)}addSequence(n){this.sequences.add(n),this.scheduler.notify(7)}unregister(n){this.executing&&this.sequences.has(n)?(n.erroredOrDestroyed=!0,n.pipelinedValue=void 0,n.once=!0):(this.sequences.delete(n),this.deferredRegistrations.delete(n))}maybeTrace(n,r){return r?r.run($f.AFTER_NEXT_RENDER,n):n()}static \u0275prov=he({token:t,providedIn:"root",factory:()=>new t})}return t})(),$h=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,n,r,i,s,o=null){this.impl=e,this.hooks=n,this.view=r,this.once=i,this.snapshot=o,this.unregisterOnDestroy=s?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Ai];e&&(this.view[Ai]=e.filter(n=>n!==this))}};function FN(t,e){!e?.injector&&mR(FN);let n=e?.injector??K(Hr);return nu("NgAfterNextRender"),VN(t,n,e,!0)}function LN(t,e){if(t instanceof Function){let n=[void 0,void 0,void 0,void 0];return n[e]=t,n}else return[t.earlyRead,t.write,t.mixedReadWrite,t.read]}function VN(t,e,n,r){let i=e.get(QE);i.impl??=e.get(ON);let s=e.get(tu,null,{optional:!0}),o=n?.phase??Ci.MixedReadWrite,a=n?.manualCleanup!==!0?e.get(Uf):null,u=e.get(KE,null,{optional:!0}),l=new $h(i.impl,LN(t,o),u?.view,r,a,s?.snapshot(null));return i.impl.register(l),l}var UN=(t,e,n,r)=>{};function jN(t,e,n,r){UN(t,e,n,r)}var BN=()=>null;function YE(t,e,n=!1){return BN(t,e,n)}function JE(t,e){let n=t.contentQueries;if(n!==null){let r=te(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=t.data[o];kf(s),a.contentQueries(2,e[o],o)}}}finally{te(r)}}}function qh(t,e,n){kf(0);let r=te(null);try{e(t,n)}finally{te(r)}}function qf(t,e,n){if(Af(e)){let r=te(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=t.data[o];if(a.contentQueries){let u=n[o];a.contentQueries(1,u,o)}}}finally{te(r)}}}var lo=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(lo||{});var cc;function HN(){if(cc===void 0&&(cc=null,Ti.trustedTypes))try{cc=Ti.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return cc}function sI(t){return HN()?.createScriptURL(t)||t}var xc=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${CI})`}};function _o(t){return t instanceof xc?t.changingThisBreaksApplicationSecurity:t}function ZE(t,e){let n=$N(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${CI})`)}return n===e}function $N(t){return t instanceof xc&&t.getTypeName()||null}var qN=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function zN(t){return t=String(t),t.match(qN)?t:"unsafe:"+t}var zf=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(zf||{});function GN(t){let e=XE();return e?e.sanitize(zf.URL,t)||"":ZE(t,"URL")?_o(t):zN(Ot(t))}function WN(t){let e=XE();if(e)return sI(e.sanitize(zf.RESOURCE_URL,t)||"");if(ZE(t,"ResourceURL"))return sI(_o(t));throw new Q(904,!1)}function KN(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?WN:GN}function s6(t,e,n){return KN(e,n)(t)}function XE(){let t=$();return t&&t[bn].sanitizer}var QN=/^>|^->|<!--|-->|--!>|<!-$/g,YN=/(<|>)/g,JN="\u200B$1\u200B";function ZN(t){return t.replace(QN,e=>e.replace(YN,JN))}function ew(t){return t instanceof Function?t():t}function XN(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}var tw="ng-template";function eP(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&XN(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Gf(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function Gf(t){return t.type===4&&t.value!==tw}function tP(t,e,n){let r=t.type===4&&!n?tw:t.value;return e===r}function nP(t,e,n){let r=4,i=t.attrs,s=i!==null?sP(i):0,o=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!o&&!kt(r)&&!kt(u))return!1;if(o&&kt(u))continue;o=!1,r=u|r&1;continue}if(!o)if(r&4){if(r=2|r&1,u!==""&&!tP(t,u,n)||u===""&&e.length===1){if(kt(r))return!1;o=!0}}else if(r&8){if(i===null||!eP(t,i,u,n)){if(kt(r))return!1;o=!0}}else{let l=e[++a],h=rP(u,i,Gf(t),n);if(h===-1){if(kt(r))return!1;o=!0;continue}if(l!==""){let p;if(h>s?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(kt(r))return!1;o=!0}}}}return kt(r)||o}function kt(t){return(t&1)===0}function rP(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return oP(e,t)}function iP(t,e,n=!1){for(let r=0;r<e.length;r++)if(nP(t,e[r],n))return!0;return!1}function sP(t){for(let e=0;e<t.length;e++){let n=t[e];if(bE(n))return e}return t.length}function oP(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function oI(t,e){return t?":not("+e.trim()+")":e}function aP(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!kt(o)&&(e+=oI(s,i),i=""),r=o,s=s||!kt(r);n++}return i!==""&&(e+=oI(s,i)),e}function cP(t){return t.map(aP).join(",")}function uP(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!kt(i))break;i=s}r++}return n.length&&e.push(1,...n),e}var ut={};function lP(t,e){return t.createText(e)}function dP(t,e,n){t.setValue(e,n)}function hP(t,e){return t.createComment(ZN(e))}function nw(t,e,n){return t.createElement(e,n)}function kc(t,e,n,r,i){t.insertBefore(e,n,r,i)}function rw(t,e,n){t.appendChild(e,n)}function aI(t,e,n,r,i){r!==null?kc(t,e,n,r,i):rw(t,e,n)}function fP(t,e,n){t.removeChild(null,e,n)}function pP(t,e,n){t.setAttribute(e,"style",n)}function gP(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function iw(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&YR(t,e,r),i!==null&&gP(t,e,i),s!==null&&pP(t,e,s)}function Wf(t,e,n,r,i,s,o,a,u,l,h){let p=ct+r,g=p+i,m=mP(p,g),w=typeof l=="function"?l():l;return m[J]={type:t,blueprint:m,template:n,queries:null,viewQuery:a,declTNode:e,data:m.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:u,consts:w,incompleteFirstPass:!1,ssrId:h}}function mP(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:ut);return n}function yP(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Wf(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Kf(t,e,n,r,i,s,o,a,u,l,h){let p=e.blueprint.slice();return p[Cn]=i,p[q]=r|4|128|8|64|1024,(l!==null||t&&t[q]&2048)&&(p[q]|=2048),uE(p),p[Ze]=p[ji]=t,p[gt]=n,p[bn]=o||t&&t[bn],p[Ce]=a||t&&t[Ce],p[Pi]=u||t&&t[Pi]||null,p[Ut]=s,p[zc]=bN(),p[wc]=h,p[tE]=l,p[Zt]=e.type==2?t[Zt]:p,p}function _P(t,e,n){let r=nn(e,t),i=yP(n),s=t[bn].rendererFactory,o=Qf(t,Kf(t,i,null,sw(n),r,e,null,s.createRenderer(r,n),null,null,null));return t[e.index]=o}function sw(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function ow(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Qf(t,e){return t[co]?t[zv][Lt]=e:t[co]=e,t[zv]=e,e}function o6(t=1){aw(Me(),$(),An()+t,!1)}function aw(t,e,n,r){if(!r)if((e[q]&3)===3){let s=t.preOrderCheckHooks;s!==null&&dc(e,s,n)}else{let s=t.preOrderHooks;s!==null&&hc(e,s,0,n)}jr(n)}var ru=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(ru||{});function zh(t,e,n,r){let i=te(null);try{let[s,o,a]=t.inputs[n],u=null;(o&ru.SignalBased)!==0&&(u=e[s][St]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):a!==null&&(r=a.call(e,r)),t.setInput!==null?t.setInput(e,u,r,n,s):rE(e,u,s,r)}finally{te(i)}}function cw(t,e,n,r,i){let s=An(),o=r&2;try{jr(-1),o&&e.length>ct&&aw(t,e,ct,!1),fe(o?2:0,i),n(r,i)}finally{jr(s),fe(o?3:1,i)}}function iu(t,e,n){bP(t,e,n),(n.flags&64)===64&&DP(t,e,n)}function Yf(t,e,n=nn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(e,t):t[o];t[i++]=a}}}function vP(t,e,n,r){let s=r.get(MN,WE)||n===lo.ShadowDom,o=t.selectRootElement(e,s);return IP(o),o}function IP(t){EP(t)}var EP=()=>null;function wP(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function Jf(t,e,n,r,i,s,o,a){if(!a&&Xf(e,t,n,r,i)){Bi(e)&&TP(n,e.index);return}if(e.type&3){let u=nn(e,n);r=wP(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(u,r,i)}else e.type&12}function TP(t,e){let n=tn(e,t);n[q]&16||(n[q]|=64)}function bP(t,e,n){let r=n.directiveStart,i=n.directiveEnd;Bi(n)&&_P(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||Nc(n,e);let s=n.initialInputs;for(let o=r;o<i;o++){let a=t.data[o],u=uo(e,t,o,n);if(qi(u,e),s!==null&&RP(e,o-r,u,a,n,s),Xt(a)){let l=tn(n.index,e);l[gt]=uo(e,t,o,n)}}}function DP(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=BR();try{jr(s);for(let a=r;a<i;a++){let u=t.data[a],l=e[a];Mh(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&CP(u,l)}}finally{jr(-1),Mh(o)}}function CP(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function Zf(t,e){let n=t.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let s=n[i];iP(e,s.selectors,!1)&&(r??=[],Xt(s)?r.unshift(s):r.push(s))}return r}function SP(t,e,n,r,i,s){let o=nn(t,e);AP(e[Ce],o,s,t.value,n,r,i)}function AP(t,e,n,r,i,s,o){if(s==null)t.removeAttribute(e,i,n);else{let a=o==null?Ot(s):o(s,r||"",i);t.setAttribute(e,i,a,n)}}function RP(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;a+=2){let u=o[a],l=o[a+1];zh(r,n,u,l)}}function NP(t,e){let n=t[Pi],r=n?n.get($r,null):null;r&&r.handleError(e)}function Xf(t,e,n,r,i){let s=t.inputs?.[r],o=t.hostDirectiveInputs?.[r],a=!1;if(o)for(let u=0;u<o.length;u+=2){let l=o[u],h=o[u+1],p=e.data[l];zh(p,n[l],h,i),a=!0}if(s)for(let u of s){let l=n[u],h=e.data[u];zh(h,l,r,i),a=!0}return a}function PP(t,e){let n=tn(e,t),r=n[J];MP(r,n);let i=n[Cn];i!==null&&n[wc]===null&&(n[wc]=YE(i,n[Pi])),fe(18),ep(r,n,n[gt]),fe(19,n[gt])}function MP(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function ep(t,e,n){Of(e);try{let r=t.viewQuery;r!==null&&qh(1,r,n);let i=t.template;i!==null&&cw(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Dn]?.finishViewCreation(t),t.staticContentQueries&&JE(t,e),t.staticViewQueries&&qh(2,t.viewQuery,n);let s=t.components;s!==null&&xP(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[q]&=-5,Ff()}}function xP(t,e){for(let n=0;n<e.length;n++)PP(t,e[n])}function kP(t,e,n,r){let i=te(null);try{let s=e.tView,a=t[q]&4096?4096:16,u=Kf(t,s,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[Lr]=l;let h=t[Dn];return h!==null&&(u[Dn]=h.createEmbeddedView(s)),ep(s,u,n),u}finally{te(i)}}function cI(t,e){return!e||e.firstChild===null||BE(t)}var OP;function tp(t,e){return OP(t,e)}var Oc=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Oc||{});function uw(t){return(t.flags&32)===32}function Si(t,e,n,r,i){if(r!=null){let s,o=!1;Sn(r)?s=r:er(r)&&(o=!0,r=r[Cn]);let a=en(r);t===0&&n!==null?i==null?rw(e,n,a):kc(e,n,a,i||null,!0):t===1&&n!==null?kc(e,n,a,i||null,!0):t===2?fP(e,a,o):t===3&&e.destroyNode(a),s!=null&&WP(e,t,s,n,i)}}function FP(t,e){lw(t,e),e[Cn]=null,e[Ut]=null}function LP(t,e,n,r,i,s){r[Cn]=i,r[Ut]=e,ou(t,r,n,1,i,s)}function lw(t,e){e[bn].changeDetectionScheduler?.notify(9),ou(t,e,e[Ce],2,null,null)}function VP(t){let e=t[co];if(!e)return fh(t[J],t);for(;e;){let n=null;if(er(e))n=e[co];else{let r=e[wt];r&&(n=r)}if(!n){for(;e&&!e[Lt]&&e!==t;)er(e)&&fh(e[J],e),e=e[Ze];e===null&&(e=t),er(e)&&fh(e[J],e),n=e&&e[Lt]}e=n}}function np(t,e){let n=t[Mi],r=n.indexOf(e);n.splice(r,1)}function dw(t,e){if(Hi(e))return;let n=e[Ce];n.destroyNode&&ou(t,e,n,3,null,null),VP(e)}function fh(t,e){if(Hi(e))return;let n=te(null);try{e[q]&=-129,e[q]|=256,e[At]&&Hd(e[At]),jP(t,e),UP(t,e),e[J].type===1&&e[Ce].destroy();let r=e[Lr];if(r!==null&&Sn(e[Ze])){r!==e[Ze]&&np(r,e);let i=e[Dn];i!==null&&i.detachView(t)}Bh(e)}finally{te(n)}}function UP(t,e){let n=t.cleanup,r=e[Tc];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let a=n[o+3];a>=0?r[a]():r[-a].unsubscribe(),o+=2}else{let a=r[n[o+1]];n[o].call(a)}r!==null&&(e[Tc]=null);let i=e[Xn];if(i!==null){e[Xn]=null;for(let o=0;o<i.length;o++){let a=i[o];a()}}let s=e[bc];if(s!==null){e[bc]=null;for(let o of s)o.destroy()}}function jP(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Br)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],u=s[o+1];fe(4,a,u);try{u.call(a)}finally{fe(5,a,u)}}else{fe(4,i,s);try{s.call(i)}finally{fe(5,i,s)}}}}}function BP(t,e,n){return HP(t,e.parent,n)}function HP(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[Cn];if(Bi(r)){let{encapsulation:i}=t.data[r.directiveStart+r.componentOffset];if(i===lo.None||i===lo.Emulated)return null}return nn(r,n)}function $P(t,e,n){return zP(t,e,n)}function qP(t,e,n){return t.type&40?nn(t,n):null}var zP=qP,uI;function su(t,e,n,r){let i=BP(t,r,e),s=e[Ce],o=r.parent||e[Ut],a=$P(o,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)aI(s,i,n[u],a,!1);else aI(s,i,n,a,!1);uI!==void 0&&uI(s,r,e,n,i)}function so(t,e){if(e!==null){let n=e.type;if(n&3)return nn(e,t);if(n&4)return Gh(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return so(t,r);{let i=t[e.index];return Sn(i)?Gh(-1,i):en(i)}}else{if(n&128)return so(t,e.next);if(n&32)return tp(e,t)()||en(t[e.index]);{let r=hw(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Ur(t[Zt]);return so(i,r)}else return so(t,e.next)}}}return null}function hw(t,e){if(e!==null){let r=t[Zt][Ut],i=e.projection;return r.projection[i]}return null}function Gh(t,e){let n=wt+t+1;if(n<e.length){let r=e[n],i=r[J].firstChild;if(i!==null)return so(r,i)}return e[Vr]}function rp(t,e,n,r,i,s,o){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],u=n.type;if(o&&e===0&&(a&&qi(en(a),r),n.flags|=2),!uw(n))if(u&8)rp(t,e,n.child,r,i,s,!1),Si(e,t,i,a,s);else if(u&32){let l=tp(n,r),h;for(;h=l();)Si(e,t,i,h,s);Si(e,t,i,a,s)}else u&16?GP(t,e,r,n,i,s):Si(e,t,i,a,s);n=o?n.projectionNext:n.next}}function ou(t,e,n,r,i,s){rp(n,r,t.firstChild,e,i,s,!1)}function GP(t,e,n,r,i,s){let o=n[Zt],u=o[Ut].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];Si(e,t,i,h,s)}else{let l=u,h=o[Ze];BE(r)&&(l.flags|=128),rp(t,e,l,h,i,s,!0)}}function WP(t,e,n,r,i){let s=n[Vr],o=en(n);s!==o&&Si(e,t,r,s,i);for(let a=wt;a<n.length;a++){let u=n[a];ou(u[J],u,t,e,r,s)}}function KP(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:Oc.DashCase;i==null?t.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Oc.Important),t.setStyle(n,r,i,s))}}function Fc(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let s=e[n.index];s!==null&&r.push(en(s)),Sn(s)&&QP(s,r);let o=n.type;if(o&8)Fc(t,e,n.child,r);else if(o&32){let a=tp(n,e),u;for(;u=a();)r.push(u)}else if(o&16){let a=hw(e,n);if(Array.isArray(a))r.push(...a);else{let u=Ur(e[Zt]);Fc(u[J],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function QP(t,e){for(let n=wt;n<t.length;n++){let r=t[n],i=r[J].firstChild;i!==null&&Fc(r[J],r,i,e)}t[Vr]!==t[Cn]&&e.push(t[Vr])}function fw(t){if(t[Ai]!==null){for(let e of t[Ai])e.impl.addSequence(e);t[Ai].length=0}}var pw=[];function YP(t){return t[At]??JP(t)}function JP(t){let e=pw.pop()??Object.create(XP);return e.lView=t,e}function ZP(t){t.lView[At]!==t&&(t.lView=null,pw.push(t))}var XP=De(ie({},Ks),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{yo(t.lView)},consumerOnSignalRead(){this.lView[At]=this}});function eM(t){let e=t[At]??Object.create(tM);return e.lView=t,e}var tM=De(ie({},Ks),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=Ur(t.lView);for(;e&&!gw(e[J]);)e=Ur(e);e&&lE(e)},consumerOnSignalRead(){this.lView[At]=this}});function gw(t){return t.type!==2}function mw(t){if(t[bc]===null)return;let e=!0;for(;e;){let n=!1;for(let r of t[bc])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(t[q]&8192)}}var nM=100;function yw(t,e=!0,n=0){let i=t[bn].rendererFactory,s=!1;s||i.begin?.();try{rM(t,n)}catch(o){throw e&&NP(t,o),o}finally{s||i.end?.()}}function rM(t,e){let n=pE();try{Wv(!0),Wh(t,e);let r=0;for(;Kc(t);){if(r===nM)throw new Q(103,!1);r++,Wh(t,1)}}finally{Wv(n)}}function iM(t,e,n,r){if(Hi(e))return;let i=e[q],s=!1,o=!1;Of(e);let a=!0,u=null,l=null;s||(gw(t)?(l=YP(e),u=Ma(l)):Fd()===null?(a=!1,l=eM(e),u=Ma(l)):e[At]&&(Hd(e[At]),e[At]=null));try{uE(e),VR(t.bindingStartIndex),n!==null&&cw(t,e,n,2,r);let h=(i&3)===3;if(!s)if(h){let m=t.preOrderCheckHooks;m!==null&&dc(e,m,null)}else{let m=t.preOrderHooks;m!==null&&hc(e,m,0,null),dh(e,0)}if(o||sM(e),mw(e),_w(e,0),t.contentQueries!==null&&JE(t,e),!s)if(h){let m=t.contentCheckHooks;m!==null&&dc(e,m)}else{let m=t.contentHooks;m!==null&&hc(e,m,1),dh(e,1)}aM(t,e);let p=t.components;p!==null&&Iw(e,p,0);let g=t.viewQuery;if(g!==null&&qh(2,g,r),!s)if(h){let m=t.viewCheckHooks;m!==null&&dc(e,m)}else{let m=t.viewHooks;m!==null&&hc(e,m,2),dh(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[lh]){for(let m of e[lh])m();e[lh]=null}s||(fw(e),e[q]&=-73)}catch(h){throw s||yo(e),h}finally{l!==null&&(jd(l,u),a&&ZP(l)),Ff()}}function _w(t,e){for(let n=qE(t);n!==null;n=zE(n))for(let r=wt;r<n.length;r++){let i=n[r];vw(i,e)}}function sM(t){for(let e=qE(t);e!==null;e=zE(e)){if(!(e[q]&2))continue;let n=e[Mi];for(let r=0;r<n.length;r++){let i=n[r];lE(i)}}}function oM(t,e,n){fe(18);let r=tn(e,t);vw(r,n),fe(19,r[gt])}function vw(t,e){Rf(t)&&Wh(t,e)}function Wh(t,e){let r=t[J],i=t[q],s=t[At],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&Bd(s)),o||=!1,s&&(s.dirty=!1),t[q]&=-9217,o)iM(r,t,r.template,t[gt]);else if(i&8192){mw(t),_w(t,1);let a=r.components;a!==null&&Iw(t,a,1),fw(t)}}function Iw(t,e,n){for(let r=0;r<e.length;r++)oM(t,e[r],n)}function aM(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)jr(~i);else{let s=i,o=n[++r],a=n[++r];jR(o,s);let u=e[s];fe(24,u),a(2,u),fe(25,u)}}}finally{jr(-1)}}function ip(t,e){let n=pE()?64:1088;for(t[bn].changeDetectionScheduler?.notify(e);t;){t[q]|=n;let r=Ur(t);if(Cc(t)&&!r)return t;t=r}return null}function Ew(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function cM(t,e,n,r=!0){let i=e[J];if(uM(i,e,t,n),r){let o=Gh(n,t),a=e[Ce],u=a.parentNode(t[Vr]);u!==null&&LP(i,t[Ut],a,e,u,o)}let s=e[wc];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function Kh(t,e){if(t.length<=wt)return;let n=wt+e,r=t[n];if(r){let i=r[Lr];i!==null&&i!==t&&np(i,r),e>0&&(t[n-1][Lt]=r[Lt]);let s=vc(t,wt+e);FP(r[J],r);let o=s[Dn];o!==null&&o.detachView(s[J]),r[Ze]=null,r[Lt]=null,r[q]&=-129}return r}function uM(t,e,n,r){let i=wt+r,s=n.length;r>0&&(n[i-1][Lt]=e),r<s-wt?(e[Lt]=n[i],$I(n,wt+r,e)):(n.push(e),e[Lt]=null),e[Ze]=n;let o=e[Lr];o!==null&&n!==o&&ww(o,e);let a=e[Dn];a!==null&&a.insertView(t),Nh(e),e[q]|=128}function ww(t,e){let n=t[Mi],r=e[Ze];if(er(r))t[q]|=2;else{let i=r[Ze][Zt];e[Zt]!==i&&(t[q]|=2)}n===null?t[Mi]=[e]:n.push(e)}var ho=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let e=this._lView,n=e[J];return Fc(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r}get context(){return this._lView[gt]}set context(e){this._lView[gt]=e}get destroyed(){return Hi(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Ze];if(Sn(e)){let n=e[Dc],r=n?n.indexOf(this):-1;r>-1&&(Kh(e,r),vc(n,r))}this._attachedToViewContainer=!1}dw(this._lView[J],this._lView)}onDestroy(e){dE(this._lView,e)}markForCheck(){ip(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[q]&=-129}reattach(){Nh(this._lView),this._lView[q]|=128}detectChanges(){this._lView[q]|=1024,yw(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Q(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Cc(this._lView),n=this._lView[Lr];n!==null&&!e&&np(n,this._lView),lw(this._lView[J],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Q(902,!1);this._appRef=e;let n=Cc(this._lView),r=this._lView[Lr];r!==null&&!n&&ww(r,this._lView),Nh(this._lView)}};var qr=(()=>{class t{static __NG_ELEMENT_ID__=hM}return t})(),lM=qr,dM=class extends lM{_declarationLView;_declarationTContainer;elementRef;constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=kP(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new ho(i)}};function hM(){return au(Xe(),$())}function au(t,e){return t.type&4?new dM(e,t,$i(t,e)):null}function cu(t,e,n,r,i){let s=t.data[e];if(s===null)s=fM(t,e,n,r,i),UR()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=FR();s.injectorIndex=o===null?-1:o.injectorIndex}return Gr(s,!0),s}function fM(t,e,n,r,i){let s=hE(),o=xf(),a=o?s:s&&s.parent,u=t.data[e]=gM(t,a,n,e,r,i);return pM(t,u,s,o),u}function pM(t,e,n,r){t.firstChild===null&&(t.firstChild=e),n!==null&&(r?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function gM(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return xR()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var u6=new RegExp(`^(\\d+)*(${PN}|${NN})*(.*)`);var mM=()=>null;function lI(t,e){return mM(t,e)}var yM=class{},Tw=class{},Qh=class{resolveComponentFactory(e){throw Error(`No component factory found for ${pt(e)}.`)}},uu=class{static NULL=new Qh},Lc=class{},sp=(()=>{class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>_M()}return t})();function _M(){let t=$(),e=Xe(),n=tn(e.index,t);return(er(n)?n:t)[Ce]}var vM=(()=>{class t{static \u0275prov=he({token:t,providedIn:"root",factory:()=>null})}return t})();var ph={},Yh=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=qc(r);let i=this.injector.get(e,ph,r);return i!==ph||n===ph?i:this.parentInjector.get(e,n,r)}};function Jh(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=wh(i,a);else if(s==2){let u=a,l=e[++o];r=wh(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function je(t,e=X.Default){let n=$();if(n===null)return Ge(t,e);let r=Xe();return PE(r,n,at(t),e)}function f6(){let t="invalid";throw new Error(t)}function op(t,e,n,r,i){let s=r===null?null:{"":-1},o=i(t,n);if(o!==null){let a,u=null,l=null,h=EM(o);h===null?a=o:[a,u,l]=h,bM(t,e,n,a,s,u,l)}s!==null&&r!==null&&IM(n,r,s)}function IM(t,e,n){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new Q(-301,!1);r.push(e[i],s)}}function EM(t){let e=null,n=!1;for(let o=0;o<t.length;o++){let a=t[o];if(o===0&&Xt(a)&&(e=a),a.findHostDirectiveDefs!==null){n=!0;break}}if(!n)return null;let r=null,i=null,s=null;for(let o of t)o.findHostDirectiveDefs!==null&&(r??=[],i??=new Map,s??=new Map,wM(o,r,s,i)),o===e&&(r??=[],r.push(o));return r!==null?(r.push(...e===null?t:t.slice(1)),[r,i,s]):null}function wM(t,e,n,r){let i=e.length;t.findHostDirectiveDefs(t,e,r),n.set(t,[i,e.length-1])}function TM(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function bM(t,e,n,r,i,s,o){let a=r.length,u=!1;for(let g=0;g<a;g++){let m=r[g];!u&&Xt(m)&&(u=!0,TM(t,n,g)),kh(Nc(n,e),t,m.type)}NM(n,t.data.length,a);for(let g=0;g<a;g++){let m=r[g];m.providersResolver&&m.providersResolver(m)}let l=!1,h=!1,p=ow(t,e,a,null);a>0&&(n.directiveToIndex=new Map);for(let g=0;g<a;g++){let m=r[g];if(n.mergedAttrs=ki(n.mergedAttrs,m.hostAttrs),CM(t,n,e,p,m),RM(p,m,i),o!==null&&o.has(m)){let[N,R]=o.get(m);n.directiveToIndex.set(m.type,[p,N+n.directiveStart,R+n.directiveStart])}else(s===null||!s.has(m))&&n.directiveToIndex.set(m.type,p);m.contentQueries!==null&&(n.flags|=4),(m.hostBindings!==null||m.hostAttrs!==null||m.hostVars!==0)&&(n.flags|=64);let w=m.type.prototype;!l&&(w.ngOnChanges||w.ngOnInit||w.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),l=!0),!h&&(w.ngOnChanges||w.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),h=!0),p++}DM(t,n,s)}function DM(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=t.data[r];if(n===null||!n.has(i))dI(0,e,i,r),dI(1,e,i,r),fI(e,r,!1);else{let s=n.get(i);hI(0,e,s,r),hI(1,e,s,r),fI(e,r,!0)}}}function dI(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o;t===0?o=e.inputs??={}:o=e.outputs??={},o[s]??=[],o[s].push(r),bw(e,s)}}function hI(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o=i[s],a;t===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[o]??=[],a[o].push(r,s),bw(e,o)}}function bw(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function fI(t,e,n){let{attrs:r,inputs:i,hostDirectiveInputs:s}=t;if(r===null||!n&&i===null||n&&s===null||Gf(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let o=null,a=0;for(;a<r.length;){let u=r[a];if(u===0){a+=4;continue}else if(u===5){a+=2;continue}else if(typeof u=="number")break;if(!n&&i.hasOwnProperty(u)){let l=i[u];for(let h of l)if(h===e){o??=[],o.push(u,r[a+1]);break}}else if(n&&s.hasOwnProperty(u)){let l=s[u];for(let h=0;h<l.length;h+=2)if(l[h]===e){o??=[],o.push(l[h+1],r[a+1]);break}}a+=2}t.initialInputs??=[],t.initialInputs.push(o)}function CM(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=kr(i.type,!0)),o=new Br(s,Xt(i),je);t.blueprint[r]=o,n[r]=o,SM(t,e,r,ow(t,n,i.hostVars,ut),i)}function SM(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;AM(o)!=a&&o.push(a),o.push(n,r,s)}}function AM(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function RM(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Xt(e)&&(n[""]=t)}}function NM(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Dw(t,e,n,r,i,s,o,a){let u=e.consts,l=xi(u,o),h=cu(e,t,2,r,l);return s&&op(e,n,h,xi(u,a),i),h.mergedAttrs=ki(h.mergedAttrs,h.attrs),h.attrs!==null&&Jh(h,h.attrs,!1),h.mergedAttrs!==null&&Jh(h,h.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,h),h}function Cw(t,e){Lf(t,e),Af(e)&&t.queries.elementEnd(e)}var Vc=class extends uu{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Fr(e);return new Fi(n,this.ngModule)}};function PM(t){return Object.keys(t).map(e=>{let[n,r,i]=t[e],s={propName:n,templateName:e,isSignal:(r&ru.SignalBased)!==0};return i&&(s.transform=i),s})}function MM(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function xM(t,e,n){let r=e instanceof tr?e:e?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new Yh(n,r):n}function kM(t){let e=t.get(Lc,null);if(e===null)throw new Q(407,!1);let n=t.get(vM,null),r=t.get(Oi,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:r}}function OM(t,e){let n=(t.selectors[0][0]||"div").toLowerCase();return nw(e,n,n==="svg"?wR:n==="math"?TR:null)}var Fi=class extends Tw{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=PM(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=MM(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=cP(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,i){fe(22);let s=te(null);try{let o=this.componentDef,a=r?["ng-version","19.2.14"]:uP(this.componentDef.selectors[0]),u=Wf(0,null,null,1,0,null,null,null,null,[a],null),l=xM(o,i||this.ngModule,e),h=kM(l),p=h.rendererFactory.createRenderer(null,o),g=r?vP(p,r,o.encapsulation,l):OM(o,p),m=Kf(null,u,null,512|sw(o),null,null,h,p,l,null,YE(g,l,!0));m[ct]=g,Of(m);let w=null;try{let N=Dw(ct,u,m,"#host",()=>[this.componentDef],!0,0);g&&(iw(p,g,N),qi(g,m)),iu(u,m,N),qf(u,N,m),Cw(u,N),n!==void 0&&FM(N,this.ngContentSelectors,n),w=tn(N.index,m),m[gt]=w[gt],ep(u,m,null)}catch(N){throw w!==null&&Bh(w),Bh(m),N}finally{fe(23),Ff()}return new Zh(this.componentType,m)}finally{te(s)}}},Zh=class extends yM{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n){super(),this._rootLView=n,this._tNode=cE(n[J],ct),this.location=$i(this._tNode,n),this.instance=tn(this._tNode.index,n)[gt],this.hostView=this.changeDetectorRef=new ho(n,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let i=this._rootLView,s=Xf(r,i[J],i,e,n);this.previousInputValues.set(e,n);let o=tn(r.index,i);ip(o,1)}get injector(){return new xr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function FM(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null&&s.length?Array.from(s):null)}}var zi=(()=>{class t{static __NG_ELEMENT_ID__=LM}return t})();function LM(){let t=Xe();return Aw(t,$())}var VM=zi,Sw=class extends VM{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return $i(this._hostTNode,this._hostLView)}get injector(){return new xr(this._hostTNode,this._hostLView)}get parentInjector(){let e=Vf(this._hostTNode,this._hostLView);if(DE(e)){let n=Ac(e,this._hostLView),r=Sc(e),i=n[J].data[r+8];return new xr(i,n)}else return new xr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=pI(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-wt}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=lI(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,i,cI(this._hostTNode,o)),a}createComponent(e,n,r,i,s){let o=e&&!yR(e),a;if(o)a=n;else{let w=n||{};a=w.index,r=w.injector,i=w.projectableNodes,s=w.environmentInjector||w.ngModuleRef}let u=o?e:new Fi(Fr(e)),l=r||this.parentInjector;if(!s&&u.ngModule==null){let N=(o?l:this.parentInjector).get(tr,null);N&&(s=N)}let h=Fr(u.componentType??{}),p=lI(this._lContainer,h?.id??null),g=p?.firstChild??null,m=u.create(l,i,g,s);return this.insertImpl(m.hostView,a,cI(this._hostTNode,p)),m}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(CR(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[Ze],l=new Sw(u,u[Ut],u[Ze]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return cM(o,i,s,r),e.attachToViewContainerRef(),$I(gh(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=pI(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Kh(this._lContainer,n);r&&(vc(gh(this._lContainer),n),dw(r[J],r))}detach(e){let n=this._adjustIndex(e,-1),r=Kh(this._lContainer,n);return r&&vc(gh(this._lContainer),n)!=null?new ho(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function pI(t){return t[Dc]}function gh(t){return t[Dc]||(t[Dc]=[])}function Aw(t,e){let n,r=e[t.index];return Sn(r)?n=r:(n=Ew(r,e,null,t),e[t.index]=n,Qf(e,n)),jM(n,e,t,r),new Sw(n,t,e)}function UM(t,e){let n=t[Ce],r=n.createComment(""),i=nn(e,t),s=n.parentNode(i);return kc(n,s,r,n.nextSibling(i),!1),r}var jM=$M,BM=()=>!1;function HM(t,e,n){return BM(t,e,n)}function $M(t,e,n,r){if(t[Vr])return;let i;n.type&8?i=en(r):i=UM(e,n),t[Vr]=i}var Xh=class t{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},ef=class t{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,i=[];for(let s=0;s<r;s++){let o=n.getByIndex(s),a=this.queries[o.indexInDeclarationView];i.push(a.clone())}return new t(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)ap(e,n).matches!==null&&this.queries[n].setDirty()}},tf=class{flags;read;predicate;constructor(e,n,r=null){this.flags=n,this.read=r,typeof e=="string"?this.predicate=JM(e):this.predicate=e}},nf=class t{queries;constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,n!==null?n.push(s):n=[s])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},rf=class t{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,n=-1){this.metadata=e,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let s=r[i];this.matchTNodeWithReadOption(e,n,qM(n,s)),this.matchTNodeWithReadOption(e,n,fc(n,e,s,!1,!1))}else r===qr?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,fc(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Wr||i===zi||i===qr&&n.type&4)this.addMatch(n.index,-2);else{let s=fc(n,e,i,!1,!1);s!==null&&this.addMatch(n.index,s)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function qM(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function zM(t,e){return t.type&11?$i(t,e):t.type&4?au(t,e):null}function GM(t,e,n,r){return n===-1?zM(e,t):n===-2?WM(t,e,r):uo(t,t[J],n,e)}function WM(t,e,n){if(n===Wr)return $i(e,t);if(n===qr)return au(e,t);if(n===zi)return Aw(e,t)}function Rw(t,e,n,r){let i=e[Dn].queries[r];if(i.matches===null){let s=t.data,o=n.matches,a=[];for(let u=0;o!==null&&u<o.length;u+=2){let l=o[u];if(l<0)a.push(null);else{let h=s[l];a.push(GM(e,h,o[u+1],n.metadata.read))}}i.matches=a}return i.matches}function sf(t,e,n,r){let i=t.queries.getByIndex(n),s=i.matches;if(s!==null){let o=Rw(t,e,i,n);for(let a=0;a<s.length;a+=2){let u=s[a];if(u>0)r.push(o[a/2]);else{let l=s[a+1],h=e[-u];for(let p=wt;p<h.length;p++){let g=h[p];g[Lr]===g[Ze]&&sf(g[J],g,l,r)}if(h[Mi]!==null){let p=h[Mi];for(let g=0;g<p.length;g++){let m=p[g];sf(m[J],m,l,r)}}}}}return r}function KM(t,e){return t[Dn].queries[e].queryList}function QM(t,e,n){let r=new jh((n&4)===4);return RR(t,e,r,r.destroy),(e[Dn]??=new ef).queries.push(new Xh(r))-1}function YM(t,e,n,r){let i=Me();if(i.firstCreatePass){let s=Xe();ZM(i,new tf(e,n,r),s.index),XM(i,t),(n&2)===2&&(i.staticContentQueries=!0)}return QM(i,$(),n)}function JM(t){return t.split(",").map(e=>e.trim())}function ZM(t,e,n){t.queries===null&&(t.queries=new nf),t.queries.track(new rf(e,n))}function XM(t,e){let n=t.contentQueries||(t.contentQueries=[]),r=n.length?n[n.length-1]:-1;e!==r&&n.push(t.queries.length-1,e)}function ap(t,e){return t.queries.getByIndex(e)}function ex(t,e){let n=t[J],r=ap(n,e);return r.crossesNgTemplate?sf(n,t,e,[]):Rw(n,t,r,e)}var Li=class{},tx=class{};var of=class extends Li{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Vc(this);constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n;let s=GI(e);this._bootstrapComponents=ew(s.bootstrap),this._r3Injector=kE(e,n,[{provide:Li,useValue:this},{provide:uu,useValue:this.componentFactoryResolver},...r],pt(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},af=class extends tx{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new of(this.moduleType,e,[])}};var Uc=class extends Li{injector;componentFactoryResolver=new Vc(this);instance=null;constructor(e){super();let n=new ao([...e.providers,{provide:Li,useValue:this},{provide:uu,useValue:this.componentFactoryResolver}],e.parent||Sf(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function nx(t,e,n=null){return new Uc({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var rx=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=KI(!1,n.type),i=r.length>0?nx([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=he({token:t,providedIn:"environment",factory:()=>new t(Ge(tr))})}return t})();function y6(t){return go(()=>{let e=Pw(t),n=De(ie({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===HE.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(rx).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||lo.Emulated,styles:t.styles||ft,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&nu("NgStandalone"),Mw(n);let r=t.dependencies;return n.directiveDefs=gI(r,!1),n.pipeDefs=gI(r,!0),n.id=cx(n),n})}function ix(t){return Fr(t)||iR(t)}function sx(t){return t!==null}function Nw(t){return go(()=>({type:t.type,bootstrap:t.bootstrap||ft,declarations:t.declarations||ft,imports:t.imports||ft,exports:t.exports||ft,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function ox(t,e){if(t==null)return Or;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,a,u;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s,u=i[3]||null):(s=i,o=i,a=ru.None,u=null),n[s]=[r,a,u],e[s]=o}return n}function ax(t){if(t==null)return Or;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function lu(t){return go(()=>{let e=Pw(t);return Mw(e),e})}function Kr(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone??!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function Pw(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||Or,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||ft,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:ox(t.inputs,e),outputs:ax(t.outputs),debugInfo:null}}function Mw(t){t.features?.forEach(e=>e(t))}function gI(t,e){if(!t)return null;let n=e?sR:ix;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(sx)}function cx(t){let e=0,n=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let s of r.join("|"))e=Math.imul(31,e)+s.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function ux(t){return Object.getPrototypeOf(t.prototype).constructor}function lx(t){let e=ux(t.type),n=!0,r=[t];for(;e;){let i;if(Xt(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Q(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let o=t;o.inputs=mh(t.inputs),o.declaredInputs=mh(t.declaredInputs),o.outputs=mh(t.outputs);let a=i.hostBindings;a&&gx(t,a);let u=i.viewQuery,l=i.contentQueries;if(u&&fx(t,u),l&&px(t,l),dx(t,i),LA(t.outputs,i.outputs),Xt(i)&&i.data.animation){let h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(t),a===lx&&(n=!1)}}e=Object.getPrototypeOf(e)}hx(r)}function dx(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n])}}function hx(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=ki(i.hostAttrs,n=ki(n,i.hostAttrs))}}function mh(t){return t===Or?{}:t===ft?[]:t}function fx(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function px(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,s)=>{e(r,i,s),n(r,i,s)}:t.contentQueries=e}function gx(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function xw(t){return cp(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function mx(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function cp(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function Qr(t,e,n){return t[e]=n}function up(t,e){return t[e]}function Vt(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function Vi(t,e,n,r){let i=Vt(t,e,n);return Vt(t,e+1,r)||i}function kw(t,e,n,r,i){let s=Vi(t,e,n,r);return Vt(t,e+2,i)||s}function du(t,e,n,r,i,s){let o=Vi(t,e,n,r);return Vi(t,e+2,i,s)||o}function yx(t,e,n,r,i,s,o,a,u){let l=e.consts,h=cu(e,t,4,o||null,a||null);Mf()&&op(e,n,h,xi(l,u),Zf),h.mergedAttrs=ki(h.mergedAttrs,h.attrs),Lf(e,h);let p=h.tView=Wf(2,h,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function _x(t,e,n,r,i,s,o,a,u,l){let h=n+ct,p=e.firstCreatePass?yx(h,e,t,r,i,s,o,a,u):e.data[h];Gr(p,!1);let g=Ix(e,t,p,n);Zc()&&su(e,t,g,p),qi(g,t);let m=Ew(g,t,g,p);return t[h]=m,Qf(t,m),HM(m,p,t),Gc(p)&&iu(e,t,p),u!=null&&Yf(t,p,l),p}function vx(t,e,n,r,i,s,o,a){let u=$(),l=Me(),h=xi(l.consts,s);return _x(u,l,t,e,n,r,i,h,o,a),vx}var Ix=Ex;function Ex(t,e,n,r){return Xc(!0),e[Ce].createComment("")}var _6=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=he({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();var wx=new se("");var Tx=(()=>{class t{static \u0275prov=he({token:t,providedIn:"root",factory:()=>new cf})}return t})(),cf=class{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}remove(e){let n=e.zone,r=this.queues.get(n);r.has(e)&&(r.delete(e),this.queuedEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,n]of this.queues)e===null?this.flushQueue(n):e.run(()=>this.flushQueue(n))}flushQueue(e){for(let n of e)e.delete(n),this.queuedEffectCount--,n.run()}};function hu(t){return!!t&&typeof t.then=="function"}function lp(t){return!!t&&typeof t.subscribe=="function"}var Ow=new se("");function v6(t){return WI([{provide:Ow,multi:!0,useValue:t}])}var Fw=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=K(Ow,{optional:!0})??[];injector=K(Hr);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let s=XI(this.injector,i);if(hu(s))n.push(s);else if(lp(s)){let o=new Promise((a,u)=>{s.subscribe({complete:a,error:u})});n.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=he({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),bx=new se("");function Dx(){qd(()=>{throw new Q(600,!1)})}function Cx(t){return t.isBoundToModule}var Sx=10;var fo=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=K(mN);afterRenderManager=K(QE);zonelessEnabled=K(jf);rootEffectScheduler=K(Tx);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new Yt;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=K(eu).hasPendingTasks.pipe(Rr(n=>!n));constructor(){K(tu,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=K(tr);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=Hr.NULL){fe(10);let s=n instanceof Tw;if(!this._injector.get(Fw).done){let m="";throw new Q(405,m)}let a;s?a=n:a=this._injector.get(uu).resolveComponentFactory(n),this.componentTypes.push(a.componentType);let u=Cx(a)?void 0:this._injector.get(Li),l=r||a.selector,h=a.create(i,[],l,u),p=h.location.nativeElement,g=h.injector.get(wx,null);return g?.registerApplication(p),h.onDestroy(()=>{this.detachView(h.hostView),pc(this.components,h),g?.unregisterApplication(p)}),this._loadComponent(h),fe(11,h),h}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){fe(12),this.tracingSnapshot!==null?this.tracingSnapshot.run($f.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new Q(101,!1);let n=te(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,te(n),this.afterTick.next(),fe(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Lc,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<Sx;)fe(14),this.synchronizeOnce(),fe(15)}synchronizeOnce(){if(this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let n=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:i}of this.allViews)Ax(r,i,n,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>Kc(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;pc(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n),this._injector.get(bx,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>pc(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new Q(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=he({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function pc(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function Ax(t,e,n,r){if(!n&&!Kc(t))return;yw(t,e,n&&!r?0:1)}function Rx(t,e,n,r){let i=$(),s=Qc();if(Vt(i,s,e)){let o=Me(),a=Jc();SP(a,i,t,e,n,r)}return Rx}function dp(t,e,n,r){return Vt(t,Qc(),n)?e+Ot(n)+r:ut}function Nx(t,e,n,r,i,s){let o=gE(),a=Vi(t,o,n,i);return Yc(2),a?e+Ot(n)+r+Ot(i)+s:ut}function Px(t,e,n,r,i,s,o,a,u,l,h,p){let g=gE(),m=du(t,g,n,i,o,u);return m=Vt(t,g+4,h)||m,Yc(5),m?e+Ot(n)+r+Ot(i)+s+Ot(o)+a+Ot(u)+l+Ot(h)+p:ut}function uc(t,e){return t<<17|e<<2}function zr(t){return t>>17&32767}function Mx(t){return(t&2)==2}function xx(t,e){return t&131071|e<<17}function uf(t){return t|2}function Ui(t){return(t&131068)>>2}function yh(t,e){return t&-131069|e<<2}function kx(t){return(t&1)===1}function lf(t){return t|1}function Ox(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=zr(o),u=Ui(o);t[r]=n;let l=!1,h;if(Array.isArray(n)){let p=n;h=p[1],(h===null||mo(p,h)>0)&&(l=!0)}else h=n;if(i)if(u!==0){let g=zr(t[a+1]);t[r+1]=uc(g,a),g!==0&&(t[g+1]=yh(t[g+1],r)),t[a+1]=xx(t[a+1],r)}else t[r+1]=uc(a,0),a!==0&&(t[a+1]=yh(t[a+1],r)),a=r;else t[r+1]=uc(u,0),a===0?a=r:t[u+1]=yh(t[u+1],r),u=r;l&&(t[r+1]=uf(t[r+1])),mI(t,h,r,!0),mI(t,h,r,!1),Fx(e,h,t,r,s),o=uc(a,u),s?e.classBindings=o:e.styleBindings=o}function Fx(t,e,n,r,i){let s=i?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&mo(s,e)>=0&&(n[r+1]=lf(n[r+1]))}function mI(t,e,n,r){let i=t[n+1],s=e===null,o=r?zr(i):Ui(i),a=!1;for(;o!==0&&(a===!1||s);){let u=t[o],l=t[o+1];Lx(u,e)&&(a=!0,t[o+1]=r?lf(l):uf(l)),o=r?zr(l):Ui(l)}a&&(t[n+1]=r?uf(i):lf(i))}function Lx(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?mo(t,e)>=0:!1}var Ft={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Vx(t){return t.substring(Ft.key,Ft.keyEnd)}function Ux(t){return jx(t),Lw(t,Vw(t,0,Ft.textEnd))}function Lw(t,e){let n=Ft.textEnd;return n===e?-1:(e=Ft.keyEnd=Bx(t,Ft.key=e,n),Vw(t,e,n))}function jx(t){Ft.key=0,Ft.keyEnd=0,Ft.value=0,Ft.valueEnd=0,Ft.textEnd=t.length}function Vw(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function Bx(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}function Hx(t,e,n){let r=$(),i=Qc();if(Vt(r,i,e)){let s=Me(),o=Jc();Jf(s,o,r,t,e,r[Ce],n,!1)}return Hx}function df(t,e,n,r,i){Xf(e,t,n,i?"class":"style",r)}function $x(t,e){return zx(t,e,null,!0),$x}function qx(t,e){for(let n=Ux(e);n>=0;n=Lw(e,n))Df(t,Vx(e),!0)}function zx(t,e,n,r){let i=$(),s=Me(),o=Yc(2);if(s.firstUpdatePass&&jw(s,t,o,r),e!==ut&&Vt(i,o,e)){let a=s.data[An()];Bw(s,a,i,i[Ce],t,i[o+1]=Xx(e,n),r,o)}}function Gx(t,e,n,r){let i=Me(),s=Yc(2);i.firstUpdatePass&&jw(i,null,s,r);let o=$();if(n!==ut&&Vt(o,s,n)){let a=i.data[An()];if(Hw(a,r)&&!Uw(i,s)){let u=r?a.classesWithoutHost:a.stylesWithoutHost;u!==null&&(n=wh(u,n||"")),df(i,a,o,n,r)}else Zx(i,a,o,o[Ce],o[s+1],o[s+1]=Jx(t,e,n),r,s)}}function Uw(t,e){return e>=t.expandoStartIndex}function jw(t,e,n,r){let i=t.data;if(i[n+1]===null){let s=i[An()],o=Uw(t,n);Hw(s,r)&&e===null&&!o&&(e=!1),e=Wx(i,s,e,r),Ox(i,s,e,n,o,r)}}function Wx(t,e,n,r){let i=HR(t),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=_h(null,t,e,n,r),n=po(n,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==i)if(n=_h(i,t,e,n,r),s===null){let u=Kx(t,e,r);u!==void 0&&Array.isArray(u)&&(u=_h(null,t,e,u[1],r),u=po(u,e.attrs,r),Qx(t,e,r,u))}else s=Yx(t,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),n}function Kx(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Ui(r)!==0)return t[zr(r)]}function Qx(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[zr(i)]=r}function Yx(t,e,n){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=t[s].hostAttrs;r=po(r,o,n)}return po(r,e.attrs,n)}function _h(t,e,n,r,i){let s=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(s=e[a],r=po(r,s.hostAttrs,i),s!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function po(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),Df(t,o,n?!0:e[++s]))}return t===void 0?null:t}function Jx(t,e,n){if(n==null||n==="")return ft;let r=[],i=_o(n);if(Array.isArray(i))for(let s=0;s<i.length;s++)t(r,i[s],!0);else if(typeof i=="object")for(let s in i)i.hasOwnProperty(s)&&t(r,s,i[s]);else typeof i=="string"&&e(r,i);return r}function Zx(t,e,n,r,i,s,o,a){i===ut&&(i=ft);let u=0,l=0,h=0<i.length?i[0]:null,p=0<s.length?s[0]:null;for(;h!==null||p!==null;){let g=u<i.length?i[u+1]:void 0,m=l<s.length?s[l+1]:void 0,w=null,N;h===p?(u+=2,l+=2,g!==m&&(w=p,N=m)):p===null||h!==null&&h<p?(u+=2,w=h):(l+=2,w=p,N=m),w!==null&&Bw(t,e,n,r,w,N,o,a),h=u<i.length?i[u]:null,p=l<s.length?s[l]:null}}function Bw(t,e,n,r,i,s,o,a){if(!(e.type&3))return;let u=t.data,l=u[a+1],h=kx(l)?yI(u,e,n,i,Ui(l),o):void 0;if(!jc(h)){jc(s)||Mx(l)&&(s=yI(u,null,n,i,a,o));let p=aE(An(),n);KP(r,o,p,i,s)}}function yI(t,e,n,r,i,s){let o=e===null,a;for(;i>0;){let u=t[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,g=n[i+1];g===ut&&(g=p?ft:void 0);let m=p?ch(g,r):h===r?g:void 0;if(l&&!jc(m)&&(m=ch(u,r)),jc(m)&&(a=m,o))return a;let w=t[i+1];i=o?zr(w):Ui(w)}if(e!==null){let u=s?e.residualClasses:e.residualStyles;u!=null&&(a=ch(u,r))}return a}function jc(t){return t!==void 0}function Xx(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=pt(_o(t)))),t}function Hw(t,e){return(t.flags&(e?8:16))!==0}function I6(t,e,n){let r=$(),i=dp(r,t,e,n);Gx(Df,qx,i,!0)}function $w(t,e,n,r){let i=$(),s=Me(),o=ct+t,a=i[Ce],u=s.firstCreatePass?Dw(o,s,i,e,Zf,Mf(),n,r):s.data[o],l=tk(s,i,u,a,e,t);i[o]=l;let h=Gc(u);return Gr(u,!0),iw(a,l,u),!uw(u)&&Zc()&&su(s,i,l,u),(NR()===0||h)&&qi(l,i),PR(),h&&(iu(s,i,u),qf(s,u,i)),r!==null&&Yf(i,u),$w}function qw(){let t=Xe();xf()?fE():(t=t.parent,Gr(t,!1));let e=t;kR(e)&&OR(),MR();let n=Me();return n.firstCreatePass&&Cw(n,e),e.classesWithoutHost!=null&&KR(e)&&df(n,e,$(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&QR(e)&&df(n,e,$(),e.stylesWithoutHost,!1),qw}function ek(t,e,n,r){return $w(t,e,n,r),qw(),ek}var tk=(t,e,n,r,i,s)=>(Xc(!0),nw(r,i,zR()));function nk(t,e,n,r,i){let s=e.consts,o=xi(s,r),a=cu(e,t,8,"ng-container",o);o!==null&&Jh(a,o,!0);let u=xi(s,i);return Mf()&&op(e,n,a,u,Zf),a.mergedAttrs=ki(a.mergedAttrs,a.attrs),e.queries!==null&&e.queries.elementStart(e,a),a}function rk(t,e,n){let r=$(),i=Me(),s=t+ct,o=i.firstCreatePass?nk(s,i,r,e,n):i.data[s];Gr(o,!0);let a=sk(i,r,o,t);return r[s]=a,Zc()&&su(i,r,a,o),qi(a,r),Gc(o)&&(iu(i,r,o),qf(i,o,r)),n!=null&&Yf(r,o),rk}function ik(){let t=Xe(),e=Me();return xf()?fE():(t=t.parent,Gr(t,!1)),e.firstCreatePass&&(Lf(e,t),Af(t)&&e.queries.elementEnd(t)),ik}var sk=(t,e,n,r)=>(Xc(!0),hP(e[Ce],""));function E6(){return $()}var Pr=void 0;function ok(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return e===1&&n===0?1:5}var ak=["en",[["a","p"],["AM","PM"],Pr],[["AM","PM"],Pr,Pr],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Pr,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Pr,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Pr,"{1} 'at' {0}",Pr],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",ok],vh={};function bt(t){let e=ck(t),n=_I(e);if(n)return n;let r=e.split("-")[0];if(n=_I(r),n)return n;if(r==="en")return ak;throw new Q(701,!1)}function _I(t){return t in vh||(vh[t]=Ti.ng&&Ti.ng.common&&Ti.ng.common.locales&&Ti.ng.common.locales[t]),vh[t]}var Se=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(Se||{});function ck(t){return t.toLowerCase().replace(/_/g,"-")}var Bc="en-US";var uk=Bc;function lk(t){typeof t=="string"&&(uk=t.toLowerCase().replace(/_/g,"-"))}function vI(t,e,n){return function r(i){if(i===Function)return n;let s=Bi(t)?tn(t.index,e):e;ip(s,5);let o=e[gt],a=II(e,o,n,i),u=r.__ngNextListenerFn__;for(;u;)a=II(e,o,u,i)&&a,u=u.__ngNextListenerFn__;return a}}function II(t,e,n,r){let i=te(null);try{return fe(6,e,n),n(r)!==!1}catch(s){return dk(t,s),!1}finally{fe(7,e,n),te(i)}}function dk(t,e){let n=t[Pi],r=n?n.get($r,null):null;r&&r.handleError(e)}function EI(t,e,n,r,i,s){let o=e[n],a=e[J],l=a.data[n].outputs[r],h=o[l],p=a.firstCreatePass?Pf(a):null,g=Nf(e),m=h.subscribe(s),w=g.length;g.push(s,m),p&&p.push(i,t.index,w,-(w+1))}function hk(t,e,n,r){let i=$(),s=Me(),o=Xe();return zw(s,i,i[Ce],o,t,e,r),hk}function fk(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let a=e[Tc],u=i[s+2];return a.length>u?a[u]:null}typeof o=="string"&&(s+=2)}return null}function zw(t,e,n,r,i,s,o){let a=Gc(r),l=t.firstCreatePass?Pf(t):null,h=Nf(e),p=!0;if(r.type&3||o){let g=nn(r,e),m=o?o(g):g,w=h.length,N=o?O=>o(en(O[r.index])):r.index,R=null;if(!o&&a&&(R=fk(t,e,i,r.index)),R!==null){let O=R.__ngLastListenerFn__||R;O.__ngNextListenerFn__=s,R.__ngLastListenerFn__=s,p=!1}else{s=vI(r,e,s),jN(e,m,i,s);let O=n.listen(m,i,s);h.push(s,O),l&&l.push(i,N,w,w+1)}}else s=vI(r,e,s);if(p){let g=r.outputs?.[i],m=r.hostDirectiveOutputs?.[i];if(m&&m.length)for(let w=0;w<m.length;w+=2){let N=m[w],R=m[w+1];EI(r,e,N,R,i,s)}if(g&&g.length)for(let w of g)EI(r,e,w,i,i,s)}}function w6(t=1){return qR(t)}function pk(t,e,n){return Gw(t,"",e,"",n),pk}function Gw(t,e,n,r,i){let s=$(),o=dp(s,e,n,r);if(o!==ut){let a=Me(),u=Jc();Jf(a,u,s,t,o,s[Ce],i,!1)}return Gw}function T6(t,e,n,r){YM(t,e,n,r)}function b6(t){let e=$(),n=Me(),r=mE();kf(r+1);let i=ap(n,r);if(t.dirty&&DR(e)===((i.metadata.flags&2)===2)){if(i.matches===null)t.reset([]);else{let s=ex(e,r);t.reset(s,vN),t.notifyOnChanges()}return!0}return!1}function D6(){return KM($(),mE())}function C6(t){let e=LR();return Wc(e,ct+t)}function S6(t,e=""){let n=$(),r=Me(),i=t+ct,s=r.firstCreatePass?cu(r,i,1,e,null):r.data[i],o=gk(r,n,s,e,t);n[i]=o,Zc()&&su(r,n,o,s),Gr(s,!1)}var gk=(t,e,n,r,i)=>(Xc(!0),lP(e[Ce],r));function mk(t){return Ww("",t,""),mk}function Ww(t,e,n){let r=$(),i=dp(r,t,e,n);return i!==ut&&hp(r,An(),i),Ww}function yk(t,e,n,r,i){let s=$(),o=Nx(s,t,e,n,r,i);return o!==ut&&hp(s,An(),o),yk}function _k(t,e,n,r,i,s,o,a,u,l,h){let p=$(),g=Px(p,t,e,n,r,i,s,o,a,u,l,h);return g!==ut&&hp(p,An(),g),_k}function hp(t,e,n){let r=aE(e,t);dP(t[Ce],r,n)}function vk(t,e,n){jE(e)&&(e=e());let r=$(),i=Qc();if(Vt(r,i,e)){let s=Me(),o=Jc();Jf(s,o,r,t,e,r[Ce],n,!1)}return vk}function A6(t,e){let n=jE(t);return n&&t.set(e),n}function Ik(t,e){let n=$(),r=Me(),i=Xe();return zw(r,n,n[Ce],i,t,e),Ik}function Ek(t,e,n){let r=Me();if(r.firstCreatePass){let i=Xt(t);hf(n,r.data,r.blueprint,i,!0),hf(e,r.data,r.blueprint,i,!1)}}function hf(t,e,n,r,i){if(t=at(t),Array.isArray(t))for(let s=0;s<t.length;s++)hf(t[s],e,n,r,i);else{let s=Me(),o=$(),a=Xe(),u=Ni(t)?t:at(t.provide),l=ZI(t),h=a.providerIndexes&1048575,p=a.directiveStart,g=a.providerIndexes>>20;if(Ni(t)||!t.multi){let m=new Br(l,i,je),w=Eh(u,e,i?h:h+g,p);w===-1?(kh(Nc(a,o),s,u),Ih(s,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(m),o.push(m)):(n[w]=m,o[w]=m)}else{let m=Eh(u,e,h+g,p),w=Eh(u,e,h,h+g),N=m>=0&&n[m],R=w>=0&&n[w];if(i&&!R||!i&&!N){kh(Nc(a,o),s,u);let O=bk(i?Tk:wk,n.length,i,r,l);!i&&R&&(n[w].providerFactory=O),Ih(s,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(O),o.push(O)}else{let O=Kw(n[i?w:m],l,!i&&r);Ih(s,t,m>-1?m:w,O)}!i&&r&&R&&n[w].componentProviders++}}}function Ih(t,e,n,r){let i=Ni(e),s=lR(e);if(i||s){let u=(s?at(e.useClass):e).prototype.ngOnDestroy;if(u){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(n);h===-1?l.push(n,[r,u]):l[h+1].push(r,u)}else l.push(n,u)}}}function Kw(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Eh(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function wk(t,e,n,r,i){return ff(this.multi,[])}function Tk(t,e,n,r,i){let s=this.multi,o;if(this.providerFactory){let a=this.providerFactory.componentProviders,u=uo(r,r[J],this.providerFactory.index,i);o=u.slice(0,a),ff(s,o);for(let l=a;l<u.length;l++)o.push(u[l])}else o=[],ff(s,o);return o}function ff(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function bk(t,e,n,r,i){let s=new Br(t,n,je);return s.multi=[],s.index=e,s.componentProviders=0,Kw(s,i,r&&!n),s}function R6(t,e=[]){return n=>{n.providersResolver=(r,i)=>Ek(r,i?i(t):t,e)}}function N6(t,e,n){let r=rn()+t,i=$();return i[r]===ut?Qr(i,r,n?e.call(n):e()):up(i,r)}function P6(t,e,n,r){return Qw($(),rn(),t,e,n,r)}function M6(t,e,n,r,i){return Yw($(),rn(),t,e,n,r,i)}function x6(t,e,n,r,i,s){return Jw($(),rn(),t,e,n,r,i,s)}function k6(t,e,n,r,i,s,o){return Dk($(),rn(),t,e,n,r,i,s,o)}function O6(t,e,n,r,i,s,o,a,u){let l=rn()+t,h=$(),p=du(h,l,n,r,i,s);return Vi(h,l+4,o,a)||p?Qr(h,l+6,u?e.call(u,n,r,i,s,o,a):e(n,r,i,s,o,a)):up(h,l+6)}function F6(t,e,n,r,i,s,o,a,u,l){let h=rn()+t,p=$(),g=du(p,h,n,r,i,s);return kw(p,h+4,o,a,u)||g?Qr(p,h+7,l?e.call(l,n,r,i,s,o,a,u):e(n,r,i,s,o,a,u)):up(p,h+7)}function fu(t,e){let n=t[e];return n===ut?void 0:n}function Qw(t,e,n,r,i,s){let o=e+n;return Vt(t,o,i)?Qr(t,o+1,s?r.call(s,i):r(i)):fu(t,o+1)}function Yw(t,e,n,r,i,s,o){let a=e+n;return Vi(t,a,i,s)?Qr(t,a+2,o?r.call(o,i,s):r(i,s)):fu(t,a+2)}function Jw(t,e,n,r,i,s,o,a){let u=e+n;return kw(t,u,i,s,o)?Qr(t,u+3,a?r.call(a,i,s,o):r(i,s,o)):fu(t,u+3)}function Dk(t,e,n,r,i,s,o,a,u){let l=e+n;return du(t,l,i,s,o,a)?Qr(t,l+4,u?r.call(u,i,s,o,a):r(i,s,o,a)):fu(t,l+4)}function L6(t,e){let n=Me(),r,i=t+ct;n.firstCreatePass?(r=Ck(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let s=r.factory||(r.factory=kr(r.type,!0)),o,a=ht(je);try{let u=Rc(!1),l=s();return Rc(u),bR(n,$(),i,l),l}finally{ht(a)}}function Ck(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function V6(t,e,n){let r=t+ct,i=$(),s=Wc(i,r);return fp(i,r)?Qw(i,rn(),e,s.transform,n,s):s.transform(n)}function U6(t,e,n,r){let i=t+ct,s=$(),o=Wc(s,i);return fp(s,i)?Yw(s,rn(),e,o.transform,n,r,o):o.transform(n,r)}function j6(t,e,n,r,i){let s=t+ct,o=$(),a=Wc(o,s);return fp(o,s)?Jw(o,rn(),e,a.transform,n,r,i,a):a.transform(n,r,i)}function fp(t,e){return t[J].data[e].pure}function B6(t,e){return au(t,e)}var pf=class{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},H6=(()=>{class t{compileModuleSync(n){return new af(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=GI(n),s=ew(i.declarations).reduce((o,a)=>{let u=Fr(a);return u&&o.push(new Fi(u)),o},[]);return new pf(r,s)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=he({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Sk=(()=>{class t{zone=K(Tt);changeDetectionScheduler=K(Oi);applicationRef=K(fo);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=he({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Ak=new se("",{factory:()=>!1});function Zw({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new Tt(De(ie({},Xw()),{scheduleInRootZone:n})),[{provide:Tt,useFactory:t},{provide:Ic,multi:!0,useFactory:()=>{let r=K(Sk,{optional:!0});return()=>r.initialize()}},{provide:Ic,multi:!0,useFactory:()=>{let r=K(Rk);return()=>{r.initialize()}}},e===!0?{provide:FE,useValue:!0}:[],{provide:LE,useValue:n??OE}]}function $6(t){let e=t?.ignoreChangesOutsideZone,n=t?.scheduleInRootZone,r=Zw({ngZoneFactory:()=>{let i=Xw(t);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&nu("NgZone_CoalesceEvent"),new Tt(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:n});return WI([{provide:Ak,useValue:!0},{provide:jf,useValue:!1},r])}function Xw(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var Rk=(()=>{class t{subscription=new Ue;initialized=!1;zone=K(Tt);pendingTasks=K(eu);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Tt.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Tt.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=he({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Nk=(()=>{class t{appRef=K(fo);taskService=K(eu);ngZone=K(Tt);zonelessEnabled=K(jf);tracing=K(tu,{optional:!0});disableScheduling=K(FE,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Ue;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Mc):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(K(LE,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Uh||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let r=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?Xv:VE;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Mc+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(n),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Xv(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=he({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Pk(){return typeof $localize<"u"&&$localize.locale||Bc}var vo=new se("",{providedIn:"root",factory:()=>K(vo,X.Optional|X.SkipSelf)||Pk()});var gf=new se(""),Mk=new se("");function ro(t){return!t.moduleRef}function xk(t){let e=ro(t)?t.r3Injector:t.moduleRef.injector,n=e.get(Tt);return n.run(()=>{ro(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get($r,null),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:s=>{r.handleError(s)}})}),ro(t)){let s=()=>e.destroy(),o=t.platformInjector.get(gf);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>t.moduleRef.destroy(),o=t.platformInjector.get(gf);o.add(s),t.moduleRef.onDestroy(()=>{pc(t.allPlatformModules,t.moduleRef),i.unsubscribe(),o.delete(s)})}return Ok(r,n,()=>{let s=e.get(Fw);return s.runInitializers(),s.donePromise.then(()=>{let o=e.get(vo,Bc);if(lk(o||Bc),!e.get(Mk,!0))return ro(t)?e.get(fo):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(ro(t)){let u=e.get(fo);return t.rootComponent!==void 0&&u.bootstrap(t.rootComponent),u}else return kk(t.moduleRef,t.allPlatformModules),t.moduleRef})})})}function kk(t,e){let n=t.injector.get(fo);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(t.instance.ngDoBootstrap)t.instance.ngDoBootstrap(n);else throw new Q(-403,!1);e.push(t)}function Ok(t,e,n){try{let r=n();return hu(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var gc=null;function Fk(t=[],e){return Hr.create({name:e,providers:[{provide:JI,useValue:"platform"},{provide:gf,useValue:new Set([()=>gc=null])},...t]})}function Lk(t=[]){if(gc)return gc;let e=Fk(t);return gc=e,Dx(),Vk(e),e}function Vk(t){let e=t.get(AN,null);XI(t,()=>{e?.forEach(n=>n())})}var pp=(()=>{class t{static __NG_ELEMENT_ID__=Uk}return t})();function Uk(t){return jk(Xe(),$(),(t&16)===16)}function jk(t,e,n){if(Bi(t)&&!n){let r=tn(t.index,e);return new ho(r,r)}else if(t.type&175){let r=e[Zt];return new ho(r,e)}return null}var mf=class{constructor(){}supports(e){return xw(e)}create(e){return new yf(e)}},Bk=(t,e)=>e,yf=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||Bk}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){let o=!r||n&&n.currentIndex<wI(r,i,s)?n:r,a=wI(o,i,s),u=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,o.previousIndex==null)i++;else{s||(s=[]);let l=a-i,h=u-i;if(l!=h){for(let g=0;g<l;g++){let m=g<s.length?s[g]:s[g]=0,w=m+g;h<=w&&w<l&&(s[g]=m+1)}let p=o.previousIndex;s[p]=h-l}}a!==u&&e(o,a,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!xw(e))throw new Q(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,s,o,a),r=!0):(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)),n=n._next}else i=0,mx(e,a=>{o=this._trackByFn(i,a),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,a,o,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new _f(n,r),s,i)),e}_verifyReinsertion(e,n,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new Hc),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Hc),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},_f=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,n){this.item=e,this.trackById=n}},vf=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Hc=class{map=new Map;put(e){let n=e.trackById,r=this.map.get(n);r||(r=new vf,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function wI(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}var If=class{constructor(){}supports(e){return e instanceof Map||cp(e)}create(){return new Ef}},Ef=class{_records=new Map;_mapHead=null;_appendAfter=null;_previousMapHead=null;_changesHead=null;_changesTail=null;_additionsHead=null;_additionsTail=null;_removalsHead=null;_removalsTail=null;get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(e){let n;for(n=this._mapHead;n!==null;n=n._next)e(n)}forEachPreviousItem(e){let n;for(n=this._previousMapHead;n!==null;n=n._nextPrevious)e(n)}forEachChangedItem(e){let n;for(n=this._changesHead;n!==null;n=n._nextChanged)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}diff(e){if(!e)e=new Map;else if(!(e instanceof Map||cp(e)))throw new Q(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(n&&n.key===i)this._maybeAddToChanges(n,r),this._appendAfter=n,n=n._next;else{let s=this._getOrCreateRecordForKey(i,r);n=this._insertBeforeOrAppend(n,s)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let r=n;r!==null;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,n){if(e){let r=e._prev;return n._next=e,n._prev=r,e._prev=n,r&&(r._next=n),e===this._mapHead&&(this._mapHead=n),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(e,n){if(this._records.has(e)){let i=this._records.get(e);this._maybeAddToChanges(i,n);let s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}let r=new wf(e);return this._records.set(e,r),r.currentValue=n,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;e!==null;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;e!=null;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,n){Object.is(n,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=n,this._addToChanges(e))}_addToAdditions(e){this._additionsHead===null?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){this._changesHead===null?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,n){e instanceof Map?e.forEach(n):Object.keys(e).forEach(r=>n(e[r],r))}},wf=class{key;previousValue=null;currentValue=null;_nextPrevious=null;_next=null;_prev=null;_nextAdded=null;_nextRemoved=null;_nextChanged=null;constructor(e){this.key=e}};function TI(){return new gp([new mf])}var gp=(()=>{class t{factories;static \u0275prov=he({token:t,providedIn:"root",factory:TI});constructor(n){this.factories=n}static create(n,r){if(r!=null){let i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||TI()),deps:[[t,new HI,new BI]]}}find(n){let r=this.factories.find(i=>i.supports(n));if(r!=null)return r;throw new Q(901,!1)}}return t})();function bI(){return new mp([new If])}var mp=(()=>{class t{static \u0275prov=he({token:t,providedIn:"root",factory:bI});factories;constructor(n){this.factories=n}static create(n,r){if(r){let i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||bI()),deps:[[t,new HI,new BI]]}}find(n){let r=this.factories.find(i=>i.supports(n));if(r)return r;throw new Q(901,!1)}}return t})();function q6(t){fe(8);try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=Lk(r),s=[Zw({}),{provide:Oi,useExisting:Nk},...n||[]],o=new Uc({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1});return xk({r3Injector:o.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}finally{fe(9)}}function Hk(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function yp(t){return Wd(t)}function z6(t,e){return $d(t,e?.equal)}var DI=class{[St];constructor(e){this[St]=e}destroy(){this[St].destroy()}};function G6(t){let e=Fr(t);if(!e)return null;let n=new Fi(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var Io=new se("");var nT=null;function pu(){return nT}function $k(t){nT??=t}var vp=class{},Eo=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=he({token:t,factory:()=>K(rT),providedIn:"platform"})}return t})(),qk=new se(""),rT=(()=>{class t extends Eo{_location;_history;_doc=K(Io);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return pu().getBaseHref(this._doc)}onPopState(n){let r=pu().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=pu().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=he({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function gu(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function eT(t){let e=t.search(/#|\?|$/);return t[e-1]==="/"?t.slice(0,e-1)+t.slice(e):t}function jt(t){return t&&t[0]!=="?"?`?${t}`:t}var Gi=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=he({token:t,factory:()=>K(iT),providedIn:"root"})}return t})(),mu=new se(""),iT=(()=>{class t extends Gi{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??K(Io).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return gu(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+jt(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,s){let o=this.prepareExternalUrl(i+jt(s));this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){let o=this.prepareExternalUrl(i+jt(s));this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(Ge(Eo),Ge(mu,8))};static \u0275prov=he({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),sT=(()=>{class t{_subject=new Yt;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=Wk(eT(tT(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+jt(r))}normalize(n){return t.stripTrailingSlash(Gk(this._basePath,tT(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+jt(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+jt(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=jt;static joinWithSlash=gu;static stripTrailingSlash=eT;static \u0275fac=function(r){return new(r||t)(Ge(Gi))};static \u0275prov=he({token:t,factory:()=>zk(),providedIn:"root"})}return t})();function zk(){return new sT(Ge(Gi))}function Gk(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function tT(t){return t.replace(/\/index.html$/,"")}function Wk(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var Kk=(()=>{class t extends Gi{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(n){let r=gu(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,s){let o=this.prepareExternalUrl(i+jt(s))||this._platformLocation.pathname;this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){let o=this.prepareExternalUrl(i+jt(s))||this._platformLocation.pathname;this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(Ge(Eo),Ge(mu,8))};static \u0275prov=he({token:t,factory:t.\u0275fac})}return t})();var Ap=function(t){return t[t.Decimal=0]="Decimal",t[t.Percent=1]="Percent",t[t.Currency=2]="Currency",t[t.Scientific=3]="Scientific",t}(Ap||{});var et=function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t}(et||{}),pe=function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t}(pe||{}),mt=function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t}(mt||{}),yt={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function hT(t){return bt(t)[Se.LocaleId]}function fT(t,e,n){let r=bt(t),i=[r[Se.DayPeriodsFormat],r[Se.DayPeriodsStandalone]],s=Rt(i,e);return Rt(s,n)}function pT(t,e,n){let r=bt(t),i=[r[Se.DaysFormat],r[Se.DaysStandalone]],s=Rt(i,e);return Rt(s,n)}function gT(t,e,n){let r=bt(t),i=[r[Se.MonthsFormat],r[Se.MonthsStandalone]],s=Rt(i,e);return Rt(s,n)}function mT(t,e){let r=bt(t)[Se.Eras];return Rt(r,e)}function wo(t,e){let n=bt(t);return Rt(n[Se.DateFormat],e)}function To(t,e){let n=bt(t);return Rt(n[Se.TimeFormat],e)}function bo(t,e){let r=bt(t)[Se.DateTimeFormat];return Rt(r,e)}function sn(t,e){let n=bt(t),r=n[Se.NumberSymbols][e];if(typeof r>"u"){if(e===yt.CurrencyDecimal)return n[Se.NumberSymbols][yt.Decimal];if(e===yt.CurrencyGroup)return n[Se.NumberSymbols][yt.Group]}return r}function yT(t,e){return bt(t)[Se.NumberFormats][e]}function _T(t){if(!t[Se.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[Se.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function vT(t){let e=bt(t);return _T(e),(e[Se.ExtraData][2]||[]).map(r=>typeof r=="string"?Ip(r):[Ip(r[0]),Ip(r[1])])}function IT(t,e,n){let r=bt(t);_T(r);let i=[r[Se.ExtraData][0],r[Se.ExtraData][1]],s=Rt(i,e)||[];return Rt(s,n)||[]}function Rt(t,e){for(let n=e;n>-1;n--)if(typeof t[n]<"u")return t[n];throw new Error("Locale data API: locale data undefined")}function Ip(t){let[e,n]=t.split(":");return{hours:+e,minutes:+n}}var Qk=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,yu={},Yk=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function ET(t,e,n,r){let i=sO(t);e=Rn(n,e)||e;let o=[],a;for(;e;)if(a=Yk.exec(e),a){o=o.concat(a.slice(1));let h=o.pop();if(!h)break;e=h}else{o.push(e);break}let u=i.getTimezoneOffset();r&&(u=TT(r,u),i=iO(i,r));let l="";return o.forEach(h=>{let p=nO(h);l+=p?p(i,n,u):h==="''"?"'":h.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function wu(t,e,n){let r=new Date(0);return r.setFullYear(t,e,n),r.setHours(0,0,0),r}function Rn(t,e){let n=hT(t);if(yu[n]??={},yu[n][e])return yu[n][e];let r="";switch(e){case"shortDate":r=wo(t,mt.Short);break;case"mediumDate":r=wo(t,mt.Medium);break;case"longDate":r=wo(t,mt.Long);break;case"fullDate":r=wo(t,mt.Full);break;case"shortTime":r=To(t,mt.Short);break;case"mediumTime":r=To(t,mt.Medium);break;case"longTime":r=To(t,mt.Long);break;case"fullTime":r=To(t,mt.Full);break;case"short":let i=Rn(t,"shortTime"),s=Rn(t,"shortDate");r=_u(bo(t,mt.Short),[i,s]);break;case"medium":let o=Rn(t,"mediumTime"),a=Rn(t,"mediumDate");r=_u(bo(t,mt.Medium),[o,a]);break;case"long":let u=Rn(t,"longTime"),l=Rn(t,"longDate");r=_u(bo(t,mt.Long),[u,l]);break;case"full":let h=Rn(t,"fullTime"),p=Rn(t,"fullDate");r=_u(bo(t,mt.Full),[h,p]);break}return r&&(yu[n][e]=r),r}function _u(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(n,r){return e!=null&&r in e?e[r]:n})),t}function Bt(t,e,n="-",r,i){let s="";(t<0||i&&t<=0)&&(i?t=-t+1:(t=-t,s=n));let o=String(t);for(;o.length<e;)o="0"+o;return r&&(o=o.slice(o.length-e)),s+o}function Jk(t,e){return Bt(t,3).substring(0,e)}function xe(t,e,n=0,r=!1,i=!1){return function(s,o){let a=Zk(t,s);if((n>0||a>-n)&&(a+=n),t===3)a===0&&n===-12&&(a=12);else if(t===6)return Jk(a,e);let u=sn(o,yt.MinusSign);return Bt(a,e,u,r,i)}}function Zk(t,e){switch(t){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}function _e(t,e,n=et.Format,r=!1){return function(i,s){return Xk(i,s,t,e,n,r)}}function Xk(t,e,n,r,i,s){switch(n){case 2:return gT(e,i,r)[t.getMonth()];case 1:return pT(e,i,r)[t.getDay()];case 0:let o=t.getHours(),a=t.getMinutes();if(s){let l=vT(e),h=IT(e,i,r),p=l.findIndex(g=>{if(Array.isArray(g)){let[m,w]=g,N=o>=m.hours&&a>=m.minutes,R=o<w.hours||o===w.hours&&a<w.minutes;if(m.hours<w.hours){if(N&&R)return!0}else if(N||R)return!0}else if(g.hours===o&&g.minutes===a)return!0;return!1});if(p!==-1)return h[p]}return fT(e,i,r)[o<12?0:1];case 3:return mT(e,r)[t.getFullYear()<=0?0:1];default:let u=n;throw new Error(`unexpected translation type ${u}`)}}function vu(t){return function(e,n,r){let i=-1*r,s=sn(n,yt.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case 0:return(i>=0?"+":"")+Bt(o,2,s)+Bt(Math.abs(i%60),2,s);case 1:return"GMT"+(i>=0?"+":"")+Bt(o,1,s);case 2:return"GMT"+(i>=0?"+":"")+Bt(o,2,s)+":"+Bt(Math.abs(i%60),2,s);case 3:return r===0?"Z":(i>=0?"+":"")+Bt(o,2,s)+":"+Bt(Math.abs(i%60),2,s);default:throw new Error(`Unknown zone width "${t}"`)}}}var eO=0,Eu=4;function tO(t){let e=wu(t,eO,1).getDay();return wu(t,0,1+(e<=Eu?Eu:Eu+7)-e)}function wT(t){let e=t.getDay(),n=e===0?-3:Eu-e;return wu(t.getFullYear(),t.getMonth(),t.getDate()+n)}function Ep(t,e=!1){return function(n,r){let i;if(e){let s=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,o=n.getDate();i=1+Math.floor((o+s)/7)}else{let s=wT(n),o=tO(s.getFullYear()),a=s.getTime()-o.getTime();i=1+Math.round(a/6048e5)}return Bt(i,t,sn(r,yt.MinusSign))}}function Iu(t,e=!1){return function(n,r){let s=wT(n).getFullYear();return Bt(s,t,sn(r,yt.MinusSign),e)}}var wp={};function nO(t){if(wp[t])return wp[t];let e;switch(t){case"G":case"GG":case"GGG":e=_e(3,pe.Abbreviated);break;case"GGGG":e=_e(3,pe.Wide);break;case"GGGGG":e=_e(3,pe.Narrow);break;case"y":e=xe(0,1,0,!1,!0);break;case"yy":e=xe(0,2,0,!0,!0);break;case"yyy":e=xe(0,3,0,!1,!0);break;case"yyyy":e=xe(0,4,0,!1,!0);break;case"Y":e=Iu(1);break;case"YY":e=Iu(2,!0);break;case"YYY":e=Iu(3);break;case"YYYY":e=Iu(4);break;case"M":case"L":e=xe(1,1,1);break;case"MM":case"LL":e=xe(1,2,1);break;case"MMM":e=_e(2,pe.Abbreviated);break;case"MMMM":e=_e(2,pe.Wide);break;case"MMMMM":e=_e(2,pe.Narrow);break;case"LLL":e=_e(2,pe.Abbreviated,et.Standalone);break;case"LLLL":e=_e(2,pe.Wide,et.Standalone);break;case"LLLLL":e=_e(2,pe.Narrow,et.Standalone);break;case"w":e=Ep(1);break;case"ww":e=Ep(2);break;case"W":e=Ep(1,!0);break;case"d":e=xe(2,1);break;case"dd":e=xe(2,2);break;case"c":case"cc":e=xe(7,1);break;case"ccc":e=_e(1,pe.Abbreviated,et.Standalone);break;case"cccc":e=_e(1,pe.Wide,et.Standalone);break;case"ccccc":e=_e(1,pe.Narrow,et.Standalone);break;case"cccccc":e=_e(1,pe.Short,et.Standalone);break;case"E":case"EE":case"EEE":e=_e(1,pe.Abbreviated);break;case"EEEE":e=_e(1,pe.Wide);break;case"EEEEE":e=_e(1,pe.Narrow);break;case"EEEEEE":e=_e(1,pe.Short);break;case"a":case"aa":case"aaa":e=_e(0,pe.Abbreviated);break;case"aaaa":e=_e(0,pe.Wide);break;case"aaaaa":e=_e(0,pe.Narrow);break;case"b":case"bb":case"bbb":e=_e(0,pe.Abbreviated,et.Standalone,!0);break;case"bbbb":e=_e(0,pe.Wide,et.Standalone,!0);break;case"bbbbb":e=_e(0,pe.Narrow,et.Standalone,!0);break;case"B":case"BB":case"BBB":e=_e(0,pe.Abbreviated,et.Format,!0);break;case"BBBB":e=_e(0,pe.Wide,et.Format,!0);break;case"BBBBB":e=_e(0,pe.Narrow,et.Format,!0);break;case"h":e=xe(3,1,-12);break;case"hh":e=xe(3,2,-12);break;case"H":e=xe(3,1);break;case"HH":e=xe(3,2);break;case"m":e=xe(4,1);break;case"mm":e=xe(4,2);break;case"s":e=xe(5,1);break;case"ss":e=xe(5,2);break;case"S":e=xe(6,1);break;case"SS":e=xe(6,2);break;case"SSS":e=xe(6,3);break;case"Z":case"ZZ":case"ZZZ":e=vu(0);break;case"ZZZZZ":e=vu(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=vu(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=vu(2);break;default:return null}return wp[t]=e,e}function TT(t,e){t=t.replace(/:/g,"");let n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function rO(t,e){return t=new Date(t.getTime()),t.setMinutes(t.getMinutes()+e),t}function iO(t,e,n){let i=t.getTimezoneOffset(),s=TT(e,i);return rO(t,-1*(s-i))}function sO(t){if(oT(t))return t;if(typeof t=="number"&&!isNaN(t))return new Date(t);if(typeof t=="string"){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){let[i,s=1,o=1]=t.split("-").map(a=>+a);return wu(i,s-1,o)}let n=parseFloat(t);if(!isNaN(t-n))return new Date(n);let r;if(r=t.match(Qk))return oO(r)}let e=new Date(t);if(!oT(e))throw new Error(`Unable to convert "${t}" into a date`);return e}function oO(t){let e=new Date(0),n=0,r=0,i=t[8]?e.setUTCFullYear:e.setFullYear,s=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));let o=Number(t[4]||0)-n,a=Number(t[5]||0)-r,u=Number(t[6]||0),l=Math.floor(parseFloat("0."+(t[7]||0))*1e3);return s.call(e,o,a,u,l),e}function oT(t){return t instanceof Date&&!isNaN(t.valueOf())}var aO=/^(\d+)?\.((\d+)(-(\d+))?)?$/,aT=22,Tu=".",Do="0",cO=";",uO=",",Tp="#";function lO(t,e,n,r,i,s,o=!1){let a="",u=!1;if(!isFinite(t))a=sn(n,yt.Infinity);else{let l=fO(t);o&&(l=hO(l));let h=e.minInt,p=e.minFrac,g=e.maxFrac;if(s){let L=s.match(aO);if(L===null)throw new Error(`${s} is not a valid digit info`);let V=L[1],H=L[3],Te=L[5];V!=null&&(h=bp(V)),H!=null&&(p=bp(H)),Te!=null?g=bp(Te):H!=null&&p>g&&(g=p)}pO(l,p,g);let m=l.digits,w=l.integerLen,N=l.exponent,R=[];for(u=m.every(L=>!L);w<h;w++)m.unshift(0);for(;w<0;w++)m.unshift(0);w>0?R=m.splice(w,m.length):(R=m,m=[0]);let O=[];for(m.length>=e.lgSize&&O.unshift(m.splice(-e.lgSize,m.length).join(""));m.length>e.gSize;)O.unshift(m.splice(-e.gSize,m.length).join(""));m.length&&O.unshift(m.join("")),a=O.join(sn(n,r)),R.length&&(a+=sn(n,i)+R.join("")),N&&(a+=sn(n,yt.Exponential)+"+"+N)}return t<0&&!u?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function bT(t,e,n){let r=yT(e,Ap.Decimal),i=dO(r,sn(e,yt.MinusSign));return lO(t,i,e,yt.Group,yt.Decimal,n)}function dO(t,e="-"){let n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=t.split(cO),i=r[0],s=r[1],o=i.indexOf(Tu)!==-1?i.split(Tu):[i.substring(0,i.lastIndexOf(Do)+1),i.substring(i.lastIndexOf(Do)+1)],a=o[0],u=o[1]||"";n.posPre=a.substring(0,a.indexOf(Tp));for(let h=0;h<u.length;h++){let p=u.charAt(h);p===Do?n.minFrac=n.maxFrac=h+1:p===Tp?n.maxFrac=h+1:n.posSuf+=p}let l=a.split(uO);if(n.gSize=l[1]?l[1].length:0,n.lgSize=l[2]||l[1]?(l[2]||l[1]).length:0,s){let h=i.length-n.posPre.length-n.posSuf.length,p=s.indexOf(Tp);n.negPre=s.substring(0,p).replace(/'/g,""),n.negSuf=s.slice(p+h).replace(/'/g,"")}else n.negPre=e+n.posPre,n.negSuf=n.posSuf;return n}function hO(t){if(t.digits[0]===0)return t;let e=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(e===0?t.digits.push(0,0):e===1&&t.digits.push(0),t.integerLen+=2),t}function fO(t){let e=Math.abs(t)+"",n=0,r,i,s,o,a;for((i=e.indexOf(Tu))>-1&&(e=e.replace(Tu,"")),(s=e.search(/e/i))>0?(i<0&&(i=s),i+=+e.slice(s+1),e=e.substring(0,s)):i<0&&(i=e.length),s=0;e.charAt(s)===Do;s++);if(s===(a=e.length))r=[0],i=1;else{for(a--;e.charAt(a)===Do;)a--;for(i-=s,r=[],o=0;s<=a;s++,o++)r[o]=Number(e.charAt(s))}return i>aT&&(r=r.splice(0,aT-1),n=i-1,i=1),{digits:r,exponent:n,integerLen:i}}function pO(t,e,n){if(e>n)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${n}).`);let r=t.digits,i=r.length-t.integerLen,s=Math.min(Math.max(e,i),n),o=s+t.integerLen,a=r[o];if(o>0){r.splice(Math.max(t.integerLen,o));for(let p=o;p<r.length;p++)r[p]=0}else{i=Math.max(0,i),t.integerLen=1,r.length=Math.max(1,o=s+1),r[0]=0;for(let p=1;p<o;p++)r[p]=0}if(a>=5)if(o-1<0){for(let p=0;p>o;p--)r.unshift(0),t.integerLen++;r.unshift(1),t.integerLen++}else r[o-1]++;for(;i<Math.max(0,s);i++)r.push(0);let u=s!==0,l=e+t.integerLen,h=r.reduceRight(function(p,g,m,w){return g=g+p,w[m]=g<10?g:g-10,u&&(w[m]===0&&m>=l?w.pop():u=!1),g>=10?1:0},0);h&&(r.unshift(h),t.integerLen++)}function bp(t){let e=parseInt(t);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+t);return e}var Dp=/\s+/,cT=[],gO=(()=>{class t{_ngEl;_renderer;initialClasses=cT;rawClass;stateMap=new Map;constructor(n,r){this._ngEl=n,this._renderer=r}set klass(n){this.initialClasses=n!=null?n.trim().split(Dp):cT}set ngClass(n){this.rawClass=typeof n=="string"?n.trim().split(Dp):n}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let n=this.rawClass;if(Array.isArray(n)||n instanceof Set)for(let r of n)this._updateState(r,!0);else if(n!=null)for(let r of Object.keys(n))this._updateState(r,!!n[r]);this._applyStateDiff()}_updateState(n,r){let i=this.stateMap.get(n);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(n,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let n of this.stateMap){let r=n[0],i=n[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(n,r){n=n.trim(),n.length>0&&n.split(Dp).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||t)(je(Wr),je(sp))};static \u0275dir=lu({type:t,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return t})();var bu=class{$implicit;ngForOf;index;count;constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},DT=(()=>{class t{_viewContainer;_template;_differs;set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){let n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){let r=this._viewContainer;n.forEachOperation((i,s,o)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new bu(i.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)r.remove(s===null?void 0:s);else if(s!==null){let a=r.get(s);r.move(a,o),uT(a,i)}});for(let i=0,s=r.length;i<s;i++){let a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{let s=r.get(i.currentIndex);uT(s,i)})}static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||t)(je(zi),je(qr),je(gp))};static \u0275dir=lu({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return t})();function uT(t,e){t.context.$implicit=e.item}var mO=(()=>{class t{_viewContainer;_context=new Du;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(n,r){this._viewContainer=n,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){lT(n,!1),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){lT(n,!1),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||t)(je(zi),je(qr))};static \u0275dir=lu({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return t})(),Du=class{$implicit=null;ngIf=null};function lT(t,e){if(t&&!t.createEmbeddedView)throw new Q(2020,!1)}function Co(t,e){return new Q(2100,!1)}var Cp=class{createSubscription(e,n){return yp(()=>e.subscribe({next:n,error:r=>{throw r}}))}dispose(e){yp(()=>e.unsubscribe())}},Sp=class{createSubscription(e,n){return e.then(r=>n?.(r),r=>{throw r}),{unsubscribe:()=>{n=null}}}dispose(e){e.unsubscribe()}},yO=new Sp,_O=new Cp,vO=(()=>{class t{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;constructor(n){this._ref=n}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(n){if(!this._obj){if(n)try{this.markForCheckOnValueUpdate=!1,this._subscribe(n)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return n!==this._obj?(this._dispose(),this.transform(n)):this._latestValue}_subscribe(n){this._obj=n,this._strategy=this._selectStrategy(n),this._subscription=this._strategy.createSubscription(n,r=>this._updateLatestValue(n,r))}_selectStrategy(n){if(hu(n))return yO;if(lp(n))return _O;throw Co(t,n)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(n,r){n===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||t)(je(pp,16))};static \u0275pipe=Kr({name:"async",type:t,pure:!1})}return t})();var IO=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g,EO=(()=>{class t{transform(n){if(n==null)return null;if(typeof n!="string")throw Co(t,n);return n.replace(IO,r=>r[0].toUpperCase()+r.slice(1).toLowerCase())}static \u0275fac=function(r){return new(r||t)};static \u0275pipe=Kr({name:"titlecase",type:t,pure:!0})}return t})();var wO="mediumDate",CT=new se(""),ST=new se(""),TO=(()=>{class t{locale;defaultTimezone;defaultOptions;constructor(n,r,i){this.locale=n,this.defaultTimezone=r,this.defaultOptions=i}transform(n,r,i,s){if(n==null||n===""||n!==n)return null;try{let o=r??this.defaultOptions?.dateFormat??wO,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return ET(n,o,s||this.locale,a)}catch(o){throw Co(t,o.message)}}static \u0275fac=function(r){return new(r||t)(je(vo,16),je(CT,24),je(ST,24))};static \u0275pipe=Kr({name:"date",type:t,pure:!0})}return t})();function bO(t,e){return{key:t,value:e}}var DO=(()=>{class t{differs;constructor(n){this.differs=n}differ;keyValues=[];compareFn=dT;transform(n,r=dT){if(!n||!(n instanceof Map)&&typeof n!="object")return null;this.differ??=this.differs.find(n).create();let i=this.differ.diff(n),s=r!==this.compareFn;return i&&(this.keyValues=[],i.forEachItem(o=>{this.keyValues.push(bO(o.key,o.currentValue))})),(i||s)&&(r&&this.keyValues.sort(r),this.compareFn=r),this.keyValues}static \u0275fac=function(r){return new(r||t)(je(mp,16))};static \u0275pipe=Kr({name:"keyvalue",type:t,pure:!1})}return t})();function dT(t,e){let n=t.key,r=e.key;if(n===r)return 0;if(n==null)return 1;if(r==null)return-1;if(typeof n=="string"&&typeof r=="string")return n<r?-1:1;if(typeof n=="number"&&typeof r=="number")return n-r;if(typeof n=="boolean"&&typeof r=="boolean")return n<r?-1:1;let i=String(n),s=String(r);return i==s?0:i<s?-1:1}var CO=(()=>{class t{_locale;constructor(n){this._locale=n}transform(n,r,i){if(!SO(n))return null;i||=this._locale;try{let s=AO(n);return bT(s,i,r)}catch(s){throw Co(t,s.message)}}static \u0275fac=function(r){return new(r||t)(je(vo,16))};static \u0275pipe=Kr({name:"number",type:t,pure:!0})}return t})();function SO(t){return!(t==null||t===""||t!==t)}function AO(t){if(typeof t=="string"&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if(typeof t!="number")throw new Error(`${t} is not a number`);return t}var RO=(()=>{class t{transform(n,r,i){if(n==null)return null;if(!(typeof n=="string"||Array.isArray(n)))throw Co(t,n);return n.slice(r,i)}static \u0275fac=function(r){return new(r||t)};static \u0275pipe=Kr({name:"slice",type:t,pure:!1})}return t})();var NO=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Nw({type:t});static \u0275inj=xI({})}return t})();function PO(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var MO="browser",AT="server";function xO(t){return t===AT}var Rp=class{};var l9=(()=>{class t{static \u0275prov=he({token:t,providedIn:"root",factory:()=>new Np(K(Io),window)})}return t})(),Np=class{document;window;offset=()=>[0,0];constructor(e,n){this.document=e,this.window=n}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let n=kO(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}};function kO(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}var Cu=(s=>(s.INITIAL="initial",s.SYSTEM_TASK="system-task",s.TECHNICAL="technical",s.MANAGER="manager",s.HR="hr",s))(Cu||{});var RT=()=>{};var MT=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},OO=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],a=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},xT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,h=s>>2,p=(s&3)<<4|a>>4,g=(a&15)<<2|l>>6,m=l&63;u||(m=64,o||(g=64)),r.push(n[h],n[p],n[g],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(MT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):OO(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||l==null||p==null)throw new Mp;let g=s<<2|a>>4;if(r.push(g),l!==64){let m=a<<4&240|l>>2;if(r.push(m),p!==64){let w=l<<6&192|p;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Mp=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},FO=function(t){let e=MT(t);return xT.encodeByteArray(e,!0)},Ao=function(t){return FO(t).replace(/\./g,"")},Au=function(t){try{return xT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function kT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var LO=()=>kT().__FIREBASE_DEFAULTS__,VO=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},UO=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Au(t[1]);return e&&JSON.parse(e)},Ru=()=>{try{return RT()||LO()||VO()||UO()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},kp=t=>{var e,n;return(n=(e=Ru())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Nu=t=>{let e=kp(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Op=()=>{var t;return(t=Ru())===null||t===void 0?void 0:t.config},Fp=t=>{var e;return(e=Ru())===null||e===void 0?void 0:e[`_${t}`]};var Su=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function Ht(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}function Wi(t){return _(this,null,function*(){return(yield fetch(t,{credentials:"include"})).ok})}function Pu(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ao(JSON.stringify(n)),Ao(JSON.stringify(o)),""].join(".")}var So={};function jO(){let t={prod:[],emulator:[]};for(let e of Object.keys(So))So[e]?t.emulator.push(e):t.prod.push(e);return t}function BO(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}var NT=!1;function Ki(t,e){if(typeof window>"u"||typeof document>"u"||!Ht(window.location.host)||So[t]===e||So[t]||NT)return;So[t]=e;function n(g){return`__firebase__banner__${g}`}let r="__firebase__banner",s=jO().prod.length>0;function o(){let g=document.getElementById(r);g&&g.remove()}function a(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,m){g.setAttribute("width","24"),g.setAttribute("id",m),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function l(){let g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{NT=!0,o()},g}function h(g,m){g.setAttribute("id",m),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){let g=BO(r),m=n("text"),w=document.getElementById(m)||document.createElement("span"),N=n("learnmore"),R=document.getElementById(N)||document.createElement("a"),O=n("preprendIcon"),L=document.getElementById(O)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){let V=g.element;a(V),h(R,N);let H=l();u(L,O),V.append(L,w,R,H),document.body.appendChild(V)}s?(w.innerText="Preview backend disconnected.",L.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(L.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function Be(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function OT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Be())}function HO(){var t;let e=(t=Ru())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function FT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function LT(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function VT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function UT(){let t=Be();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function jT(){return!HO()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Lp(){try{return typeof indexedDB=="object"}catch{return!1}}function BT(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var $O="FirebaseError",lt=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=$O,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Nn.prototype.create)}},Nn=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?qO(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new lt(i,a,r)}};function qO(t,e){return t.replace(zO,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var zO=/\{\$([^}]+)}/g;function HT(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function on(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if(PT(s)&&PT(o)){if(!on(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function PT(t){return t!==null&&typeof t=="object"}function Ro(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Qi(t){let e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Yi(t){let e=t.indexOf("?");if(!e)return"";let n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function $T(t,e){let n=new xp(t,e);return n.subscribe.bind(n)}var xp=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");GO(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Pp),i.error===void 0&&(i.error=Pp),i.complete===void 0&&(i.complete=Pp);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function GO(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Pp(){}var v9=4*60*60*1e3;function Ie(t){return t&&t._delegate?t._delegate:t}var _t=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Yr="[DEFAULT]";var Vp=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new Su;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(KO(e))try{this.getOrInitializeService({instanceIdentifier:Yr})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Yr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return _(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Yr){return this.instances.has(e)}getOptions(e=Yr){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:WO(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Yr){return this.component?this.component.multipleInstances?e:Yr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function WO(t){return t===Yr?void 0:t}function KO(t){return t.instantiationMode==="EAGER"}var Mu=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new Vp(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var QO=[],ee=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(ee||{}),YO={debug:ee.DEBUG,verbose:ee.VERBOSE,info:ee.INFO,warn:ee.WARN,error:ee.ERROR,silent:ee.SILENT},JO=ee.INFO,ZO={[ee.DEBUG]:"log",[ee.VERBOSE]:"log",[ee.INFO]:"info",[ee.WARN]:"warn",[ee.ERROR]:"error"},XO=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=ZO[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},nr=class{constructor(e){this.name=e,this._logLevel=JO,this._logHandler=XO,this._userLogHandler=null,QO.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ee))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?YO[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ee.DEBUG,...e),this._logHandler(this,ee.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ee.VERBOSE,...e),this._logHandler(this,ee.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ee.INFO,...e),this._logHandler(this,ee.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ee.WARN,...e),this._logHandler(this,ee.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ee.ERROR,...e),this._logHandler(this,ee.ERROR,...e)}};var e1=(t,e)=>e.some(n=>t instanceof n),qT,zT;function t1(){return qT||(qT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function n1(){return zT||(zT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var GT=new WeakMap,jp=new WeakMap,WT=new WeakMap,Up=new WeakMap,Hp=new WeakMap;function r1(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(an(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&GT.set(n,t)}).catch(()=>{}),Hp.set(e,t),e}function i1(t){if(jp.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});jp.set(t,e)}var Bp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return jp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||WT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return an(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function KT(t){Bp=t(Bp)}function s1(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(xu(this),e,...n);return WT.set(r,e.sort?e.sort():[e]),an(r)}:n1().includes(t)?function(...e){return t.apply(xu(this),e),an(GT.get(this))}:function(...e){return an(t.apply(xu(this),e))}}function o1(t){return typeof t=="function"?s1(t):(t instanceof IDBTransaction&&i1(t),e1(t,t1())?new Proxy(t,Bp):t)}function an(t){if(t instanceof IDBRequest)return r1(t);if(Up.has(t))return Up.get(t);let e=o1(t);return e!==t&&(Up.set(t,e),Hp.set(e,t)),e}var xu=t=>Hp.get(t);function YT(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),a=an(o);return r&&o.addEventListener("upgradeneeded",u=>{r(an(o.result),u.oldVersion,u.newVersion,an(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var a1=["get","getKey","getAll","getAllKeys","count"],c1=["put","add","delete","clear"],$p=new Map;function QT(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if($p.get(e))return $p.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=c1.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||a1.includes(n)))return;let s=function(o,...a){return _(this,null,function*(){let u=this.transaction(o,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&u.done]))[0]})};return $p.set(e,s),s}KT(t=>De(ie({},t),{get:(e,n,r)=>QT(e,n)||t.get(e,n,r),has:(e,n)=>!!QT(e,n)||t.has(e,n)}));var zp=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(u1(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function u1(t){let e=t.getComponent();return e?.type==="VERSION"}var Gp="@firebase/app",JT="0.13.2";var Pn=new nr("@firebase/app"),l1="@firebase/app-compat",d1="@firebase/analytics-compat",h1="@firebase/analytics",f1="@firebase/app-check-compat",p1="@firebase/app-check",g1="@firebase/auth",m1="@firebase/auth-compat",y1="@firebase/database",_1="@firebase/data-connect",v1="@firebase/database-compat",I1="@firebase/functions",E1="@firebase/functions-compat",w1="@firebase/installations",T1="@firebase/installations-compat",b1="@firebase/messaging",D1="@firebase/messaging-compat",C1="@firebase/performance",S1="@firebase/performance-compat",A1="@firebase/remote-config",R1="@firebase/remote-config-compat",N1="@firebase/storage",P1="@firebase/storage-compat",M1="@firebase/firestore",x1="@firebase/ai",k1="@firebase/firestore-compat",O1="firebase",F1="11.10.0";var Wp="[DEFAULT]",L1={[Gp]:"fire-core",[l1]:"fire-core-compat",[h1]:"fire-analytics",[d1]:"fire-analytics-compat",[p1]:"fire-app-check",[f1]:"fire-app-check-compat",[g1]:"fire-auth",[m1]:"fire-auth-compat",[y1]:"fire-rtdb",[_1]:"fire-data-connect",[v1]:"fire-rtdb-compat",[I1]:"fire-fn",[E1]:"fire-fn-compat",[w1]:"fire-iid",[T1]:"fire-iid-compat",[b1]:"fire-fcm",[D1]:"fire-fcm-compat",[C1]:"fire-perf",[S1]:"fire-perf-compat",[A1]:"fire-rc",[R1]:"fire-rc-compat",[N1]:"fire-gcs",[P1]:"fire-gcs-compat",[M1]:"fire-fst",[k1]:"fire-fst-compat",[x1]:"fire-vertex","fire-js":"fire-js",[O1]:"fire-js-all"};var ku=new Map,V1=new Map,Kp=new Map;function ZT(t,e){try{t.container.addComponent(e)}catch(n){Pn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function cn(t){let e=t.name;if(Kp.has(e))return Pn.debug(`There were multiple attempts to register component ${e}.`),!1;Kp.set(e,t);for(let n of ku.values())ZT(n,t);for(let n of V1.values())ZT(n,t);return!0}function Jr(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function tt(t){return t==null?!1:t.settings!==void 0}var U1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},rr=new Nn("app","Firebase",U1);var Qp=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new _t("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw rr.create("app-deleted",{appName:this._name})}};var un=F1;function Zp(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Wp,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw rr.create("bad-app-name",{appName:String(i)});if(n||(n=Op()),!n)throw rr.create("no-options");let s=ku.get(i);if(s){if(on(n,s.options)&&on(r,s.config))return s;throw rr.create("duplicate-app",{appName:i})}let o=new Mu(i);for(let u of Kp.values())o.addComponent(u);let a=new Qp(n,r,o);return ku.set(i,a),a}function Ji(t=Wp){let e=ku.get(t);if(!e&&t===Wp&&Op())return Zp();if(!e)throw rr.create("no-app",{appName:t});return e}function vt(t,e,n){var r;let i=(r=L1[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Pn.warn(a.join(" "));return}cn(new _t(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var j1="firebase-heartbeat-database",B1=1,No="firebase-heartbeat-store",qp=null;function nb(){return qp||(qp=YT(j1,B1,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(No)}catch(n){console.warn(n)}}}}).catch(t=>{throw rr.create("idb-open",{originalErrorMessage:t.message})})),qp}function H1(t){return _(this,null,function*(){try{let n=(yield nb()).transaction(No),r=yield n.objectStore(No).get(rb(t));return yield n.done,r}catch(e){if(e instanceof lt)Pn.warn(e.message);else{let n=rr.create("idb-get",{originalErrorMessage:e?.message});Pn.warn(n.message)}}})}function XT(t,e){return _(this,null,function*(){try{let r=(yield nb()).transaction(No,"readwrite");yield r.objectStore(No).put(e,rb(t)),yield r.done}catch(n){if(n instanceof lt)Pn.warn(n.message);else{let r=rr.create("idb-set",{originalErrorMessage:n?.message});Pn.warn(r.message)}}})}function rb(t){return`${t.name}!${t.options.appId}`}var $1=1024,q1=30,Yp=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new Jp(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return _(this,null,function*(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=eb();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>q1){let o=G1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Pn.warn(r)}})}getHeartbeatsHeader(){return _(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=eb(),{heartbeatsToSend:r,unsentEntries:i}=z1(this._heartbeatsCache.heartbeats),s=Ao(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Pn.warn(n),""}})}};function eb(){return new Date().toISOString().substring(0,10)}function z1(t,e=$1){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),tb(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),tb(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var Jp=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return _(this,null,function*(){return Lp()?BT().then(()=>!0).catch(()=>!1):!1})}read(){return _(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield H1(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return _(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return XT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return _(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return XT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function tb(t){return Ao(JSON.stringify({version:2,heartbeats:t})).length}function G1(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function W1(t){cn(new _t("platform-logger",e=>new zp(e),"PRIVATE")),cn(new _t("heartbeat",e=>new Yp(e),"PRIVATE")),vt(Gp,JT,t),vt(Gp,JT,"esm2017"),vt("fire-js","")}W1("");var K1="firebase",Q1="11.10.0";vt(K1,Q1,"app");var ib=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},sb={};var Mn,Xp;(function(){var t;function e(b,v){function E(){}E.prototype=v.prototype,b.D=v.prototype,b.prototype=new E,b.prototype.constructor=b,b.C=function(T,D,S){for(var I=Array(arguments.length-2),vn=2;vn<arguments.length;vn++)I[vn-2]=arguments[vn];return v.prototype[D].apply(T,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(b,v,E){E||(E=0);var T=Array(16);if(typeof v=="string")for(var D=0;16>D;++D)T[D]=v.charCodeAt(E++)|v.charCodeAt(E++)<<8|v.charCodeAt(E++)<<16|v.charCodeAt(E++)<<24;else for(D=0;16>D;++D)T[D]=v[E++]|v[E++]<<8|v[E++]<<16|v[E++]<<24;v=b.g[0],E=b.g[1],D=b.g[2];var S=b.g[3],I=v+(S^E&(D^S))+T[0]+3614090360&4294967295;v=E+(I<<7&4294967295|I>>>25),I=S+(D^v&(E^D))+T[1]+3905402710&4294967295,S=v+(I<<12&4294967295|I>>>20),I=D+(E^S&(v^E))+T[2]+606105819&4294967295,D=S+(I<<17&4294967295|I>>>15),I=E+(v^D&(S^v))+T[3]+3250441966&4294967295,E=D+(I<<22&4294967295|I>>>10),I=v+(S^E&(D^S))+T[4]+4118548399&4294967295,v=E+(I<<7&4294967295|I>>>25),I=S+(D^v&(E^D))+T[5]+1200080426&4294967295,S=v+(I<<12&4294967295|I>>>20),I=D+(E^S&(v^E))+T[6]+2821735955&4294967295,D=S+(I<<17&4294967295|I>>>15),I=E+(v^D&(S^v))+T[7]+4249261313&4294967295,E=D+(I<<22&4294967295|I>>>10),I=v+(S^E&(D^S))+T[8]+1770035416&4294967295,v=E+(I<<7&4294967295|I>>>25),I=S+(D^v&(E^D))+T[9]+2336552879&4294967295,S=v+(I<<12&4294967295|I>>>20),I=D+(E^S&(v^E))+T[10]+4294925233&4294967295,D=S+(I<<17&4294967295|I>>>15),I=E+(v^D&(S^v))+T[11]+2304563134&4294967295,E=D+(I<<22&4294967295|I>>>10),I=v+(S^E&(D^S))+T[12]+1804603682&4294967295,v=E+(I<<7&4294967295|I>>>25),I=S+(D^v&(E^D))+T[13]+4254626195&4294967295,S=v+(I<<12&4294967295|I>>>20),I=D+(E^S&(v^E))+T[14]+2792965006&4294967295,D=S+(I<<17&4294967295|I>>>15),I=E+(v^D&(S^v))+T[15]+1236535329&4294967295,E=D+(I<<22&4294967295|I>>>10),I=v+(D^S&(E^D))+T[1]+4129170786&4294967295,v=E+(I<<5&4294967295|I>>>27),I=S+(E^D&(v^E))+T[6]+3225465664&4294967295,S=v+(I<<9&4294967295|I>>>23),I=D+(v^E&(S^v))+T[11]+643717713&4294967295,D=S+(I<<14&4294967295|I>>>18),I=E+(S^v&(D^S))+T[0]+3921069994&4294967295,E=D+(I<<20&4294967295|I>>>12),I=v+(D^S&(E^D))+T[5]+3593408605&4294967295,v=E+(I<<5&4294967295|I>>>27),I=S+(E^D&(v^E))+T[10]+38016083&4294967295,S=v+(I<<9&4294967295|I>>>23),I=D+(v^E&(S^v))+T[15]+3634488961&4294967295,D=S+(I<<14&4294967295|I>>>18),I=E+(S^v&(D^S))+T[4]+3889429448&4294967295,E=D+(I<<20&4294967295|I>>>12),I=v+(D^S&(E^D))+T[9]+568446438&4294967295,v=E+(I<<5&4294967295|I>>>27),I=S+(E^D&(v^E))+T[14]+3275163606&4294967295,S=v+(I<<9&4294967295|I>>>23),I=D+(v^E&(S^v))+T[3]+4107603335&4294967295,D=S+(I<<14&4294967295|I>>>18),I=E+(S^v&(D^S))+T[8]+1163531501&4294967295,E=D+(I<<20&4294967295|I>>>12),I=v+(D^S&(E^D))+T[13]+2850285829&4294967295,v=E+(I<<5&4294967295|I>>>27),I=S+(E^D&(v^E))+T[2]+4243563512&4294967295,S=v+(I<<9&4294967295|I>>>23),I=D+(v^E&(S^v))+T[7]+1735328473&4294967295,D=S+(I<<14&4294967295|I>>>18),I=E+(S^v&(D^S))+T[12]+2368359562&4294967295,E=D+(I<<20&4294967295|I>>>12),I=v+(E^D^S)+T[5]+4294588738&4294967295,v=E+(I<<4&4294967295|I>>>28),I=S+(v^E^D)+T[8]+2272392833&4294967295,S=v+(I<<11&4294967295|I>>>21),I=D+(S^v^E)+T[11]+1839030562&4294967295,D=S+(I<<16&4294967295|I>>>16),I=E+(D^S^v)+T[14]+4259657740&4294967295,E=D+(I<<23&4294967295|I>>>9),I=v+(E^D^S)+T[1]+2763975236&4294967295,v=E+(I<<4&4294967295|I>>>28),I=S+(v^E^D)+T[4]+1272893353&4294967295,S=v+(I<<11&4294967295|I>>>21),I=D+(S^v^E)+T[7]+4139469664&4294967295,D=S+(I<<16&4294967295|I>>>16),I=E+(D^S^v)+T[10]+3200236656&4294967295,E=D+(I<<23&4294967295|I>>>9),I=v+(E^D^S)+T[13]+681279174&4294967295,v=E+(I<<4&4294967295|I>>>28),I=S+(v^E^D)+T[0]+3936430074&4294967295,S=v+(I<<11&4294967295|I>>>21),I=D+(S^v^E)+T[3]+3572445317&4294967295,D=S+(I<<16&4294967295|I>>>16),I=E+(D^S^v)+T[6]+76029189&4294967295,E=D+(I<<23&4294967295|I>>>9),I=v+(E^D^S)+T[9]+3654602809&4294967295,v=E+(I<<4&4294967295|I>>>28),I=S+(v^E^D)+T[12]+3873151461&4294967295,S=v+(I<<11&4294967295|I>>>21),I=D+(S^v^E)+T[15]+530742520&4294967295,D=S+(I<<16&4294967295|I>>>16),I=E+(D^S^v)+T[2]+3299628645&4294967295,E=D+(I<<23&4294967295|I>>>9),I=v+(D^(E|~S))+T[0]+4096336452&4294967295,v=E+(I<<6&4294967295|I>>>26),I=S+(E^(v|~D))+T[7]+1126891415&4294967295,S=v+(I<<10&4294967295|I>>>22),I=D+(v^(S|~E))+T[14]+2878612391&4294967295,D=S+(I<<15&4294967295|I>>>17),I=E+(S^(D|~v))+T[5]+4237533241&4294967295,E=D+(I<<21&4294967295|I>>>11),I=v+(D^(E|~S))+T[12]+1700485571&4294967295,v=E+(I<<6&4294967295|I>>>26),I=S+(E^(v|~D))+T[3]+2399980690&4294967295,S=v+(I<<10&4294967295|I>>>22),I=D+(v^(S|~E))+T[10]+4293915773&4294967295,D=S+(I<<15&4294967295|I>>>17),I=E+(S^(D|~v))+T[1]+2240044497&4294967295,E=D+(I<<21&4294967295|I>>>11),I=v+(D^(E|~S))+T[8]+1873313359&4294967295,v=E+(I<<6&4294967295|I>>>26),I=S+(E^(v|~D))+T[15]+4264355552&4294967295,S=v+(I<<10&4294967295|I>>>22),I=D+(v^(S|~E))+T[6]+2734768916&4294967295,D=S+(I<<15&4294967295|I>>>17),I=E+(S^(D|~v))+T[13]+1309151649&4294967295,E=D+(I<<21&4294967295|I>>>11),I=v+(D^(E|~S))+T[4]+4149444226&4294967295,v=E+(I<<6&4294967295|I>>>26),I=S+(E^(v|~D))+T[11]+3174756917&4294967295,S=v+(I<<10&4294967295|I>>>22),I=D+(v^(S|~E))+T[2]+718787259&4294967295,D=S+(I<<15&4294967295|I>>>17),I=E+(S^(D|~v))+T[9]+3951481745&4294967295,b.g[0]=b.g[0]+v&4294967295,b.g[1]=b.g[1]+(D+(I<<21&4294967295|I>>>11))&4294967295,b.g[2]=b.g[2]+D&4294967295,b.g[3]=b.g[3]+S&4294967295}r.prototype.u=function(b,v){v===void 0&&(v=b.length);for(var E=v-this.blockSize,T=this.B,D=this.h,S=0;S<v;){if(D==0)for(;S<=E;)i(this,b,S),S+=this.blockSize;if(typeof b=="string"){for(;S<v;)if(T[D++]=b.charCodeAt(S++),D==this.blockSize){i(this,T),D=0;break}}else for(;S<v;)if(T[D++]=b[S++],D==this.blockSize){i(this,T),D=0;break}}this.h=D,this.o+=v},r.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var v=1;v<b.length-8;++v)b[v]=0;var E=8*this.o;for(v=b.length-8;v<b.length;++v)b[v]=E&255,E/=256;for(this.u(b),b=Array(16),v=E=0;4>v;++v)for(var T=0;32>T;T+=8)b[E++]=this.g[v]>>>T&255;return b};function s(b,v){var E=a;return Object.prototype.hasOwnProperty.call(E,b)?E[b]:E[b]=v(b)}function o(b,v){this.h=v;for(var E=[],T=!0,D=b.length-1;0<=D;D--){var S=b[D]|0;T&&S==v||(E[D]=S,T=!1)}this.g=E}var a={};function u(b){return-128<=b&&128>b?s(b,function(v){return new o([v|0],0>v?-1:0)}):new o([b|0],0>b?-1:0)}function l(b){if(isNaN(b)||!isFinite(b))return p;if(0>b)return R(l(-b));for(var v=[],E=1,T=0;b>=E;T++)v[T]=b/E|0,E*=4294967296;return new o(v,0)}function h(b,v){if(b.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(b.charAt(0)=="-")return R(h(b.substring(1),v));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=l(Math.pow(v,8)),T=p,D=0;D<b.length;D+=8){var S=Math.min(8,b.length-D),I=parseInt(b.substring(D,D+S),v);8>S?(S=l(Math.pow(v,S)),T=T.j(S).add(l(I))):(T=T.j(E),T=T.add(l(I)))}return T}var p=u(0),g=u(1),m=u(16777216);t=o.prototype,t.m=function(){if(N(this))return-R(this).m();for(var b=0,v=1,E=0;E<this.g.length;E++){var T=this.i(E);b+=(0<=T?T:4294967296+T)*v,v*=4294967296}return b},t.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(w(this))return"0";if(N(this))return"-"+R(this).toString(b);for(var v=l(Math.pow(b,6)),E=this,T="";;){var D=H(E,v).g;E=O(E,D.j(v));var S=((0<E.g.length?E.g[0]:E.h)>>>0).toString(b);if(E=D,w(E))return S+T;for(;6>S.length;)S="0"+S;T=S+T}},t.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function w(b){if(b.h!=0)return!1;for(var v=0;v<b.g.length;v++)if(b.g[v]!=0)return!1;return!0}function N(b){return b.h==-1}t.l=function(b){return b=O(this,b),N(b)?-1:w(b)?0:1};function R(b){for(var v=b.g.length,E=[],T=0;T<v;T++)E[T]=~b.g[T];return new o(E,~b.h).add(g)}t.abs=function(){return N(this)?R(this):this},t.add=function(b){for(var v=Math.max(this.g.length,b.g.length),E=[],T=0,D=0;D<=v;D++){var S=T+(this.i(D)&65535)+(b.i(D)&65535),I=(S>>>16)+(this.i(D)>>>16)+(b.i(D)>>>16);T=I>>>16,S&=65535,I&=65535,E[D]=I<<16|S}return new o(E,E[E.length-1]&-2147483648?-1:0)};function O(b,v){return b.add(R(v))}t.j=function(b){if(w(this)||w(b))return p;if(N(this))return N(b)?R(this).j(R(b)):R(R(this).j(b));if(N(b))return R(this.j(R(b)));if(0>this.l(m)&&0>b.l(m))return l(this.m()*b.m());for(var v=this.g.length+b.g.length,E=[],T=0;T<2*v;T++)E[T]=0;for(T=0;T<this.g.length;T++)for(var D=0;D<b.g.length;D++){var S=this.i(T)>>>16,I=this.i(T)&65535,vn=b.i(D)>>>16,As=b.i(D)&65535;E[2*T+2*D]+=I*As,L(E,2*T+2*D),E[2*T+2*D+1]+=S*As,L(E,2*T+2*D+1),E[2*T+2*D+1]+=I*vn,L(E,2*T+2*D+1),E[2*T+2*D+2]+=S*vn,L(E,2*T+2*D+2)}for(T=0;T<v;T++)E[T]=E[2*T+1]<<16|E[2*T];for(T=v;T<2*v;T++)E[T]=0;return new o(E,0)};function L(b,v){for(;(b[v]&65535)!=b[v];)b[v+1]+=b[v]>>>16,b[v]&=65535,v++}function V(b,v){this.g=b,this.h=v}function H(b,v){if(w(v))throw Error("division by zero");if(w(b))return new V(p,p);if(N(b))return v=H(R(b),v),new V(R(v.g),R(v.h));if(N(v))return v=H(b,R(v)),new V(R(v.g),v.h);if(30<b.g.length){if(N(b)||N(v))throw Error("slowDivide_ only works with positive integers.");for(var E=g,T=v;0>=T.l(b);)E=Te(E),T=Te(T);var D=ce(E,1),S=ce(T,1);for(T=ce(T,2),E=ce(E,2);!w(T);){var I=S.add(T);0>=I.l(b)&&(D=D.add(E),S=I),T=ce(T,1),E=ce(E,1)}return v=O(b,D.j(v)),new V(D,v)}for(D=p;0<=b.l(v);){for(E=Math.max(1,Math.floor(b.m()/v.m())),T=Math.ceil(Math.log(E)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),S=l(E),I=S.j(v);N(I)||0<I.l(b);)E-=T,S=l(E),I=S.j(v);w(S)&&(S=g),D=D.add(S),b=O(b,I)}return new V(D,b)}t.A=function(b){return H(this,b).h},t.and=function(b){for(var v=Math.max(this.g.length,b.g.length),E=[],T=0;T<v;T++)E[T]=this.i(T)&b.i(T);return new o(E,this.h&b.h)},t.or=function(b){for(var v=Math.max(this.g.length,b.g.length),E=[],T=0;T<v;T++)E[T]=this.i(T)|b.i(T);return new o(E,this.h|b.h)},t.xor=function(b){for(var v=Math.max(this.g.length,b.g.length),E=[],T=0;T<v;T++)E[T]=this.i(T)^b.i(T);return new o(E,this.h^b.h)};function Te(b){for(var v=b.g.length+1,E=[],T=0;T<v;T++)E[T]=b.i(T)<<1|b.i(T-1)>>>31;return new o(E,b.h)}function ce(b,v){var E=v>>5;v%=32;for(var T=b.g.length-E,D=[],S=0;S<T;S++)D[S]=0<v?b.i(S+E)>>>v|b.i(S+E+1)<<32-v:b.i(S+E);return new o(D,b.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Xp=sb.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=h,Mn=sb.Integer=o}).apply(typeof ib<"u"?ib:typeof self<"u"?self:typeof window<"u"?window:{});var Ou=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},xn={};var eg,Y1,Zi,tg,Po,Fu,ng,rg,ig;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ou=="object"&&Ou];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var y=0;y<c.length-1;y++){var C=c[y];if(!(C in f))break e;f=f[C]}c=c[c.length-1],y=f[c],d=d(y),d!=y&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function s(c,d){c instanceof String&&(c+="");var f=0,y=!1,C={next:function(){if(!y&&f<c.length){var A=f++;return{value:d(A,c[A]),done:!1}}return y=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}i("Array.prototype.values",function(c){return c||function(){return s(this,function(d,f){return f})}});var o=o||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,y),c.apply(d,C)}}return function(){return c.apply(d,arguments)}}function g(c,d,f){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,g.apply(null,arguments)}function m(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var y=f.slice();return y.push.apply(y,arguments),c.apply(this,y)}}function w(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(y,C,A){for(var x=Array(arguments.length-2),me=2;me<arguments.length;me++)x[me-2]=arguments[me];return d.prototype[C].apply(y,x)}}function N(c){let d=c.length;if(0<d){let f=Array(d);for(let y=0;y<d;y++)f[y]=c[y];return f}return[]}function R(c,d){for(let f=1;f<arguments.length;f++){let y=arguments[f];if(u(y)){let C=c.length||0,A=y.length||0;c.length=C+A;for(let x=0;x<A;x++)c[C+x]=y[x]}else c.push(y)}}class O{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function L(c){return/^[\s\xa0]*$/.test(c)}function V(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function H(c){return H[" "](c),c}H[" "]=function(){};var Te=V().indexOf("Gecko")!=-1&&!(V().toLowerCase().indexOf("webkit")!=-1&&V().indexOf("Edge")==-1)&&!(V().indexOf("Trident")!=-1||V().indexOf("MSIE")!=-1)&&V().indexOf("Edge")==-1;function ce(c,d,f){for(let y in c)d.call(f,c[y],y,c)}function b(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function v(c){let d={};for(let f in c)d[f]=c[f];return d}let E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(c,d){let f,y;for(let C=1;C<arguments.length;C++){y=arguments[C];for(f in y)c[f]=y[f];for(let A=0;A<E.length;A++)f=E[A],Object.prototype.hasOwnProperty.call(y,f)&&(c[f]=y[f])}}function D(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function S(c){a.setTimeout(()=>{throw c},0)}function I(){var c=od;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class vn{constructor(){this.h=this.g=null}add(d,f){let y=As.get();y.set(d,f),this.h?this.h.next=y:this.g=y,this.h=y}}var As=new O(()=>new t0,c=>c.reset());class t0{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Rs,Ns=!1,od=new vn,s_=()=>{let c=a.Promise.resolve(void 0);Rs=()=>{c.then(n0)}};var n0=()=>{for(var c;c=I();){try{c.h.call(c.g)}catch(f){S(f)}var d=As;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}Ns=!1};function qn(){this.s=this.s,this.C=this.C}qn.prototype.s=!1,qn.prototype.ma=function(){this.s||(this.s=!0,this.N())},qn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ke(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}Ke.prototype.h=function(){this.defaultPrevented=!0};var r0=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function Ps(c,d){if(Ke.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,y=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(Te){e:{try{H(d.nodeName);var C=!0;break e}catch{}C=!1}C||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:i0[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Ps.aa.h.call(this)}}w(Ps,Ke);var i0={2:"touch",3:"pen",4:"mouse"};Ps.prototype.h=function(){Ps.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Ms="closure_listenable_"+(1e6*Math.random()|0),s0=0;function o0(c,d,f,y,C){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!y,this.ha=C,this.key=++s0,this.da=this.fa=!1}function fa(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function pa(c){this.src=c,this.g={},this.h=0}pa.prototype.add=function(c,d,f,y,C){var A=c.toString();c=this.g[A],c||(c=this.g[A]=[],this.h++);var x=cd(c,d,y,C);return-1<x?(d=c[x],f||(d.fa=!1)):(d=new o0(d,this.src,A,!!y,C),d.fa=f,c.push(d)),d};function ad(c,d){var f=d.type;if(f in c.g){var y=c.g[f],C=Array.prototype.indexOf.call(y,d,void 0),A;(A=0<=C)&&Array.prototype.splice.call(y,C,1),A&&(fa(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function cd(c,d,f,y){for(var C=0;C<c.length;++C){var A=c[C];if(!A.da&&A.listener==d&&A.capture==!!f&&A.ha==y)return C}return-1}var ud="closure_lm_"+(1e6*Math.random()|0),ld={};function o_(c,d,f,y,C){if(y&&y.once)return c_(c,d,f,y,C);if(Array.isArray(d)){for(var A=0;A<d.length;A++)o_(c,d[A],f,y,C);return null}return f=pd(f),c&&c[Ms]?c.K(d,f,l(y)?!!y.capture:!!y,C):a_(c,d,f,!1,y,C)}function a_(c,d,f,y,C,A){if(!d)throw Error("Invalid event type");var x=l(C)?!!C.capture:!!C,me=hd(c);if(me||(c[ud]=me=new pa(c)),f=me.add(d,f,y,x,A),f.proxy)return f;if(y=a0(),f.proxy=y,y.src=c,y.listener=f,c.addEventListener)r0||(C=x),C===void 0&&(C=!1),c.addEventListener(d.toString(),y,C);else if(c.attachEvent)c.attachEvent(l_(d.toString()),y);else if(c.addListener&&c.removeListener)c.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return f}function a0(){function c(f){return d.call(c.src,c.listener,f)}let d=c0;return c}function c_(c,d,f,y,C){if(Array.isArray(d)){for(var A=0;A<d.length;A++)c_(c,d[A],f,y,C);return null}return f=pd(f),c&&c[Ms]?c.L(d,f,l(y)?!!y.capture:!!y,C):a_(c,d,f,!0,y,C)}function u_(c,d,f,y,C){if(Array.isArray(d))for(var A=0;A<d.length;A++)u_(c,d[A],f,y,C);else y=l(y)?!!y.capture:!!y,f=pd(f),c&&c[Ms]?(c=c.i,d=String(d).toString(),d in c.g&&(A=c.g[d],f=cd(A,f,y,C),-1<f&&(fa(A[f]),Array.prototype.splice.call(A,f,1),A.length==0&&(delete c.g[d],c.h--)))):c&&(c=hd(c))&&(d=c.g[d.toString()],c=-1,d&&(c=cd(d,f,y,C)),(f=-1<c?d[c]:null)&&dd(f))}function dd(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[Ms])ad(d.i,c);else{var f=c.type,y=c.proxy;d.removeEventListener?d.removeEventListener(f,y,c.capture):d.detachEvent?d.detachEvent(l_(f),y):d.addListener&&d.removeListener&&d.removeListener(y),(f=hd(d))?(ad(f,c),f.h==0&&(f.src=null,d[ud]=null)):fa(c)}}}function l_(c){return c in ld?ld[c]:ld[c]="on"+c}function c0(c,d){if(c.da)c=!0;else{d=new Ps(d,this);var f=c.listener,y=c.ha||c.src;c.fa&&dd(c),c=f.call(y,d)}return c}function hd(c){return c=c[ud],c instanceof pa?c:null}var fd="__closure_events_fn_"+(1e9*Math.random()>>>0);function pd(c){return typeof c=="function"?c:(c[fd]||(c[fd]=function(d){return c.handleEvent(d)}),c[fd])}function Qe(){qn.call(this),this.i=new pa(this),this.M=this,this.F=null}w(Qe,qn),Qe.prototype[Ms]=!0,Qe.prototype.removeEventListener=function(c,d,f,y){u_(this,c,d,f,y)};function st(c,d){var f,y=c.F;if(y)for(f=[];y;y=y.F)f.push(y);if(c=c.M,y=d.type||d,typeof d=="string")d=new Ke(d,c);else if(d instanceof Ke)d.target=d.target||c;else{var C=d;d=new Ke(y,c),T(d,C)}if(C=!0,f)for(var A=f.length-1;0<=A;A--){var x=d.g=f[A];C=ga(x,y,!0,d)&&C}if(x=d.g=c,C=ga(x,y,!0,d)&&C,C=ga(x,y,!1,d)&&C,f)for(A=0;A<f.length;A++)x=d.g=f[A],C=ga(x,y,!1,d)&&C}Qe.prototype.N=function(){if(Qe.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],y=0;y<f.length;y++)fa(f[y]);delete c.g[d],c.h--}}this.F=null},Qe.prototype.K=function(c,d,f,y){return this.i.add(String(c),d,!1,f,y)},Qe.prototype.L=function(c,d,f,y){return this.i.add(String(c),d,!0,f,y)};function ga(c,d,f,y){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var C=!0,A=0;A<d.length;++A){var x=d[A];if(x&&!x.da&&x.capture==f){var me=x.listener,ze=x.ha||x.src;x.fa&&ad(c.i,x),C=me.call(ze,y)!==!1&&C}}return C&&!y.defaultPrevented}function d_(c,d,f){if(typeof c=="function")f&&(c=g(c,f));else if(c&&typeof c.handleEvent=="function")c=g(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function h_(c){c.g=d_(()=>{c.g=null,c.i&&(c.i=!1,h_(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class u0 extends qn{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:h_(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function xs(c){qn.call(this),this.h=c,this.g={}}w(xs,qn);var f_=[];function p_(c){ce(c.g,function(d,f){this.g.hasOwnProperty(f)&&dd(d)},c),c.g={}}xs.prototype.N=function(){xs.aa.N.call(this),p_(this)},xs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var gd=a.JSON.stringify,l0=a.JSON.parse,d0=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function md(){}md.prototype.h=null;function g_(c){return c.h||(c.h=c.i())}function m_(){}var ks={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function yd(){Ke.call(this,"d")}w(yd,Ke);function _d(){Ke.call(this,"c")}w(_d,Ke);var Er={},y_=null;function ma(){return y_=y_||new Qe}Er.La="serverreachability";function __(c){Ke.call(this,Er.La,c)}w(__,Ke);function Os(c){let d=ma();st(d,new __(d))}Er.STAT_EVENT="statevent";function v_(c,d){Ke.call(this,Er.STAT_EVENT,c),this.stat=d}w(v_,Ke);function ot(c){let d=ma();st(d,new v_(d,c))}Er.Ma="timingevent";function I_(c,d){Ke.call(this,Er.Ma,c),this.size=d}w(I_,Ke);function Fs(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function Ls(){this.g=!0}Ls.prototype.xa=function(){this.g=!1};function h0(c,d,f,y,C,A){c.info(function(){if(c.g)if(A)for(var x="",me=A.split("&"),ze=0;ze<me.length;ze++){var ue=me[ze].split("=");if(1<ue.length){var Ye=ue[0];ue=ue[1];var Je=Ye.split("_");x=2<=Je.length&&Je[1]=="type"?x+(Ye+"="+ue+"&"):x+(Ye+"=redacted&")}}else x=null;else x=A;return"XMLHTTP REQ ("+y+") [attempt "+C+"]: "+d+`
`+f+`
`+x})}function f0(c,d,f,y,C,A,x){c.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+C+"]: "+d+`
`+f+`
`+A+" "+x})}function gi(c,d,f,y){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+g0(c,f)+(y?" "+y:"")})}function p0(c,d){c.info(function(){return"TIMEOUT: "+d})}Ls.prototype.info=function(){};function g0(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var y=f[c];if(!(2>y.length)){var C=y[1];if(Array.isArray(C)&&!(1>C.length)){var A=C[0];if(A!="noop"&&A!="stop"&&A!="close")for(var x=1;x<C.length;x++)C[x]=""}}}}return gd(f)}catch{return d}}var ya={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},E_={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},vd;function _a(){}w(_a,md),_a.prototype.g=function(){return new XMLHttpRequest},_a.prototype.i=function(){return{}},vd=new _a;function zn(c,d,f,y){this.j=c,this.i=d,this.l=f,this.R=y||1,this.U=new xs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new w_}function w_(){this.i=null,this.g="",this.h=!1}var T_={},Id={};function Ed(c,d,f){c.L=1,c.v=wa(In(d)),c.m=f,c.P=!0,b_(c,null)}function b_(c,d){c.F=Date.now(),va(c),c.A=In(c.v);var f=c.A,y=c.R;Array.isArray(y)||(y=[String(y)]),V_(f.i,"t",y),c.C=0,f=c.j.J,c.h=new w_,c.g=nv(c.j,f?d:null,!c.m),0<c.O&&(c.M=new u0(g(c.Y,c,c.g),c.O)),d=c.U,f=c.g,y=c.ca;var C="readystatechange";Array.isArray(C)||(C&&(f_[0]=C.toString()),C=f_);for(var A=0;A<C.length;A++){var x=o_(f,C[A],y||d.handleEvent,!1,d.h||d);if(!x)break;d.g[x.key]=x}d=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),Os(),h0(c.i,c.u,c.A,c.l,c.R,c.m)}zn.prototype.ca=function(c){c=c.target;let d=this.M;d&&En(c)==3?d.j():this.Y(c)},zn.prototype.Y=function(c){try{if(c==this.g)e:{let Je=En(this.g);var d=this.g.Ba();let _i=this.g.Z();if(!(3>Je)&&(Je!=3||this.g&&(this.h.h||this.g.oa()||z_(this.g)))){this.J||Je!=4||d==7||(d==8||0>=_i?Os(3):Os(2)),wd(this);var f=this.g.Z();this.X=f;t:if(D_(this)){var y=z_(this.g);c="";var C=y.length,A=En(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){wr(this),Vs(this);var x="";break t}this.h.i=new a.TextDecoder}for(d=0;d<C;d++)this.h.h=!0,c+=this.h.i.decode(y[d],{stream:!(A&&d==C-1)});y.length=0,this.h.g+=c,this.C=0,x=this.h.g}else x=this.g.oa();if(this.o=f==200,f0(this.i,this.u,this.A,this.l,this.R,Je,f),this.o){if(this.T&&!this.K){t:{if(this.g){var me,ze=this.g;if((me=ze.g?ze.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!L(me)){var ue=me;break t}}ue=null}if(f=ue)gi(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Td(this,f);else{this.o=!1,this.s=3,ot(12),wr(this),Vs(this);break e}}if(this.P){f=!0;let Mt;for(;!this.J&&this.C<x.length;)if(Mt=m0(this,x),Mt==Id){Je==4&&(this.s=4,ot(14),f=!1),gi(this.i,this.l,null,"[Incomplete Response]");break}else if(Mt==T_){this.s=4,ot(15),gi(this.i,this.l,x,"[Invalid Chunk]"),f=!1;break}else gi(this.i,this.l,Mt,null),Td(this,Mt);if(D_(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Je!=4||x.length!=0||this.h.h||(this.s=1,ot(16),f=!1),this.o=this.o&&f,!f)gi(this.i,this.l,x,"[Invalid Chunked Response]"),wr(this),Vs(this);else if(0<x.length&&!this.W){this.W=!0;var Ye=this.j;Ye.g==this&&Ye.ba&&!Ye.M&&(Ye.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),Rd(Ye),Ye.M=!0,ot(11))}}else gi(this.i,this.l,x,null),Td(this,x);Je==4&&wr(this),this.o&&!this.J&&(Je==4?Z_(this.j,this):(this.o=!1,va(this)))}else x0(this.g),f==400&&0<x.indexOf("Unknown SID")?(this.s=3,ot(12)):(this.s=0,ot(13)),wr(this),Vs(this)}}}catch{}finally{}};function D_(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function m0(c,d){var f=c.C,y=d.indexOf(`
`,f);return y==-1?Id:(f=Number(d.substring(f,y)),isNaN(f)?T_:(y+=1,y+f>d.length?Id:(d=d.slice(y,y+f),c.C=y+f,d)))}zn.prototype.cancel=function(){this.J=!0,wr(this)};function va(c){c.S=Date.now()+c.I,C_(c,c.I)}function C_(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Fs(g(c.ba,c),d)}function wd(c){c.B&&(a.clearTimeout(c.B),c.B=null)}zn.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(p0(this.i,this.A),this.L!=2&&(Os(),ot(17)),wr(this),this.s=2,Vs(this)):C_(this,this.S-c)};function Vs(c){c.j.G==0||c.J||Z_(c.j,c)}function wr(c){wd(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,p_(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function Td(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||bd(f.h,c))){if(!c.K&&bd(f.h,c)&&f.G==3){try{var y=f.Da.g.parse(d)}catch{y=null}if(Array.isArray(y)&&y.length==3){var C=y;if(C[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)Sa(f),Da(f);else break e;Ad(f),ot(18)}}else f.za=C[1],0<f.za-f.T&&37500>C[2]&&f.F&&f.v==0&&!f.C&&(f.C=Fs(g(f.Za,f),6e3));if(1>=R_(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else br(f,11)}else if((c.K||f.g==c)&&Sa(f),!L(d))for(C=f.Da.g.parse(d),d=0;d<C.length;d++){let ue=C[d];if(f.T=ue[0],ue=ue[1],f.G==2)if(ue[0]=="c"){f.K=ue[1],f.ia=ue[2];let Ye=ue[3];Ye!=null&&(f.la=Ye,f.j.info("VER="+f.la));let Je=ue[4];Je!=null&&(f.Aa=Je,f.j.info("SVER="+f.Aa));let _i=ue[5];_i!=null&&typeof _i=="number"&&0<_i&&(y=1.5*_i,f.L=y,f.j.info("backChannelRequestTimeoutMs_="+y)),y=f;let Mt=c.g;if(Mt){let Ra=Mt.g?Mt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ra){var A=y.h;A.g||Ra.indexOf("spdy")==-1&&Ra.indexOf("quic")==-1&&Ra.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(Dd(A,A.h),A.h=null))}if(y.D){let Nd=Mt.g?Mt.g.getResponseHeader("X-HTTP-Session-Id"):null;Nd&&(y.ya=Nd,ve(y.I,y.D,Nd))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),y=f;var x=c;if(y.qa=tv(y,y.J?y.ia:null,y.W),x.K){N_(y.h,x);var me=x,ze=y.L;ze&&(me.I=ze),me.B&&(wd(me),va(me)),y.g=x}else Y_(y);0<f.i.length&&Ca(f)}else ue[0]!="stop"&&ue[0]!="close"||br(f,7);else f.G==3&&(ue[0]=="stop"||ue[0]=="close"?ue[0]=="stop"?br(f,7):Sd(f):ue[0]!="noop"&&f.l&&f.l.ta(ue),f.v=0)}}Os(4)}catch{}}var y0=class{constructor(c,d){this.g=c,this.map=d}};function S_(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function A_(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function R_(c){return c.h?1:c.g?c.g.size:0}function bd(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function Dd(c,d){c.g?c.g.add(d):c.h=d}function N_(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}S_.prototype.cancel=function(){if(this.i=P_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function P_(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return N(c.i)}function _0(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,y=0;y<f;y++)d.push(c[y]);return d}d=[],f=0;for(y in c)d[f++]=c[y];return d}function v0(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let y in c)d[f++]=y;return d}}}function M_(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=v0(c),y=_0(c),C=y.length,A=0;A<C;A++)d.call(void 0,y[A],f&&f[A],c)}var x_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function I0(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var y=c[f].indexOf("="),C=null;if(0<=y){var A=c[f].substring(0,y);C=c[f].substring(y+1)}else A=c[f];d(A,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function Tr(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Tr){this.h=c.h,Ia(this,c.j),this.o=c.o,this.g=c.g,Ea(this,c.s),this.l=c.l;var d=c.i,f=new Bs;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),k_(this,f),this.m=c.m}else c&&(d=String(c).match(x_))?(this.h=!1,Ia(this,d[1]||"",!0),this.o=Us(d[2]||""),this.g=Us(d[3]||"",!0),Ea(this,d[4]),this.l=Us(d[5]||"",!0),k_(this,d[6]||"",!0),this.m=Us(d[7]||"")):(this.h=!1,this.i=new Bs(null,this.h))}Tr.prototype.toString=function(){var c=[],d=this.j;d&&c.push(js(d,O_,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(js(d,O_,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(js(f,f.charAt(0)=="/"?T0:w0,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",js(f,D0)),c.join("")};function In(c){return new Tr(c)}function Ia(c,d,f){c.j=f?Us(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function Ea(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function k_(c,d,f){d instanceof Bs?(c.i=d,C0(c.i,c.h)):(f||(d=js(d,b0)),c.i=new Bs(d,c.h))}function ve(c,d,f){c.i.set(d,f)}function wa(c){return ve(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Us(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function js(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,E0),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function E0(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var O_=/[#\/\?@]/g,w0=/[#\?:]/g,T0=/[#\?]/g,b0=/[#\?@]/g,D0=/#/g;function Bs(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function Gn(c){c.g||(c.g=new Map,c.h=0,c.i&&I0(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=Bs.prototype,t.add=function(c,d){Gn(this),this.i=null,c=mi(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function F_(c,d){Gn(c),d=mi(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function L_(c,d){return Gn(c),d=mi(c,d),c.g.has(d)}t.forEach=function(c,d){Gn(this),this.g.forEach(function(f,y){f.forEach(function(C){c.call(d,C,y,this)},this)},this)},t.na=function(){Gn(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let y=0;y<d.length;y++){let C=c[y];for(let A=0;A<C.length;A++)f.push(d[y])}return f},t.V=function(c){Gn(this);let d=[];if(typeof c=="string")L_(this,c)&&(d=d.concat(this.g.get(mi(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},t.set=function(c,d){return Gn(this),this.i=null,c=mi(this,c),L_(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},t.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function V_(c,d,f){F_(c,d),0<f.length&&(c.i=null,c.g.set(mi(c,d),N(f)),c.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var y=d[f];let A=encodeURIComponent(String(y)),x=this.V(y);for(y=0;y<x.length;y++){var C=A;x[y]!==""&&(C+="="+encodeURIComponent(String(x[y]))),c.push(C)}}return this.i=c.join("&")};function mi(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function C0(c,d){d&&!c.j&&(Gn(c),c.i=null,c.g.forEach(function(f,y){var C=y.toLowerCase();y!=C&&(F_(this,y),V_(this,C,f))},c)),c.j=d}function S0(c,d){let f=new Ls;if(a.Image){let y=new Image;y.onload=m(Wn,f,"TestLoadImage: loaded",!0,d,y),y.onerror=m(Wn,f,"TestLoadImage: error",!1,d,y),y.onabort=m(Wn,f,"TestLoadImage: abort",!1,d,y),y.ontimeout=m(Wn,f,"TestLoadImage: timeout",!1,d,y),a.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=c}else d(!1)}function A0(c,d){let f=new Ls,y=new AbortController,C=setTimeout(()=>{y.abort(),Wn(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:y.signal}).then(A=>{clearTimeout(C),A.ok?Wn(f,"TestPingServer: ok",!0,d):Wn(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(C),Wn(f,"TestPingServer: error",!1,d)})}function Wn(c,d,f,y,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),y(f)}catch{}}function R0(){this.g=new d0}function N0(c,d,f){let y=f||"";try{M_(c,function(C,A){let x=C;l(C)&&(x=gd(C)),d.push(y+A+"="+encodeURIComponent(x))})}catch(C){throw d.push(y+"type="+encodeURIComponent("_badmap")),C}}function Hs(c){this.l=c.Ub||null,this.j=c.eb||!1}w(Hs,md),Hs.prototype.g=function(){return new Ta(this.l,this.j)},Hs.prototype.i=function(c){return function(){return c}}({});function Ta(c,d){Qe.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(Ta,Qe),t=Ta.prototype,t.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,qs(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,$s(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,qs(this)),this.g&&(this.readyState=3,qs(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;U_(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function U_(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?$s(this):qs(this),this.readyState==3&&U_(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,$s(this))},t.Qa=function(c){this.g&&(this.response=c,$s(this))},t.ga=function(){this.g&&$s(this)};function $s(c){c.readyState=4,c.l=null,c.j=null,c.v=null,qs(c)}t.setRequestHeader=function(c,d){this.u.append(c,d)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function qs(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Ta.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function j_(c){let d="";return ce(c,function(f,y){d+=y,d+=":",d+=f,d+=`\r
`}),d}function Cd(c,d,f){e:{for(y in f){var y=!1;break e}y=!0}y||(f=j_(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):ve(c,d,f))}function be(c){Qe.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(be,Qe);var P0=/^https?$/i,M0=["POST","PUT"];t=be.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,d,f,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():vd.g(),this.v=this.o?g_(this.o):g_(vd),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(A){B_(this,A);return}if(c=f||"",f=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var C in y)f.set(C,y[C]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(let A of y.keys())f.set(A,y.get(A));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),C=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(M0,d,void 0))||y||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,x]of f)this.g.setRequestHeader(A,x);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{q_(this),this.u=!0,this.g.send(c),this.u=!1}catch(A){B_(this,A)}};function B_(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,H_(c),ba(c)}function H_(c){c.A||(c.A=!0,st(c,"complete"),st(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,st(this,"complete"),st(this,"abort"),ba(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ba(this,!0)),be.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?$_(this):this.bb())},t.bb=function(){$_(this)};function $_(c){if(c.h&&typeof o<"u"&&(!c.v[1]||En(c)!=4||c.Z()!=2)){if(c.u&&En(c)==4)d_(c.Ea,0,c);else if(st(c,"readystatechange"),En(c)==4){c.h=!1;try{let x=c.Z();e:switch(x){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var y;if(y=x===0){var C=String(c.D).match(x_)[1]||null;!C&&a.self&&a.self.location&&(C=a.self.location.protocol.slice(0,-1)),y=!P0.test(C?C.toLowerCase():"")}f=y}if(f)st(c,"complete"),st(c,"success");else{c.m=6;try{var A=2<En(c)?c.g.statusText:""}catch{A=""}c.l=A+" ["+c.Z()+"]",H_(c)}}finally{ba(c)}}}}function ba(c,d){if(c.g){q_(c);let f=c.g,y=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||st(c,"ready");try{f.onreadystatechange=y}catch{}}}function q_(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function En(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<En(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),l0(d)}};function z_(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function x0(c){let d={};c=(c.g&&2<=En(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<c.length;y++){if(L(c[y]))continue;var f=D(c[y]);let C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let A=d[C]||[];d[C]=A,A.push(f)}b(d,function(y){return y.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function zs(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function G_(c){this.Aa=0,this.i=[],this.j=new Ls,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=zs("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=zs("baseRetryDelayMs",5e3,c),this.cb=zs("retryDelaySeedMs",1e4,c),this.Wa=zs("forwardChannelMaxRetries",2,c),this.wa=zs("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new S_(c&&c.concurrentRequestLimit),this.Da=new R0,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=G_.prototype,t.la=8,t.G=1,t.connect=function(c,d,f,y){ot(0),this.W=c,this.H=d||{},f&&y!==void 0&&(this.H.OSID=f,this.H.OAID=y),this.F=this.X,this.I=tv(this,null,this.W),Ca(this)};function Sd(c){if(W_(c),c.G==3){var d=c.U++,f=In(c.I);if(ve(f,"SID",c.K),ve(f,"RID",d),ve(f,"TYPE","terminate"),Gs(c,f),d=new zn(c,c.j,d),d.L=2,d.v=wa(In(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=nv(d.j,null),d.g.ea(d.v)),d.F=Date.now(),va(d)}ev(c)}function Da(c){c.g&&(Rd(c),c.g.cancel(),c.g=null)}function W_(c){Da(c),c.u&&(a.clearTimeout(c.u),c.u=null),Sa(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Ca(c){if(!A_(c.h)&&!c.s){c.s=!0;var d=c.Ga;Rs||s_(),Ns||(Rs(),Ns=!0),od.add(d,c),c.B=0}}function k0(c,d){return R_(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Fs(g(c.Ga,c,d),X_(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let C=new zn(this,this.j,c),A=this.o;if(this.S&&(A?(A=v(A),T(A,this.S)):A=this.S),this.m!==null||this.O||(C.H=A,A=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var y=this.i[f];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(d+=y,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=Q_(this,C,d),f=In(this.I),ve(f,"RID",c),ve(f,"CVER",22),this.D&&ve(f,"X-HTTP-Session-Id",this.D),Gs(this,f),A&&(this.O?d="headers="+encodeURIComponent(String(j_(A)))+"&"+d:this.m&&Cd(f,this.m,A)),Dd(this.h,C),this.Ua&&ve(f,"TYPE","init"),this.P?(ve(f,"$req",d),ve(f,"SID","null"),C.T=!0,Ed(C,f,null)):Ed(C,f,d),this.G=2}}else this.G==3&&(c?K_(this,c):this.i.length==0||A_(this.h)||K_(this))};function K_(c,d){var f;d?f=d.l:f=c.U++;let y=In(c.I);ve(y,"SID",c.K),ve(y,"RID",f),ve(y,"AID",c.T),Gs(c,y),c.m&&c.o&&Cd(y,c.m,c.o),f=new zn(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=Q_(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Dd(c.h,f),Ed(f,y,d)}function Gs(c,d){c.H&&ce(c.H,function(f,y){ve(d,y,f)}),c.l&&M_({},function(f,y){ve(d,y,f)})}function Q_(c,d,f){f=Math.min(c.i.length,f);var y=c.l?g(c.l.Na,c.l,c):null;e:{var C=c.i;let A=-1;for(;;){let x=["count="+f];A==-1?0<f?(A=C[0].g,x.push("ofs="+A)):A=0:x.push("ofs="+A);let me=!0;for(let ze=0;ze<f;ze++){let ue=C[ze].g,Ye=C[ze].map;if(ue-=A,0>ue)A=Math.max(0,C[ze].g-100),me=!1;else try{N0(Ye,x,"req"+ue+"_")}catch{y&&y(Ye)}}if(me){y=x.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,y}function Y_(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;Rs||s_(),Ns||(Rs(),Ns=!0),od.add(d,c),c.v=0}}function Ad(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Fs(g(c.Fa,c),X_(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,J_(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Fs(g(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ot(10),Da(this),J_(this))};function Rd(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function J_(c){c.g=new zn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=In(c.qa);ve(d,"RID","rpc"),ve(d,"SID",c.K),ve(d,"AID",c.T),ve(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&ve(d,"TO",c.ja),ve(d,"TYPE","xmlhttp"),Gs(c,d),c.m&&c.o&&Cd(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=wa(In(d)),f.m=null,f.P=!0,b_(f,c)}t.Za=function(){this.C!=null&&(this.C=null,Da(this),Ad(this),ot(19))};function Sa(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function Z_(c,d){var f=null;if(c.g==d){Sa(c),Rd(c),c.g=null;var y=2}else if(bd(c.h,d))f=d.D,N_(c.h,d),y=1;else return;if(c.G!=0){if(d.o)if(y==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var C=c.B;y=ma(),st(y,new I_(y,f)),Ca(c)}else Y_(c);else if(C=d.s,C==3||C==0&&0<d.X||!(y==1&&k0(c,d)||y==2&&Ad(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),C){case 1:br(c,5);break;case 4:br(c,10);break;case 3:br(c,6);break;default:br(c,2)}}}function X_(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function br(c,d){if(c.j.info("Error code "+d),d==2){var f=g(c.fb,c),y=c.Xa;let C=!y;y=new Tr(y||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ia(y,"https"),wa(y),C?S0(y.toString(),f):A0(y.toString(),f)}else ot(2);c.G=0,c.l&&c.l.sa(d),ev(c),W_(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),ot(2)):(this.j.info("Failed to ping google.com"),ot(1))};function ev(c){if(c.G=0,c.ka=[],c.l){let d=P_(c.h);(d.length!=0||c.i.length!=0)&&(R(c.ka,d),R(c.ka,c.i),c.h.i.length=0,N(c.i),c.i.length=0),c.l.ra()}}function tv(c,d,f){var y=f instanceof Tr?In(f):new Tr(f);if(y.g!="")d&&(y.g=d+"."+y.g),Ea(y,y.s);else{var C=a.location;y=C.protocol,d=d?d+"."+C.hostname:C.hostname,C=+C.port;var A=new Tr(null);y&&Ia(A,y),d&&(A.g=d),C&&Ea(A,C),f&&(A.l=f),y=A}return f=c.D,d=c.ya,f&&d&&ve(y,f,d),ve(y,"VER",c.la),Gs(c,y),y}function nv(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new be(new Hs({eb:f})):new be(c.pa),d.Ha(c.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function rv(){}t=rv.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Aa(){}Aa.prototype.g=function(c,d){return new It(c,d)};function It(c,d){Qe.call(this),this.g=new G_(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!L(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!L(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new yi(this)}w(It,Qe),It.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},It.prototype.close=function(){Sd(this.g)},It.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=gd(c),c=f);d.i.push(new y0(d.Ya++,c)),d.G==3&&Ca(d)},It.prototype.N=function(){this.g.l=null,delete this.j,Sd(this.g),delete this.g,It.aa.N.call(this)};function iv(c){yd.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}w(iv,yd);function sv(){_d.call(this),this.status=1}w(sv,_d);function yi(c){this.g=c}w(yi,rv),yi.prototype.ua=function(){st(this.g,"a")},yi.prototype.ta=function(c){st(this.g,new iv(c))},yi.prototype.sa=function(c){st(this.g,new sv)},yi.prototype.ra=function(){st(this.g,"b")},Aa.prototype.createWebChannel=Aa.prototype.g,It.prototype.send=It.prototype.o,It.prototype.open=It.prototype.m,It.prototype.close=It.prototype.close,ig=xn.createWebChannelTransport=function(){return new Aa},rg=xn.getStatEventTarget=function(){return ma()},ng=xn.Event=Er,Fu=xn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ya.NO_ERROR=0,ya.TIMEOUT=8,ya.HTTP_ERROR=6,Po=xn.ErrorCode=ya,E_.COMPLETE="complete",tg=xn.EventType=E_,m_.EventType=ks,ks.OPEN="a",ks.CLOSE="b",ks.ERROR="c",ks.MESSAGE="d",Qe.prototype.listen=Qe.prototype.K,Zi=xn.WebChannel=m_,Y1=xn.FetchXmlHttpFactory=Hs,be.prototype.listenOnce=be.prototype.L,be.prototype.getLastError=be.prototype.Ka,be.prototype.getLastErrorCode=be.prototype.Ba,be.prototype.getStatus=be.prototype.Z,be.prototype.getResponseJson=be.prototype.Oa,be.prototype.getResponseText=be.prototype.oa,be.prototype.send=be.prototype.ea,be.prototype.setWithCredentials=be.prototype.Ha,eg=xn.XhrIo=be}).apply(typeof Ou<"u"?Ou:typeof self<"u"?self:typeof window<"u"?window:{});var ob="@firebase/firestore",ab="4.8.0";var He=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};He.UNAUTHENTICATED=new He(null),He.GOOGLE_CREDENTIALS=new He("google-credentials-uid"),He.FIRST_PARTY=new He("first-party-uid"),He.MOCK_USER=new He("mock-user");var vs="11.10.0";var ni=new nr("@firebase/firestore");function Xi(){return ni.logLevel}function F(t,...e){if(ni.logLevel<=ee.DEBUG){let n=e.map(Gm);ni.debug(`Firestore (${vs}): ${t}`,...n)}}function kn(t,...e){if(ni.logLevel<=ee.ERROR){let n=e.map(Gm);ni.error(`Firestore (${vs}): ${t}`,...n)}}function cr(t,...e){if(ni.logLevel<=ee.WARN){let n=e.map(Gm);ni.warn(`Firestore (${vs}): ${t}`,...n)}}function Gm(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function j(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Zb(t,r,n)}function Zb(t,e,n){let r=`FIRESTORE (${vs}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw kn(r),new Error(r)}function de(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||Zb(e,i,r)}function z(t,e){return t}var P={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},k=class extends lt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var $t=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var $u=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},ug=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(He.UNAUTHENTICATED))}shutdown(){}},lg=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},dg=class{constructor(e){this.t=e,this.currentUser=He.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){de(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),s=new $t;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new $t,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let u=s;e.enqueueRetryable(()=>_(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{F("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(F("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new $t)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(F("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(de(typeof r.accessToken=="string",31837,{l:r}),new $u(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return de(e===null||typeof e=="string",2055,{h:e}),new He(e)}},hg=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=He.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},fg=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new hg(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(He.FIRST_PARTY))}shutdown(){}invalidateToken(){}},qu=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},pg=class{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,tt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){de(this.o===void 0,3512);let r=s=>{s.error!=null&&F("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.m;return this.m=s.token,F("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{F("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.V.getImmediate({optional:!0});s?i(s):F("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new qu(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(de(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new qu(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function J1(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}function Xb(){return new TextEncoder}var Lo=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=J1(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}};function Z(t,e){return t<e?-1:t>e?1:0}function gg(t,e){let n=0;for(;n<t.length&&n<e.length;){let r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return Z(r,i);{let s=Xb(),o=Z1(s.encode(cb(t,n)),s.encode(cb(e,n)));return o!==0?o:Z(r,i)}}n+=r>65535?2:1}return Z(t.length,e.length)}function cb(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function Z1(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return Z(t[n],e[n]);return Z(t.length,e.length)}function as(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var ub="__name__",zu=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&j(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&j(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=t.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return Z(e.length,n.length)}static compareSegments(e,n){let r=t.isNumericId(e),i=t.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?t.extractNumericId(e).compare(t.extractNumericId(n)):gg(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Mn.fromString(e.substring(4,e.length-2))}},we=class t extends zu{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new k(P.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},X1=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ct=class t extends zu{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return X1.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ub}static keyField(){return new t([ub])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new k(P.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new k(P.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new k(P.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new k(P.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var U=class t{constructor(e){this.path=e}static fromPath(e){return new t(we.fromString(e))}static fromName(e){return new t(we.fromString(e).popFirst(5))}static empty(){return new t(we.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&we.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return we.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new we(e.slice()))}};function eD(t,e,n){if(!n)throw new k(P.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function eF(t,e,n,r){if(e===!0&&r===!0)throw new k(P.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function lb(t){if(!U.isDocumentKey(t))throw new k(P.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function db(t){if(U.isDocumentKey(t))throw new k(P.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function tD(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Dl(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":j(12329,{type:typeof t})}function qt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new k(P.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Dl(t);throw new k(P.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Le(t,e){let n={typeString:t};return e&&(n.value=e),n}function Qo(t,e){if(!tD(t))throw new k(P.INVALID_ARGUMENT,"JSON must be an object");let n;for(let r in e)if(e[r]){let i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}let o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new k(P.INVALID_ARGUMENT,n);return!0}var hb=-62135596800,fb=1e6,ge=class t{static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*fb);return new t(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new k(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new k(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<hb)throw new k(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new k(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/fb}_compareTo(e){return this.seconds===e.seconds?Z(this.nanoseconds,e.nanoseconds):Z(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Qo(e,t._jsonSchema))return new t(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-hb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};ge._jsonSchemaVersion="firestore/timestamp/1.0",ge._jsonSchema={type:Le("string",ge._jsonSchemaVersion),seconds:Le("number"),nanoseconds:Le("number")};var W=class t{static fromTimestamp(e){return new t(e)}static min(){return new t(new ge(0,0))}static max(){return new t(new ge(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Vo=-1,mg=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};mg.UNKNOWN_ID=-1;function tF(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=W.fromTimestamp(r===1e9?new ge(n+1,0):new ge(n,r));return new ri(i,U.empty(),e)}function nF(t){return new ri(t.readTime,t.key,Vo)}var ri=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(W.min(),U.empty(),Vo)}static max(){return new t(W.max(),U.empty(),Vo)}};function rF(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=U.comparator(t.documentKey,e.documentKey),n!==0?n:Z(t.largestBatchId,e.largestBatchId))}var iF="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",yg=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Is(t){return _(this,null,function*(){if(t.code!==P.FAILED_PRECONDITION||t.message!==iF)throw t;F("LocalStore","Unexpectedly lost primary lease")})}var M=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&j(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let u=0;u<s;u++){let l=u;n(e[l]).next(h=>{o[l]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}};function sF(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Es(t){return t.name==="IndexedDbTransactionError"}var Wm=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.ae&&this.ae(n),n}}t.ue=-1;return t})(),Km=-1;function Cl(t){return t==null}function Uo(t){return t===0&&1/t==-1/0}function oF(t){return typeof t=="number"&&Number.isInteger(t)&&!Uo(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var nD="";function aF(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=pb(e)),e=cF(t.get(n),e);return pb(e)}function cF(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let s=t.charAt(i);switch(s){case"\0":n+="";break;case nD:n+="";break;default:n+=s}}return n}function pb(t){return t+nD+""}var uF="remoteDocuments",rD="owner";var iD="mutationQueues";var sD="mutations";var oD="documentMutations",lF="remoteDocumentsV14";var aD="remoteDocumentGlobal";var cD="targets";var uD="targetDocuments";var lD="targetGlobal",dD="collectionParents";var hD="clientMetadata";var fD="bundles";var pD="namedQueries";var dF="indexConfiguration";var hF="indexState";var fF="indexEntries";var gD="documentOverlays";var pF="globals";var gF=[iD,sD,oD,uF,cD,rD,lD,uD,hD,aD,dD,fD,pD],rz=[...gF,gD],mF=[iD,sD,oD,lF,cD,rD,lD,uD,hD,aD,dD,fD,pD,gD],yF=mF,_F=[...yF,dF,hF,fF];var iz=[..._F,pF];function gb(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function fr(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function mD(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Ae=class t{constructor(e,n){this.comparator=e,this.root=n||ln.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ln.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ln.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new rs(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new rs(this.root,e,this.comparator,!1)}getReverseIterator(){return new rs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new rs(this.root,e,this.comparator,!0)}},rs=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},ln=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw j(43730,{key:this.key,value:this.value});if(this.right.isRed())throw j(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw j(27949);return e+(this.isRed()?0:1)}};ln.EMPTY=null,ln.RED=!0,ln.BLACK=!1;ln.EMPTY=new class{constructor(){this.size=0}get key(){throw j(57766)}get value(){throw j(16141)}get color(){throw j(16727)}get left(){throw j(29726)}get right(){throw j(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new ln(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var $e=class t{constructor(e){this.comparator=e,this.data=new Ae(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Gu(this.data.getIterator())}getIteratorFrom(e){return new Gu(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Gu=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Pt=class t{constructor(e){this.fields=e,e.sort(Ct.comparator)}static empty(){return new t([])}unionWith(e){let n=new $e(Ct.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return as(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var Wu=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var rt=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Wu("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Z(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};rt.EMPTY_BYTE_STRING=new rt("");var vF=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function On(t){if(de(!!t,39018),typeof t=="string"){let e=0,n=vF.exec(t);if(de(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ee(t.seconds),nanos:Ee(t.nanos)}}function Ee(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Fn(t){return typeof t=="string"?rt.fromBase64String(t):rt.fromUint8Array(t)}var yD="server_timestamp",_D="__type__",vD="__previous_value__",ID="__local_write_time__";function Qm(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[_D])===null||n===void 0?void 0:n.stringValue)===yD}function Sl(t){let e=t.mapValue.fields[vD];return Qm(e)?Sl(e):e}function jo(t){let e=On(t.mapValue.fields[ID].timestampValue);return new ge(e.seconds,e.nanos)}var _g=class{constructor(e,n,r,i,s,o,a,u,l,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=h}},Ku="(default)",Qu=class t{constructor(e,n){this.projectId=e,this.database=n||Ku}static empty(){return new t("","")}get isDefaultDatabase(){return this.database===Ku}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Ym="__type__",ED="__max__",Lu={mapValue:{fields:{__type__:{stringValue:ED}}}},Jm="__vector__",cs="value";function ur(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Qm(t)?4:TD(t)?9007199254740991:wD(t)?10:11:j(28295,{value:t})}function pn(t,e){if(t===e)return!0;let n=ur(t);if(n!==ur(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return jo(t).isEqual(jo(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=On(i.timestampValue),a=On(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Fn(i.bytesValue).isEqual(Fn(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Ee(i.geoPointValue.latitude)===Ee(s.geoPointValue.latitude)&&Ee(i.geoPointValue.longitude)===Ee(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ee(i.integerValue)===Ee(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=Ee(i.doubleValue),a=Ee(s.doubleValue);return o===a?Uo(o)===Uo(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return as(t.arrayValue.values||[],e.arrayValue.values||[],pn);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(gb(o)!==gb(a))return!1;for(let u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!pn(o[u],a[u])))return!1;return!0}(t,e);default:return j(52216,{left:t})}}function Bo(t,e){return(t.values||[]).find(n=>pn(n,e))!==void 0}function us(t,e){if(t===e)return 0;let n=ur(t),r=ur(e);if(n!==r)return Z(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Z(t.booleanValue,e.booleanValue);case 2:return function(s,o){let a=Ee(s.integerValue||s.doubleValue),u=Ee(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return mb(t.timestampValue,e.timestampValue);case 4:return mb(jo(t),jo(e));case 5:return gg(t.stringValue,e.stringValue);case 6:return function(s,o){let a=Fn(s),u=Fn(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=Z(a[l],u[l]);if(h!==0)return h}return Z(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let a=Z(Ee(s.latitude),Ee(o.latitude));return a!==0?a:Z(Ee(s.longitude),Ee(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return yb(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,u,l,h;let p=s.fields||{},g=o.fields||{},m=(a=p[cs])===null||a===void 0?void 0:a.arrayValue,w=(u=g[cs])===null||u===void 0?void 0:u.arrayValue,N=Z(((l=m?.values)===null||l===void 0?void 0:l.length)||0,((h=w?.values)===null||h===void 0?void 0:h.length)||0);return N!==0?N:yb(m,w)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Lu.mapValue&&o===Lu.mapValue)return 0;if(s===Lu.mapValue)return 1;if(o===Lu.mapValue)return-1;let a=s.fields||{},u=Object.keys(a),l=o.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let g=gg(u[p],h[p]);if(g!==0)return g;let m=us(a[u[p]],l[h[p]]);if(m!==0)return m}return Z(u.length,h.length)}(t.mapValue,e.mapValue);default:throw j(23264,{le:n})}}function mb(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Z(t,e);let n=On(t),r=On(e),i=Z(n.seconds,r.seconds);return i!==0?i:Z(n.nanos,r.nanos)}function yb(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let s=us(n[i],r[i]);if(s)return s}return Z(n.length,r.length)}function ls(t){return vg(t)}function vg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=On(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Fn(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return U.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let s of n.values||[])i?i=!1:r+=",",r+=vg(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${vg(n.fields[o])}`;return i+"}"}(t.mapValue):j(61005,{value:t})}function ju(t){switch(ur(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Sl(t);return e?16+ju(e):16;case 5:return 2*t.stringValue.length;case 6:return Fn(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+ju(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return fr(r.fields,(s,o)=>{i+=s.length+ju(o)}),i}(t.mapValue);default:throw j(13486,{value:t})}}function _b(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Ig(t){return!!t&&"integerValue"in t}function Zm(t){return!!t&&"arrayValue"in t}function vb(t){return!!t&&"nullValue"in t}function Ib(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Bu(t){return!!t&&"mapValue"in t}function wD(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[Ym])===null||n===void 0?void 0:n.stringValue)===Jm}function xo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return fr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=xo(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=xo(t.arrayValue.values[n]);return e}return Object.assign({},t)}function TD(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===ED}var oz={mapValue:{fields:{[Ym]:{stringValue:Jm},[cs]:{arrayValue:{}}}}};var Dt=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Bu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=xo(n)}setAll(e){let n=Ct.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=xo(o):i.push(a.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){let n=this.field(e.popLast());Bu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return pn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Bu(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){fr(n,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new t(xo(this.value))}};function bD(t){let e=[];return fr(t.fields,(n,r)=>{let i=new Ct([n]);if(Bu(r)){let s=bD(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new Pt(e)}var zt=class t{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new t(e,0,W.min(),W.min(),W.min(),Dt.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,W.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,W.min(),W.min(),Dt.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,W.min(),W.min(),Dt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(W.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Dt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Dt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=W.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var ds=class{constructor(e,n){this.position=e,this.inclusive=n}};function Eb(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField()?r=U.comparator(U.fromName(o.referenceValue),n.key):r=us(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function wb(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!pn(t.position[n],e.position[n]))return!1;return!0}var ii=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function IF(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Yu=class{},Fe=class t extends Yu{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new wg(e,n,r):n==="array-contains"?new Dg(e,r):n==="in"?new Cg(e,r):n==="not-in"?new Sg(e,r):n==="array-contains-any"?new Ag(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Tg(e,r):new bg(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(us(n,this.value)):n!==null&&ur(this.value)===ur(n)&&this.matchesComparison(us(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return j(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Gt=class t extends Yu{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new t(e,n)}matches(e){return DD(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function DD(t){return t.op==="and"}function CD(t){return EF(t)&&DD(t)}function EF(t){for(let e of t.filters)if(e instanceof Gt)return!1;return!0}function Eg(t){if(t instanceof Fe)return t.field.canonicalString()+t.op.toString()+ls(t.value);if(CD(t))return t.filters.map(e=>Eg(e)).join(",");{let e=t.filters.map(n=>Eg(n)).join(",");return`${t.op}(${e})`}}function SD(t,e){return t instanceof Fe?function(r,i){return i instanceof Fe&&r.op===i.op&&r.field.isEqual(i.field)&&pn(r.value,i.value)}(t,e):t instanceof Gt?function(r,i){return i instanceof Gt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&SD(o,i.filters[a]),!0):!1}(t,e):void j(19439)}function AD(t){return t instanceof Fe?function(n){return`${n.field.canonicalString()} ${n.op} ${ls(n.value)}`}(t):t instanceof Gt?function(n){return n.op.toString()+" {"+n.getFilters().map(AD).join(" ,")+"}"}(t):"Filter"}var wg=class extends Fe{constructor(e,n,r){super(e,n,r),this.key=U.fromName(r.referenceValue)}matches(e){let n=U.comparator(e.key,this.key);return this.matchesComparison(n)}},Tg=class extends Fe{constructor(e,n){super(e,"in",n),this.keys=RD("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},bg=class extends Fe{constructor(e,n){super(e,"not-in",n),this.keys=RD("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function RD(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>U.fromName(r.referenceValue))}var Dg=class extends Fe{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Zm(n)&&Bo(n.arrayValue,this.value)}},Cg=class extends Fe{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Bo(this.value.arrayValue,n)}},Sg=class extends Fe{constructor(e,n){super(e,"not-in",n)}matches(e){if(Bo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Bo(this.value.arrayValue,n)}},Ag=class extends Fe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!Zm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Bo(this.value.arrayValue,r))}};var Rg=class{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Pe=null}};function Tb(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Rg(t,e,n,r,i,s,o)}function Xm(t){let e=z(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Eg(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Cl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ls(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ls(r)).join(",")),e.Pe=n}return e.Pe}function ey(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!IF(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!SD(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!wb(t.startAt,e.startAt)&&wb(t.endAt,e.endAt)}function Ng(t){return U.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var lr=class{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function wF(t,e,n,r,i,s,o,a){return new lr(t,e,n,r,i,s,o,a)}function ty(t){return new lr(t)}function bb(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function ND(t){return t.collectionGroup!==null}function ko(t){let e=z(t);if(e.Te===null){e.Te=[];let n=new Set;for(let s of e.explicitOrderBy)e.Te.push(s),n.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new $e(Ct.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Te.push(new ii(s,r))}),n.has(Ct.keyField().canonicalString())||e.Te.push(new ii(Ct.keyField(),r))}return e.Te}function dn(t){let e=z(t);return e.Ie||(e.Ie=TF(e,ko(t))),e.Ie}function TF(t,e){if(t.limitType==="F")return Tb(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new ii(i.field,s)});let n=t.endAt?new ds(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ds(t.startAt.position,t.startAt.inclusive):null;return Tb(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Pg(t,e){let n=t.filters.concat([e]);return new lr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Mg(t,e,n){return new lr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Al(t,e){return ey(dn(t),dn(e))&&t.limitType===e.limitType}function PD(t){return`${Xm(dn(t))}|lt:${t.limitType}`}function es(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>AD(i)).join(", ")}]`),Cl(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ls(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ls(i)).join(",")),`Target(${r})`}(dn(t))}; limitType=${t.limitType})`}function Rl(t,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):U.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(let s of ko(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,u){let l=Eb(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,ko(r),i)||r.endAt&&!function(o,a,u){let l=Eb(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,ko(r),i))}(t,e)}function bF(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function MD(t){return(e,n)=>{let r=!1;for(let i of ko(t)){let s=DF(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function DF(t,e,n){let r=t.field.isKeyField()?U.comparator(e.key,n.key):function(s,o,a){let u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?us(u,l):j(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return j(19790,{direction:t.dir})}}var Ln=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){fr(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return mD(this.inner)}size(){return this.innerSize}};var CF=new Ae(U.comparator);function Vn(){return CF}var xD=new Ae(U.comparator);function Mo(...t){let e=xD;for(let n of t)e=e.insert(n.key,n);return e}function kD(t){let e=xD;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Zr(){return Oo()}function OD(){return Oo()}function Oo(){return new Ln(t=>t.toString(),(t,e)=>t.isEqual(e))}var SF=new Ae(U.comparator),AF=new $e(U.comparator);function re(...t){let e=AF;for(let n of t)e=e.add(n);return e}var RF=new $e(Z);function NF(){return RF}function ny(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Uo(e)?"-0":e}}function FD(t){return{integerValue:""+t}}function PF(t,e){return oF(e)?FD(e):ny(t,e)}var hs=class{constructor(){this._=void 0}};function MF(t,e,n){return t instanceof fs?function(i,s){let o={fields:{[_D]:{stringValue:yD},[ID]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Qm(s)&&(s=Sl(s)),s&&(o.fields[vD]=s),{mapValue:o}}(n,e):t instanceof si?VD(t,e):t instanceof oi?UD(t,e):function(i,s){let o=LD(i,s),a=Db(o)+Db(i.Ee);return Ig(o)&&Ig(i.Ee)?FD(a):ny(i.serializer,a)}(t,e)}function xF(t,e,n){return t instanceof si?VD(t,e):t instanceof oi?UD(t,e):n}function LD(t,e){return t instanceof ps?function(r){return Ig(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var fs=class extends hs{},si=class extends hs{constructor(e){super(),this.elements=e}};function VD(t,e){let n=jD(e);for(let r of t.elements)n.some(i=>pn(i,r))||n.push(r);return{arrayValue:{values:n}}}var oi=class extends hs{constructor(e){super(),this.elements=e}};function UD(t,e){let n=jD(e);for(let r of t.elements)n=n.filter(i=>!pn(i,r));return{arrayValue:{values:n}}}var ps=class extends hs{constructor(e,n){super(),this.serializer=e,this.Ee=n}};function Db(t){return Ee(t.integerValue||t.doubleValue)}function jD(t){return Zm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function kF(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof si&&i instanceof si||r instanceof oi&&i instanceof oi?as(r.elements,i.elements,pn):r instanceof ps&&i instanceof ps?pn(r.Ee,i.Ee):r instanceof fs&&i instanceof fs}(t.transform,e.transform)}var xg=class{constructor(e,n){this.version=e,this.transformResults=n}},hn=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Hu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var gs=class{};function BD(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ho(t.key,hn.none()):new ai(t.key,t.data,hn.none());{let n=t.data,r=Dt.empty(),i=new $e(Ct.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new gn(t.key,r,new Pt(i.toArray()),hn.none())}}function OF(t,e,n){t instanceof ai?function(i,s,o){let a=i.value.clone(),u=Sb(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof gn?function(i,s,o){if(!Hu(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=Sb(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(HD(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Fo(t,e,n,r){return t instanceof ai?function(s,o,a,u){if(!Hu(s.precondition,o))return a;let l=s.value.clone(),h=Ab(s.fieldTransforms,u,o);return l.setAll(h),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof gn?function(s,o,a,u){if(!Hu(s.precondition,o))return a;let l=Ab(s.fieldTransforms,u,o),h=o.data;return h.setAll(HD(s)),h.setAll(l),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(s,o,a){return Hu(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function FF(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),s=LD(r.transform,i||null);s!=null&&(n===null&&(n=Dt.empty()),n.set(r.field,s))}return n||null}function Cb(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&as(r,i,(s,o)=>kF(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var ai=class extends gs{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},gn=class extends gs{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function HD(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function Sb(t,e,n){let r=new Map;de(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,xF(o,a,n[i]))}return r}function Ab(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,MF(s,o,e))}return r}var Ho=class extends gs{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},kg=class extends gs{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Og=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&OF(s,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=Fo(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=Fo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=OD();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;let u=BD(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(W.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),re())}isEqual(e){return this.batchId===e.batchId&&as(this.mutations,e.mutations,(n,r)=>Cb(n,r))&&as(this.baseMutations,e.baseMutations,(n,r)=>Cb(n,r))}},Fg=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){de(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return SF}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)}};var Lg=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Vg=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var ke,ae;function LF(t){switch(t){case P.OK:return j(64938);case P.CANCELLED:case P.UNKNOWN:case P.DEADLINE_EXCEEDED:case P.RESOURCE_EXHAUSTED:case P.INTERNAL:case P.UNAVAILABLE:case P.UNAUTHENTICATED:return!1;case P.INVALID_ARGUMENT:case P.NOT_FOUND:case P.ALREADY_EXISTS:case P.PERMISSION_DENIED:case P.FAILED_PRECONDITION:case P.ABORTED:case P.OUT_OF_RANGE:case P.UNIMPLEMENTED:case P.DATA_LOSS:return!0;default:return j(15467,{code:t})}}function $D(t){if(t===void 0)return kn("GRPC error has no .code"),P.UNKNOWN;switch(t){case ke.OK:return P.OK;case ke.CANCELLED:return P.CANCELLED;case ke.UNKNOWN:return P.UNKNOWN;case ke.DEADLINE_EXCEEDED:return P.DEADLINE_EXCEEDED;case ke.RESOURCE_EXHAUSTED:return P.RESOURCE_EXHAUSTED;case ke.INTERNAL:return P.INTERNAL;case ke.UNAVAILABLE:return P.UNAVAILABLE;case ke.UNAUTHENTICATED:return P.UNAUTHENTICATED;case ke.INVALID_ARGUMENT:return P.INVALID_ARGUMENT;case ke.NOT_FOUND:return P.NOT_FOUND;case ke.ALREADY_EXISTS:return P.ALREADY_EXISTS;case ke.PERMISSION_DENIED:return P.PERMISSION_DENIED;case ke.FAILED_PRECONDITION:return P.FAILED_PRECONDITION;case ke.ABORTED:return P.ABORTED;case ke.OUT_OF_RANGE:return P.OUT_OF_RANGE;case ke.UNIMPLEMENTED:return P.UNIMPLEMENTED;case ke.DATA_LOSS:return P.DATA_LOSS;default:return j(39323,{code:t})}}(ae=ke||(ke={}))[ae.OK=0]="OK",ae[ae.CANCELLED=1]="CANCELLED",ae[ae.UNKNOWN=2]="UNKNOWN",ae[ae.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ae[ae.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ae[ae.NOT_FOUND=5]="NOT_FOUND",ae[ae.ALREADY_EXISTS=6]="ALREADY_EXISTS",ae[ae.PERMISSION_DENIED=7]="PERMISSION_DENIED",ae[ae.UNAUTHENTICATED=16]="UNAUTHENTICATED",ae[ae.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ae[ae.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ae[ae.ABORTED=10]="ABORTED",ae[ae.OUT_OF_RANGE=11]="OUT_OF_RANGE",ae[ae.UNIMPLEMENTED=12]="UNIMPLEMENTED",ae[ae.INTERNAL=13]="INTERNAL",ae[ae.UNAVAILABLE=14]="UNAVAILABLE",ae[ae.DATA_LOSS=15]="DATA_LOSS";var Rb=null;var VF=new Mn([4294967295,4294967295],0);function Nb(t){let e=Xb().encode(t),n=new Xp;return n.update(e),new Uint8Array(n.digest())}function Pb(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Mn([n,r],0),new Mn([i,s],0)]}var Ug=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Xr(`Invalid padding: ${n}`);if(r<0)throw new Xr(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Xr(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Xr(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Mn.fromNumber(this.fe)}pe(e,n,r){let i=e.add(n.multiply(Mn.fromNumber(r)));return i.compare(VF)===1&&(i=new Mn([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let n=Nb(e),[r,i]=Pb(n);for(let s=0;s<this.hashCount;s++){let o=this.pe(r,i,s);if(!this.ye(o))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.fe===0)return;let n=Nb(e),[r,i]=Pb(n);for(let s=0;s<this.hashCount;s++){let o=this.pe(r,i,s);this.we(o)}}we(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Xr=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Ju=class t{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,$o.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(W.min(),i,new Ae(Z),Vn(),re())}},$o=class t{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,re(),re(),re())}};var is=class{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=i}},Zu=class{constructor(e,n){this.targetId=e,this.De=n}},Xu=class{constructor(e,n,r=rt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},el=class{constructor(){this.ve=0,this.Ce=Mb(),this.Fe=rt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=re(),n=re(),r=re();return this.Ce.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:j(38017,{changeType:s})}}),new $o(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=Mb()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,de(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},jg=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=Vn(),this.je=Vu(),this.Je=Vu(),this.He=new Ae(Z)}Ye(e){for(let n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(let n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{let r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:j(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,i)=>{this.nt(i)&&n(i)})}it(e){let n=e.targetId,r=e.De.count,i=this.st(n);if(i){let s=i.target;if(Ng(s))if(r===0){let o=new U(s.path);this.Xe(n,o,zt.newNoDocument(o,W.min()))}else de(r===1,20013,{expectedCount:r});else{let o=this.ot(n);if(o!==r){let a=this._t(e),u=a?this.ut(a,e,o):1;if(u!==0){this.rt(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,l)}Rb?.ct(function(h,p,g,m,w){var N,R,O,L,V,H;let Te={localCacheCount:h,existenceFilterCount:p.count,databaseId:g.database,projectId:g.projectId},ce=p.unchangedNames;return ce&&(Te.bloomFilter={applied:w===0,hashCount:(N=ce?.hashCount)!==null&&N!==void 0?N:0,bitmapLength:(L=(O=(R=ce?.bits)===null||R===void 0?void 0:R.bitmap)===null||O===void 0?void 0:O.length)!==null&&L!==void 0?L:0,padding:(H=(V=ce?.bits)===null||V===void 0?void 0:V.padding)!==null&&H!==void 0?H:0,mightContain:b=>{var v;return(v=m?.mightContain(b))!==null&&v!==void 0&&v}}),Te}(o,e.De,this.We.lt(),a,u))}}}}_t(e){let n=e.De.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n,o,a;try{o=Fn(r).toUint8Array()}catch(u){if(u instanceof Wu)return cr("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new Ug(o,i,s)}catch(u){return cr(u instanceof Xr?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.fe===0?null:a}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){let r=this.We.getRemoteKeysForTarget(n),i=0;return r.forEach(s=>{let o=this.We.lt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Xe(n,s,null),i++)}),i}Pt(e){let n=new Map;this.Ge.forEach((s,o)=>{let a=this.st(o);if(a){if(s.current&&Ng(a.target)){let u=new U(a.target.path);this.Tt(u).has(o)||this.It(o,u)||this.Xe(o,u,zt.newNoDocument(u,e))}s.Ne&&(n.set(o,s.Le()),s.ke())}});let r=re();this.Je.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{let l=this.st(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ze.forEach((s,o)=>o.setReadTime(e));let i=new Ju(e,n,this.He,this.ze,r);return this.ze=Vn(),this.je=Vu(),this.Je=Vu(),this.He=new Ae(Z),i}Ze(e,n){if(!this.nt(e))return;let r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new el,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new $e(Z),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new $e(Z),this.je=this.je.insert(e,n)),n}nt(e){let n=this.st(e)!==null;return n||F("WatchChangeAggregator","Detected inactive target",e),n}st(e){let n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new el),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}};function Vu(){return new Ae(U.comparator)}function Mb(){return new Ae(U.comparator)}var UF={asc:"ASCENDING",desc:"DESCENDING"},jF={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},BF={and:"AND",or:"OR"},Bg=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function Hg(t,e){return t.useProto3Json||Cl(e)?e:{value:e}}function tl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function qD(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function HF(t,e){return tl(t,e.toTimestamp())}function fn(t){return de(!!t,49232),W.fromTimestamp(function(n){let r=On(n);return new ge(r.seconds,r.nanos)}(t))}function ry(t,e){return $g(t,e).canonicalString()}function $g(t,e){let n=function(i){return new we(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function zD(t){let e=we.fromString(t);return de(YD(e),10190,{key:e.toString()}),e}function qg(t,e){return ry(t.databaseId,e.path)}function sg(t,e){let n=zD(e);if(n.get(1)!==t.databaseId.projectId)throw new k(P.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new k(P.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new U(WD(n))}function GD(t,e){return ry(t.databaseId,e)}function $F(t){let e=zD(t);return e.length===4?we.emptyPath():WD(e)}function zg(t){return new we(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function WD(t){return de(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function xb(t,e,n){return{name:qg(t,e),fields:n.value.mapValue.fields}}function qF(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:j(39313,{state:l})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,h){return l.useProto3Json?(de(h===void 0||typeof h=="string",58123),rt.fromBase64String(h||"")):(de(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),rt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){let h=l.code===void 0?P.UNKNOWN:$D(l.code);return new k(h,l.message||"")}(o);n=new Xu(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=sg(t,r.document.name),s=fn(r.document.updateTime),o=r.document.createTime?fn(r.document.createTime):W.min(),a=new Dt({mapValue:{fields:r.document.fields}}),u=zt.newFoundDocument(i,s,o,a),l=r.targetIds||[],h=r.removedTargetIds||[];n=new is(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=sg(t,r.document),s=r.readTime?fn(r.readTime):W.min(),o=zt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new is([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=sg(t,r.document),s=r.removedTargetIds||[];n=new is([],s,i,null)}else{if(!("filter"in e))return j(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new Vg(i,s),a=r.targetId;n=new Zu(a,o)}}return n}function zF(t,e){let n;if(e instanceof ai)n={update:xb(t,e.key,e.value)};else if(e instanceof Ho)n={delete:qg(t,e.key)};else if(e instanceof gn)n={update:xb(t,e.key,e.data),updateMask:eL(e.fieldMask)};else{if(!(e instanceof kg))return j(16599,{Rt:e.type});n={verify:qg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof fs)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof si)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof oi)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ps)return{fieldPath:o.field.canonicalString(),increment:a.Ee};throw j(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:HF(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:j(27497)}(t,e.precondition)),n}function GF(t,e){return t&&t.length>0?(de(e!==void 0,14353),t.map(n=>function(i,s){let o=i.updateTime?fn(i.updateTime):fn(s);return o.isEqual(W.min())&&(o=fn(s)),new xg(o,i.transformResults||[])}(n,e))):[]}function WF(t,e){return{documents:[GD(t,e.path)]}}function KF(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=GD(t,i);let s=function(l){if(l.length!==0)return QD(Gt.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(h=>function(g){return{field:ts(g.field),direction:JF(g.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let a=Hg(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{Vt:n,parent:i}}function QF(t){let e=$F(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){de(r===1,65062);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(p){let g=KD(p);return g instanceof Gt&&CD(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(g=>function(w){return new ii(ns(w.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(g))}(n.orderBy));let a=null;n.limit&&(a=function(p){let g;return g=typeof p=="object"?p.value:p,Cl(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(p){let g=!!p.before,m=p.values||[];return new ds(m,g)}(n.startAt));let l=null;return n.endAt&&(l=function(p){let g=!p.before,m=p.values||[];return new ds(m,g)}(n.endAt)),wF(e,i,o,s,a,"F",u,l)}function YF(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return j(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function KD(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=ns(n.unaryFilter.field);return Fe.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=ns(n.unaryFilter.field);return Fe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=ns(n.unaryFilter.field);return Fe.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=ns(n.unaryFilter.field);return Fe.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return j(61313);default:return j(60726)}}(t):t.fieldFilter!==void 0?function(n){return Fe.create(ns(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return j(58110);default:return j(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Gt.create(n.compositeFilter.filters.map(r=>KD(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return j(1026)}}(n.compositeFilter.op))}(t):j(30097,{filter:t})}function JF(t){return UF[t]}function ZF(t){return jF[t]}function XF(t){return BF[t]}function ts(t){return{fieldPath:t.canonicalString()}}function ns(t){return Ct.fromServerFormat(t.fieldPath)}function QD(t){return t instanceof Fe?function(n){if(n.op==="=="){if(Ib(n.value))return{unaryFilter:{field:ts(n.field),op:"IS_NAN"}};if(vb(n.value))return{unaryFilter:{field:ts(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Ib(n.value))return{unaryFilter:{field:ts(n.field),op:"IS_NOT_NAN"}};if(vb(n.value))return{unaryFilter:{field:ts(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ts(n.field),op:ZF(n.op),value:n.value}}}(t):t instanceof Gt?function(n){let r=n.getFilters().map(i=>QD(i));return r.length===1?r[0]:{compositeFilter:{op:XF(n.op),filters:r}}}(t):j(54877,{filter:t})}function eL(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function YD(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var qo=class t{constructor(e,n,r,i,s=W.min(),o=W.min(),a=rt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Gg=class{constructor(e){this.gt=e}};function tL(t){let e=QF({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Mg(e,e.limit,"L"):e}var nl=class{constructor(){}bt(e,n){this.Dt(e,n),n.vt()}Dt(e,n){if("nullValue"in e)this.Ct(n,5);else if("booleanValue"in e)this.Ct(n,10),n.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(n,15),n.Ft(Ee(e.integerValue));else if("doubleValue"in e){let r=Ee(e.doubleValue);isNaN(r)?this.Ct(n,13):(this.Ct(n,15),Uo(r)?n.Ft(0):n.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(n,20),typeof r=="string"&&(r=On(r)),n.Mt(`${r.seconds||""}`),n.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,n),this.Ot(n);else if("bytesValue"in e)this.Ct(n,30),n.Nt(Fn(e.bytesValue)),this.Ot(n);else if("referenceValue"in e)this.Bt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(n,45),n.Ft(r.latitude||0),n.Ft(r.longitude||0)}else"mapValue"in e?TD(e)?this.Ct(n,Number.MAX_SAFE_INTEGER):wD(e)?this.Lt(e.mapValue,n):(this.kt(e.mapValue,n),this.Ot(n)):"arrayValue"in e?(this.qt(e.arrayValue,n),this.Ot(n)):j(19022,{Qt:e})}xt(e,n){this.Ct(n,25),this.$t(e,n)}$t(e,n){n.Mt(e)}kt(e,n){let r=e.fields||{};this.Ct(n,55);for(let i of Object.keys(r))this.xt(i,n),this.Dt(r[i],n)}Lt(e,n){var r,i;let s=e.fields||{};this.Ct(n,53);let o=cs,a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(n,15),n.Ft(Ee(a)),this.xt(o,n),this.Dt(s[o],n)}qt(e,n){let r=e.values||[];this.Ct(n,50);for(let i of r)this.Dt(i,n)}Bt(e,n){this.Ct(n,37),U.fromName(e).path.forEach(r=>{this.Ct(n,60),this.$t(r,n)})}Ct(e,n){e.Ft(n)}Ot(e){e.Ft(2)}};nl.Ut=new nl;var Wg=class{constructor(){this.Dn=new Kg}addToCollectionParentIndex(e,n){return this.Dn.add(n),M.resolve()}getCollectionParents(e,n){return M.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return M.resolve()}deleteFieldIndex(e,n){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,n){return M.resolve()}getDocumentsMatchingTarget(e,n){return M.resolve(null)}getIndexType(e,n){return M.resolve(0)}getFieldIndexes(e,n){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,n){return M.resolve(ri.min())}getMinOffsetFromCollectionGroup(e,n){return M.resolve(ri.min())}updateCollectionGroup(e,n,r){return M.resolve()}updateIndexEntries(e,n){return M.resolve()}},Kg=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new $e(we.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new $e(we.comparator)).toArray()}};var az=new Uint8Array(0);var kb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},JD=41943040,Nt=class t{static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}};Nt.DEFAULT_COLLECTION_PERCENTILE=10,Nt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Nt.DEFAULT=new Nt(JD,Nt.DEFAULT_COLLECTION_PERCENTILE,Nt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Nt.DISABLED=new Nt(-1,0,0);var zo=class t{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new t(0)}static ur(){return new t(-1)}};var Ob="LruGarbageCollector",nL=1048576;function Fb([t,e],[n,r]){let i=Z(t,n);return i===0?Z(e,r):i}var Qg=class{constructor(e){this.Tr=e,this.buffer=new $e(Fb),this.Ir=0}dr(){return++this.Ir}Er(e){let n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();Fb(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},Yg=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){F(Ob,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>_(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){Es(n)?F(Ob,"Ignoring IndexedDB error during garbage collection: ",n):yield Is(n)}yield this.Rr(3e5)}))}},Jg=class{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return M.resolve(Wm.ue);let r=new Qg(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(F("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(kb)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(F("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),kb):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,i,s,o,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(F("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,o=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,n))).next(p=>(s=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),Xi()<=ee.DEBUG&&F("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:p})))}};function rL(t,e){return new Jg(t,e)}var Zg=class{constructor(){this.changes=new Ln(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,zt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?M.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Xg=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var em=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Fo(r.mutation,i,Pt.empty(),ge.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,re()).next(()=>r))}getLocalViewOfDocuments(e,n,r=re()){let i=Zr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Mo();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let r=Zr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,re()))}populateOverlays(e,n,r){let i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Vn(),o=Oo(),a=function(){return Oo()}();return n.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof gn)?s=s.insert(l.key,l):h!==void 0?(o.set(l.key,h.mutation.getFieldMask()),Fo(h.mutation,l,h.mutation.getFieldMask(),ge.now())):o.set(l.key,Pt.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((l,h)=>o.set(l,h)),n.forEach((l,h)=>{var p;return a.set(l,new Xg(h,(p=o.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){let r=Oo(),i=new Ae((o,a)=>o-a),s=re();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let a of o)a.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let h=r.get(u)||Pt.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||re()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=OD();h.forEach(g=>{if(!s.has(g)){let m=BD(n.get(g),r.get(g));m!==null&&p.set(g,m),s=s.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,p))}return M.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return U.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):ND(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):M.resolve(Zr()),a=Vo,u=s;return o.next(l=>M.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(h)?M.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{u=u.insert(h,g)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,u,l,re())).next(h=>({batchId:a,changes:kD(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new U(n)).next(r=>{let i=Mo();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let s=n.collectionGroup,o=Mo();return this.indexManager.getCollectionParents(e,s).next(a=>M.forEach(a,u=>{let l=function(p,g){return new lr(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,l)=>{let h=l.getKey();o.get(h)===null&&(o=o.insert(h,zt.newInvalidDocument(h)))});let a=Mo();return o.forEach((u,l)=>{let h=s.get(u);h!==void 0&&Fo(h.mutation,l,Pt.empty(),ge.now()),Rl(n,l)&&(a=a.insert(u,l))}),a})}};var tm=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return M.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(i){return{id:i.id,version:i.version,createTime:fn(i.createTime)}}(n)),M.resolve()}getNamedQuery(e,n){return M.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(i){return{name:i.name,query:tL(i.bundledQuery),readTime:fn(i.readTime)}}(n)),M.resolve()}};var nm=class{constructor(){this.overlays=new Ae(U.comparator),this.kr=new Map}getOverlay(e,n){return M.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Zr();return M.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.wt(e,n,s)}),M.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.kr.delete(r)),M.resolve()}getOverlaysForCollection(e,n,r){let i=Zr(),s=n.length+1,o=new U(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return M.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ae((l,h)=>l-h),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=s.get(l.largestBatchId);h===null&&(h=Zr(),s=s.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=Zr(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return M.resolve(a)}wt(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Lg(n,r));let s=this.kr.get(n);s===void 0&&(s=re(),this.kr.set(n,s)),this.kr.set(n,s.add(r.key))}};var rm=class{constructor(){this.sessionToken=rt.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,M.resolve()}};var Go=class{constructor(){this.qr=new $e(Oe.Qr),this.$r=new $e(Oe.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){let r=new Oe(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new Oe(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){let n=new U(new we([])),r=new Oe(n,e),i=new Oe(n,e+1),s=[];return this.$r.forEachInRange([r,i],o=>{this.Wr(o),s.push(o.key)}),s}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let n=new U(new we([])),r=new Oe(n,e),i=new Oe(n,e+1),s=re();return this.$r.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new Oe(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Oe=class{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return U.comparator(e.key,n.key)||Z(e.Hr,n.Hr)}static Ur(e,n){return Z(e.Hr,n.Hr)||U.comparator(e.key,n.key)}};var im=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new $e(Oe.Qr)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let s=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Og(s,n,r,i);this.mutationQueue.push(o);for(let a of i)this.Yr=this.Yr.add(new Oe(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return M.resolve(o)}lookupMutationBatch(e,n){return M.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.Xr(r),s=i<0?0:i;return M.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?Km:this.er-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Oe(n,0),i=new Oe(n,Number.POSITIVE_INFINITY),s=[];return this.Yr.forEachInRange([r,i],o=>{let a=this.Zr(o.Hr);s.push(a)}),M.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new $e(Z);return n.forEach(i=>{let s=new Oe(i,0),o=new Oe(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([s,o],a=>{r=r.add(a.Hr)})}),M.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;U.isDocumentKey(s)||(s=s.child(""));let o=new Oe(new U(s),0),a=new $e(Z);return this.Yr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.Hr)),!0)},o),M.resolve(this.ei(a))}ei(e){let n=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){de(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return M.forEach(n.mutations,i=>{let s=new Oe(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){let r=new Oe(n,0),i=this.Yr.firstAfterOrEqual(r);return M.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var sm=class{constructor(e){this.ni=e,this.docs=function(){return new Ae(U.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return M.resolve(r?r.document.mutableCopy():zt.newInvalidDocument(n))}getEntries(e,n){let r=Vn();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():zt.newInvalidDocument(i))}),M.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Vn(),o=n.path,a=new U(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||rF(nF(h),r)<=0||(i.has(h.key)||Rl(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return M.resolve(s)}getAllFromCollectionGroup(e,n,r,i){j(9500)}ri(e,n){return M.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new om(this)}getSize(e){return M.resolve(this.size)}},om=class extends Zg{constructor(e){super(),this.Or=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),M.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}};var am=class{constructor(e){this.persistence=e,this.ii=new Ln(n=>Xm(n),ey),this.lastRemoteSnapshotVersion=W.min(),this.highestTargetId=0,this.si=0,this.oi=new Go,this.targetCount=0,this._i=zo.ar()}forEachTarget(e,n){return this.ii.forEach((r,i)=>n(i)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),M.resolve()}hr(e){this.ii.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this._i=new zo(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,M.resolve()}updateTargetData(e,n){return this.hr(n),M.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.ii.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.ii.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),M.waitFor(s).next(()=>i)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,n){let r=this.ii.get(n)||null;return M.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),M.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),M.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),M.resolve()}getMatchingKeysForTargetId(e,n){let r=this.oi.Jr(n);return M.resolve(r)}containsKey(e,n){return M.resolve(this.oi.containsKey(n))}};var rl=class{constructor(e,n){this.ai={},this.overlays={},this.ui=new Wm(0),this.ci=!1,this.ci=!0,this.li=new rm,this.referenceDelegate=e(this),this.hi=new am(this),this.indexManager=new Wg,this.remoteDocumentCache=function(i){return new sm(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new Gg(n),this.Ti=new tm(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new nm,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new im(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){F("MemoryPersistence","Starting transaction:",e);let i=new cm(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ei(e,n){return M.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}},cm=class extends yg{constructor(e){super(),this.currentSequenceNumber=e}},um=class t{constructor(e){this.persistence=e,this.Ai=new Go,this.Ri=null}static Vi(e){return new t(e)}get mi(){if(this.Ri)return this.Ri;throw j(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),M.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),M.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.mi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.mi,r=>{let i=U.fromPath(r);return this.fi(e,i).next(s=>{s||n.removeEntry(i,W.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return M.or([()=>M.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}},il=class t{constructor(e,n){this.persistence=e,this.gi=new Ln(r=>aF(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=rL(this,n)}static Vi(e,n){return new t(e,n)}Ii(){}di(e){return M.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){let n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return M.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(s=>s?M.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0,i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ri(e,o=>this.Sr(e,o,n).next(a=>{a||(r++,s.removeEntry(o,W.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),M.resolve()}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),M.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),M.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),M.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=ju(e.data.value)),n}Sr(e,n,r){return M.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{let i=this.gi.get(n);return M.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var lm=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=i}static Es(e,n){let r=re(),i=re();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new t(e,n.fromCache,r,i)}};var dm=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var hm=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return jT()?8:sF(Be())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,i){let s={result:null};return this.ps(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ys(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new dm;return this.ws(e,n,o).next(a=>{if(s.result=a,this.Rs)return this.Ss(e,n,o,a.size)})}).next(()=>s.result)}Ss(e,n,r,i){return r.documentReadCount<this.Vs?(Xi()<=ee.DEBUG&&F("QueryEngine","SDK will not create cache indexes for query:",es(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),M.resolve()):(Xi()<=ee.DEBUG&&F("QueryEngine","Query:",es(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Xi()<=ee.DEBUG&&F("QueryEngine","The SDK decides to create cache indexes for query:",es(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,dn(n))):M.resolve())}ps(e,n){if(bb(n))return M.resolve(null);let r=dn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Mg(n,null,"F"),r=dn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=re(...s);return this.gs.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.bs(n,a);return this.Ds(n,l,o,u.readTime)?this.ps(e,Mg(n,null,"F")):this.vs(e,l,n,u)}))})))}ys(e,n,r,i){return bb(n)||i.isEqual(W.min())?M.resolve(null):this.gs.getDocuments(e,r).next(s=>{let o=this.bs(n,s);return this.Ds(n,o,r,i)?M.resolve(null):(Xi()<=ee.DEBUG&&F("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),es(n)),this.vs(e,o,n,tF(i,Vo)).next(a=>a))})}bs(e,n){let r=new $e(MD(e));return n.forEach((i,s)=>{Rl(e,s)&&(r=r.add(s))}),r}Ds(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ws(e,n,r){return Xi()<=ee.DEBUG&&F("QueryEngine","Using full collection scan to execute query:",es(n)),this.gs.getDocumentsMatchingQuery(e,n,ri.min(),r)}vs(e,n,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var iy="LocalStore",iL=3e8,fm=class{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.Fs=new Ae(Z),this.Ms=new Ln(s=>Xm(s),ey),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new em(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}};function sL(t,e,n,r){return new fm(t,e,n,r)}function ZD(t,e){return _(this,null,function*(){let n=z(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],u=re();for(let l of i){o.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of s){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({Bs:l,removedBatchIds:o,addedBatchIds:a}))})})})}function oL(t,e){let n=z(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=n.Os.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let p=l.batch,g=p.keys(),m=M.resolve();return g.forEach(w=>{m=m.next(()=>h.getEntry(u,w)).next(N=>{let R=l.docVersions.get(w);de(R!==null,48541),N.version.compareTo(R)<0&&(p.applyToRemoteDocument(N,l),N.isValidDocument()&&(N.setReadTime(l.commitVersion),h.addEntry(N)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=re();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function XD(t){let e=z(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function aL(t,e){let n=z(t),r=e.snapshotVersion,i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;let a=[];e.targetChanges.forEach((h,p)=>{let g=i.get(p);if(!g)return;a.push(n.hi.removeMatchingKeys(s,h.removedDocuments,p).next(()=>n.hi.addMatchingKeys(s,h.addedDocuments,p)));let m=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?m=m.withResumeToken(rt.EMPTY_BYTE_STRING,W.min()).withLastLimboFreeSnapshotVersion(W.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,r)),i=i.insert(p,m),function(N,R,O){return N.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=iL?!0:O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0}(g,m,h)&&a.push(n.hi.updateTargetData(s,m))});let u=Vn(),l=re();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(cL(s,o,e.documentUpdates).next(h=>{u=h.Ls,l=h.ks})),!r.isEqual(W.min())){let h=n.hi.getLastRemoteSnapshotVersion(s).next(p=>n.hi.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return M.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.Fs=i,s))}function cL(t,e,n){let r=re(),i=re();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Vn();return n.forEach((a,u)=>{let l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(W.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):F(iy,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ls:o,ks:i}})}function uL(t,e){let n=z(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Km),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function lL(t,e){let n=z(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.hi.getTargetData(r,e).next(s=>s?(i=s,M.resolve(i)):n.hi.allocateTargetId(r).next(o=>(i=new qo(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}function pm(t,e,n){return _(this,null,function*(){let r=z(t),i=r.Fs.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Es(o))throw o;F(iy,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)})}function Lb(t,e,n){let r=z(t),i=W.min(),s=re();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,h){let p=z(u),g=p.Ms.get(h);return g!==void 0?M.resolve(p.Fs.get(g)):p.hi.getTargetData(l,h)}(r,o,dn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,n?i:W.min(),n?s:re())).next(a=>(dL(r,bF(e),a),{documents:a,qs:s})))}function dL(t,e,n){let r=t.xs.get(e)||W.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.xs.set(e,r)}var sl=class{constructor(){this.activeTargetIds=NF()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var gm=class{constructor(){this.Fo=new sl,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new sl,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var mm=class{xo(e){}shutdown(){}};var Vb="ConnectivityMonitor",ol=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){F(Vb,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){F(Vb,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Uu=null;function ym(){return Uu===null?Uu=function(){return 268435456+Math.round(2147483648*Math.random())}():Uu++,"0x"+Uu.toString(16)}var og="RestConnection",hL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},_m=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===Ku?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,s){let o=ym(),a=this.Go(e,n.toUriEncodedString());F(og,`Sending RPC '${e}' ${o}:`,a,r);let u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,i,s);let{host:l}=new URL(a),h=Ht(l);return this.jo(e,a,u,r,h).then(p=>(F(og,`Received RPC '${e}' ${o}: `,p),p),p=>{throw cr(og,`RPC '${e}' ${o} failed with error: `,p,"url: ",a,"request:",r),p})}Jo(e,n,r,i,s,o){return this.Wo(e,n,r,i,s)}zo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+vs}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}Go(e,n){let r=hL[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}};var vm=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var nt="WebChannelConnection",Im=class extends _m{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,i,s){let o=ym();return new Promise((a,u)=>{let l=new eg;l.setWithCredentials(!0),l.listenOnce(tg.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Po.NO_ERROR:let p=l.getResponseJson();F(nt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),a(p);break;case Po.TIMEOUT:F(nt,`RPC '${e}' ${o} timed out`),u(new k(P.DEADLINE_EXCEEDED,"Request time out"));break;case Po.HTTP_ERROR:let g=l.getStatus();if(F(nt,`RPC '${e}' ${o} failed with status:`,g,"response text:",l.getResponseText()),g>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);let w=m?.error;if(w&&w.status&&w.message){let N=function(O){let L=O.toLowerCase().replace(/_/g,"-");return Object.values(P).indexOf(L)>=0?L:P.UNKNOWN}(w.status);u(new k(N,w.message))}else u(new k(P.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new k(P.UNAVAILABLE,"Connection failed."));break;default:j(9055,{c_:e,streamId:o,l_:l.getLastErrorCode(),h_:l.getLastError()})}}finally{F(nt,`RPC '${e}' ${o} completed.`)}});let h=JSON.stringify(i);F(nt,`RPC '${e}' ${o} sending request:`,i),l.send(n,"POST",h,r,15)})}P_(e,n,r){let i=ym(),s=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=ig(),a=rg(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let h=s.join("");F(nt,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=o.createWebChannel(h,u);this.T_(p);let g=!1,m=!1,w=new vm({Ho:R=>{m?F(nt,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(g||(F(nt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),F(nt,`RPC '${e}' stream ${i} sending:`,R),p.send(R))},Yo:()=>p.close()}),N=(R,O,L)=>{R.listen(O,V=>{try{L(V)}catch(H){setTimeout(()=>{throw H},0)}})};return N(p,Zi.EventType.OPEN,()=>{m||(F(nt,`RPC '${e}' stream ${i} transport opened.`),w.s_())}),N(p,Zi.EventType.CLOSE,()=>{m||(m=!0,F(nt,`RPC '${e}' stream ${i} transport closed`),w.__(),this.I_(p))}),N(p,Zi.EventType.ERROR,R=>{m||(m=!0,cr(nt,`RPC '${e}' stream ${i} transport errored. Name:`,R.name,"Message:",R.message),w.__(new k(P.UNAVAILABLE,"The operation could not be completed")))}),N(p,Zi.EventType.MESSAGE,R=>{var O;if(!m){let L=R.data[0];de(!!L,16349);let V=L,H=V?.error||((O=V[0])===null||O===void 0?void 0:O.error);if(H){F(nt,`RPC '${e}' stream ${i} received error:`,H);let Te=H.status,ce=function(E){let T=ke[E];if(T!==void 0)return $D(T)}(Te),b=H.message;ce===void 0&&(ce=P.INTERNAL,b="Unknown error status: "+Te+" with message "+H.message),m=!0,w.__(new k(ce,b)),p.close()}else F(nt,`RPC '${e}' stream ${i} received:`,L),w.a_(L)}}),N(a,ng.STAT_EVENT,R=>{R.stat===Fu.PROXY?F(nt,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===Fu.NOPROXY&&F(nt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{w.o_()},0),w}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}};function ag(){return typeof document<"u"?document:null}function Nl(t){return new Bg(t,!0)}var al=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=i,this.A_=s,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&F("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var Ub="PersistentStream",cl=class{constructor(e,n,r,i,s,o,a,u){this.Fi=e,this.w_=r,this.S_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new al(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return _(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return _(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,n){return _(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===P.RESOURCE_EXHAUSTED?(kn(n.toString()),kn("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===P.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(n)})}U_(){}auth(){this.state=1;let e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{e(()=>{let i=new k(P.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,n){let r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(()=>_(this,null,function*(){this.state=0,this.start()}))}G_(e){return F(Ub,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(F(Ub,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Em=class extends cl{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let n=qF(this.serializer,e),r=function(s){if(!("targetChange"in s))return W.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?W.min():o.readTime?fn(o.readTime):W.min()}(e);return this.listener.J_(n,r)}H_(e){let n={};n.database=zg(this.serializer),n.addTarget=function(s,o){let a,u=o.target;if(a=Ng(u)?{documents:WF(s,u)}:{query:KF(s,u).Vt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=qD(s,o.resumeToken);let l=Hg(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(W.min())>0){a.readTime=tl(s,o.snapshotVersion.toTimestamp());let l=Hg(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=YF(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){let n={};n.database=zg(this.serializer),n.removeTarget=e,this.k_(n)}},wm=class extends cl{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return de(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,de(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){de(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let n=GF(e.writeResults,e.commitTime),r=fn(e.commitTime);return this.listener.ta(r,n)}na(){let e={};e.database=zg(this.serializer),this.k_(e)}X_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>zF(this.serializer,r))};this.k_(n)}};var Tm=class{},bm=class extends Tm{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new k(P.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Wo(e,$g(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new k(P.UNKNOWN,s.toString())})}Jo(e,n,r,i,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Jo(e,$g(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new k(P.UNKNOWN,o.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},Dm=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(kn(n),this._a=!1):F("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var ci="RemoteStore",Cm=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=s,this.Ea.xo(o=>{r.enqueueAndForget(()=>_(this,null,function*(){li(this)&&(F(ci,"Restarting streams for network reachability change."),yield function(u){return _(this,null,function*(){let l=z(u);l.Ia.add(4),yield Yo(l),l.Aa.set("Unknown"),l.Ia.delete(4),yield Pl(l)})}(this))}))}),this.Aa=new Dm(r,i)}};function Pl(t){return _(this,null,function*(){if(li(t))for(let e of t.da)yield e(!0)})}function Yo(t){return _(this,null,function*(){for(let e of t.da)yield e(!1)})}function eC(t,e){let n=z(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),cy(n)?ay(n):ws(n).x_()&&oy(n,e))}function sy(t,e){let n=z(t),r=ws(n);n.Ta.delete(e),r.x_()&&tC(n,e),n.Ta.size===0&&(r.x_()?r.B_():li(n)&&n.Aa.set("Unknown"))}function oy(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(W.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ws(t).H_(e)}function tC(t,e){t.Ra.$e(e),ws(t).Y_(e)}function ay(t){t.Ra=new jg({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),ws(t).start(),t.Aa.aa()}function cy(t){return li(t)&&!ws(t).M_()&&t.Ta.size>0}function li(t){return z(t).Ia.size===0}function nC(t){t.Ra=void 0}function fL(t){return _(this,null,function*(){t.Aa.set("Online")})}function pL(t){return _(this,null,function*(){t.Ta.forEach((e,n)=>{oy(t,e)})})}function gL(t,e){return _(this,null,function*(){nC(t),cy(t)?(t.Aa.la(e),ay(t)):t.Aa.set("Unknown")})}function mL(t,e,n){return _(this,null,function*(){if(t.Aa.set("Online"),e instanceof Xu&&e.state===2&&e.cause)try{yield function(i,s){return _(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.Ta.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.Ta.delete(a),i.Ra.removeTarget(a))})}(t,e)}catch(r){F(ci,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield ul(t,r)}else if(e instanceof is?t.Ra.Ye(e):e instanceof Zu?t.Ra.it(e):t.Ra.et(e),!n.isEqual(W.min()))try{let r=yield XD(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){let a=s.Ra.Pt(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=s.Ta.get(l);h&&s.Ta.set(l,h.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{let h=s.Ta.get(u);if(!h)return;s.Ta.set(u,h.withResumeToken(rt.EMPTY_BYTE_STRING,h.snapshotVersion)),tC(s,u);let p=new qo(h.target,u,l,h.sequenceNumber);oy(s,p)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){F(ci,"Failed to raise snapshot:",r),yield ul(t,r)}})}function ul(t,e,n){return _(this,null,function*(){if(!Es(e))throw e;t.Ia.add(1),yield Yo(t),t.Aa.set("Offline"),n||(n=()=>XD(t.localStore)),t.asyncQueue.enqueueRetryable(()=>_(null,null,function*(){F(ci,"Retrying IndexedDB access"),yield n(),t.Ia.delete(1),yield Pl(t)}))})}function rC(t,e){return e().catch(n=>ul(t,n,e))}function Ml(t){return _(this,null,function*(){let e=z(t),n=dr(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Km;for(;yL(e);)try{let i=yield uL(e.localStore,r);if(i===null){e.Pa.length===0&&n.B_();break}r=i.batchId,_L(e,i)}catch(i){yield ul(e,i)}iC(e)&&sC(e)})}function yL(t){return li(t)&&t.Pa.length<10}function _L(t,e){t.Pa.push(e);let n=dr(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function iC(t){return li(t)&&!dr(t).M_()&&t.Pa.length>0}function sC(t){dr(t).start()}function vL(t){return _(this,null,function*(){dr(t).na()})}function IL(t){return _(this,null,function*(){let e=dr(t);for(let n of t.Pa)e.X_(n.mutations)})}function EL(t,e,n){return _(this,null,function*(){let r=t.Pa.shift(),i=Fg.from(r,e,n);yield rC(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield Ml(t)})}function wL(t,e){return _(this,null,function*(){e&&dr(t).Z_&&(yield function(r,i){return _(this,null,function*(){if(function(o){return LF(o)&&o!==P.ABORTED}(i.code)){let s=r.Pa.shift();dr(r).N_(),yield rC(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield Ml(r)}})}(t,e)),iC(t)&&sC(t)})}function jb(t,e){return _(this,null,function*(){let n=z(t);n.asyncQueue.verifyOperationInProgress(),F(ci,"RemoteStore received new credentials");let r=li(n);n.Ia.add(3),yield Yo(n),r&&n.Aa.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),yield Pl(n)})}function TL(t,e){return _(this,null,function*(){let n=z(t);e?(n.Ia.delete(2),yield Pl(n)):e||(n.Ia.add(2),yield Yo(n),n.Aa.set("Unknown"))})}function ws(t){return t.Va||(t.Va=function(n,r,i){let s=z(n);return s.ia(),new Em(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Zo:fL.bind(null,t),e_:pL.bind(null,t),n_:gL.bind(null,t),J_:mL.bind(null,t)}),t.da.push(e=>_(null,null,function*(){e?(t.Va.N_(),cy(t)?ay(t):t.Aa.set("Unknown")):(yield t.Va.stop(),nC(t))}))),t.Va}function dr(t){return t.ma||(t.ma=function(n,r,i){let s=z(n);return s.ia(),new wm(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:vL.bind(null,t),n_:wL.bind(null,t),ea:IL.bind(null,t),ta:EL.bind(null,t)}),t.da.push(e=>_(null,null,function*(){e?(t.ma.N_(),yield Ml(t)):(yield t.ma.stop(),t.Pa.length>0&&(F(ci,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))}))),t.ma}var Sm=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new $t,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,a=new t(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new k(P.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function uy(t,e){if(kn("AsyncQueue",`${e}: ${t}`),Es(t))return new k(P.UNAVAILABLE,`${e}: ${t}`);throw t}var ll=class t{static emptySet(e){return new t(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||U.comparator(n.key,r.key):(n,r)=>U.comparator(n.key,r.key),this.keyedMap=Mo(),this.sortedSet=new Ae(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var dl=class{constructor(){this.fa=new Ae(U.comparator)}track(e){let n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):j(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){let e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}},ms=class t{constructor(e,n,r,i,s,o,a,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,s){let o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new t(e,n,ll.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Al(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var Am=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},Rm=class{constructor(){this.queries=Bb(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){let i=z(n),s=i.queries;i.queries=Bb(),s.forEach((o,a)=>{for(let u of a.wa)u.onError(r)})})(this,new k(P.ABORTED,"Firestore shutting down"))}};function Bb(){return new Ln(t=>PD(t),Al)}function oC(t,e){return _(this,null,function*(){let n=z(t),r=3,i=e.query,s=n.queries.get(i);s?!s.Sa()&&e.ba()&&(r=2):(s=new Am,r=e.ba()?0:1);try{switch(r){case 0:s.ya=yield n.onListen(i,!0);break;case 1:s.ya=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(o){let a=uy(o,`Initialization of query '${es(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.wa.push(e),e.va(n.onlineState),s.ya&&e.Ca(s.ya)&&ly(n)})}function aC(t,e){return _(this,null,function*(){let n=z(t),r=e.query,i=3,s=n.queries.get(r);if(s){let o=s.wa.indexOf(e);o>=0&&(s.wa.splice(o,1),s.wa.length===0?i=e.ba()?0:1:!s.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function bL(t,e){let n=z(t),r=!1;for(let i of e){let s=i.query,o=n.queries.get(s);if(o){for(let a of o.wa)a.Ca(i)&&(r=!0);o.ya=i}}r&&ly(n)}function DL(t,e,n){let r=z(t),i=r.queries.get(e);if(i)for(let s of i.wa)s.onError(n);r.queries.delete(e)}function ly(t){t.Da.forEach(e=>{e.next()})}var Nm,Hb;(Hb=Nm||(Nm={})).Fa="default",Hb.Cache="cache";var hl=class{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new ms(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;let r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=ms.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Nm.Cache}};var fl=class{constructor(e){this.key=e}},pl=class{constructor(e){this.key=e}},Pm=class{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=re(),this.mutatedKeys=re(),this.Xa=MD(e),this.eu=new ll(this.Xa)}get tu(){return this.Ha}nu(e,n){let r=n?n.ru:new dl,i=n?n.eu:this.eu,s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let g=i.get(h),m=Rl(this.query,p)?p:null,w=!!g&&this.mutatedKeys.has(g.key),N=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations),R=!1;g&&m?g.data.isEqual(m.data)?w!==N&&(r.track({type:3,doc:m}),R=!0):this.iu(g,m)||(r.track({type:2,doc:m}),R=!0,(u&&this.Xa(m,u)>0||l&&this.Xa(m,l)<0)&&(a=!0)):!g&&m?(r.track({type:0,doc:m}),R=!0):g&&!m&&(r.track({type:1,doc:g}),R=!0,(u||l)&&(a=!0)),R&&(m?(o=o.add(m),s=N?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{eu:o,ru:r,Ds:a,mutatedKeys:s}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let s=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let o=e.ru.pa();o.sort((h,p)=>function(m,w){let N=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return j(20277,{At:R})}};return N(m)-N(w)}(h.type,p.type)||this.Xa(h.doc,p.doc)),this.su(r),i=i!=null&&i;let a=n&&!i?this.ou():[],u=this.Za.size===0&&this.current&&!i?1:0,l=u!==this.Ya;return this.Ya=u,o.length!==0||l?{snapshot:new ms(this.query,e.eu,s,o,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new dl,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=re(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new pl(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new fl(r))}),n}uu(e){this.Ha=e.qs,this.Za=re();let n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return ms.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},dy="SyncEngine",Mm=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},xm=class{constructor(e){this.key=e,this.lu=!1}},km=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new Ln(a=>PD(a),Al),this.Tu=new Map,this.Iu=new Set,this.du=new Ae(U.comparator),this.Eu=new Map,this.Au=new Go,this.Ru={},this.Vu=new Map,this.mu=zo.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};function CL(t,e,n=!0){return _(this,null,function*(){let r=fC(t),i,s=r.Pu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.cu()):i=yield cC(r,e,n,!0),i})}function SL(t,e){return _(this,null,function*(){let n=fC(t);yield cC(n,e,!0,!1)})}function cC(t,e,n,r){return _(this,null,function*(){let i=yield lL(t.localStore,dn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n),a;return r&&(a=yield AL(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&eC(t.remoteStore,i),a})}function AL(t,e,n,r,i){return _(this,null,function*(){t.gu=(p,g,m)=>function(N,R,O,L){return _(this,null,function*(){let V=R.view.nu(O);V.Ds&&(V=yield Lb(N.localStore,R.query,!1).then(({documents:b})=>R.view.nu(b,V)));let H=L&&L.targetChanges.get(R.targetId),Te=L&&L.targetMismatches.get(R.targetId)!=null,ce=R.view.applyChanges(V,N.isPrimaryClient,H,Te);return qb(N,R.targetId,ce._u),ce.snapshot})}(t,p,g,m);let s=yield Lb(t.localStore,e,!0),o=new Pm(e,s.qs),a=o.nu(s.documents),u=$o.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=o.applyChanges(a,t.isPrimaryClient,u);qb(t,n,l._u);let h=new Mm(e,n,o);return t.Pu.set(e,h),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),l.snapshot})}function RL(t,e,n){return _(this,null,function*(){let r=z(t),i=r.Pu.get(e),s=r.Tu.get(i.targetId);if(s.length>1)return r.Tu.set(i.targetId,s.filter(o=>!Al(o,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield pm(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&sy(r.remoteStore,i.targetId),Om(r,i.targetId)}).catch(Is))):(Om(r,i.targetId),yield pm(r.localStore,i.targetId,!0))})}function NL(t,e){return _(this,null,function*(){let n=z(t),r=n.Pu.get(e),i=n.Tu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),sy(n.remoteStore,r.targetId))})}function PL(t,e,n){return _(this,null,function*(){let r=VL(t);try{let i=yield function(o,a){let u=z(o),l=ge.now(),h=a.reduce((m,w)=>m.add(w.key),re()),p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",m=>{let w=Vn(),N=re();return u.Os.getEntries(m,h).next(R=>{w=R,w.forEach((O,L)=>{L.isValidDocument()||(N=N.add(O))})}).next(()=>u.localDocuments.getOverlayedDocuments(m,w)).next(R=>{p=R;let O=[];for(let L of a){let V=FF(L,p.get(L.key).overlayedDocument);V!=null&&O.push(new gn(L.key,V,bD(V.value.mapValue),hn.exists(!0)))}return u.mutationQueue.addMutationBatch(m,l,O,a)}).next(R=>{g=R;let O=R.applyToLocalDocumentSet(p,N);return u.documentOverlayCache.saveOverlays(m,R.batchId,O)})}).then(()=>({batchId:g.batchId,changes:kD(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.Ru[o.currentUser.toKey()];l||(l=new Ae(Z)),l=l.insert(a,u),o.Ru[o.currentUser.toKey()]=l}(r,i.batchId,n),yield Jo(r,i.changes),yield Ml(r.remoteStore)}catch(i){let s=uy(i,"Failed to persist write");n.reject(s)}})}function uC(t,e){return _(this,null,function*(){let n=z(t);try{let r=yield aL(n.localStore,e);e.targetChanges.forEach((i,s)=>{let o=n.Eu.get(s);o&&(de(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.lu=!0:i.modifiedDocuments.size>0?de(o.lu,14607):i.removedDocuments.size>0&&(de(o.lu,42227),o.lu=!1))}),yield Jo(n,r,e)}catch(r){yield Is(r)}})}function $b(t,e,n){let r=z(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Pu.forEach((s,o)=>{let a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let u=z(o);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let g of p.wa)g.va(a)&&(l=!0)}),l&&ly(u)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function ML(t,e,n){return _(this,null,function*(){let r=z(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Eu.get(e),s=i&&i.key;if(s){let o=new Ae(U.comparator);o=o.insert(s,zt.newNoDocument(s,W.min()));let a=re().add(s),u=new Ju(W.min(),new Map,new Ae(Z),o,a);yield uC(r,u),r.du=r.du.remove(s),r.Eu.delete(e),hy(r)}else yield pm(r.localStore,e,!1).then(()=>Om(r,e,n)).catch(Is)})}function xL(t,e){return _(this,null,function*(){let n=z(t),r=e.batch.batchId;try{let i=yield oL(n.localStore,e);dC(n,r,null),lC(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Jo(n,i)}catch(i){yield Is(i)}})}function kL(t,e,n){return _(this,null,function*(){let r=z(t);try{let i=yield function(o,a){let u=z(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(de(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);dC(r,e,n),lC(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Jo(r,i)}catch(i){yield Is(i)}})}function lC(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function dC(t,e,n){let r=z(t),i=r.Ru[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function Om(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||hC(t,r)})}function hC(t,e){t.Iu.delete(e.path.canonicalString());let n=t.du.get(e);n!==null&&(sy(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),hy(t))}function qb(t,e,n){for(let r of n)r instanceof fl?(t.Au.addReference(r.key,e),OL(t,r)):r instanceof pl?(F(dy,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||hC(t,r.key)):j(19791,{yu:r})}function OL(t,e){let n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(F(dy,"New document in limbo: "+n),t.Iu.add(r),hy(t))}function hy(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){let e=t.Iu.values().next().value;t.Iu.delete(e);let n=new U(we.fromString(e)),r=t.mu.next();t.Eu.set(r,new xm(n)),t.du=t.du.insert(n,r),eC(t.remoteStore,new qo(dn(ty(n.path)),r,"TargetPurposeLimboResolution",Wm.ue))}}function Jo(t,e,n){return _(this,null,function*(){let r=z(t),i=[],s=[],o=[];r.Pu.isEmpty()||(r.Pu.forEach((a,u)=>{o.push(r.gu(u,e,n).then(l=>{var h;if((l||n)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=n?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=lm.Es(u.targetId,l);s.push(p)}}))}),yield Promise.all(o),r.hu.J_(i),yield function(u,l){return _(this,null,function*(){let h=z(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>M.forEach(l,g=>M.forEach(g.Is,m=>h.persistence.referenceDelegate.addReference(p,g.targetId,m)).next(()=>M.forEach(g.ds,m=>h.persistence.referenceDelegate.removeReference(p,g.targetId,m)))))}catch(p){if(!Es(p))throw p;F(iy,"Failed to update sequence numbers: "+p)}for(let p of l){let g=p.targetId;if(!p.fromCache){let m=h.Fs.get(g),w=m.snapshotVersion,N=m.withLastLimboFreeSnapshotVersion(w);h.Fs=h.Fs.insert(g,N)}}})}(r.localStore,s))})}function FL(t,e){return _(this,null,function*(){let n=z(t);if(!n.currentUser.isEqual(e)){F(dy,"User change. New user:",e.toKey());let r=yield ZD(n.localStore,e);n.currentUser=e,function(s,o){s.Vu.forEach(a=>{a.forEach(u=>{u.reject(new k(P.CANCELLED,o))})}),s.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Jo(n,r.Bs)}})}function LL(t,e){let n=z(t),r=n.Eu.get(e);if(r&&r.lu)return re().add(r.key);{let i=re(),s=n.Tu.get(e);if(!s)return i;for(let o of s){let a=n.Pu.get(o);i=i.unionWith(a.view.tu)}return i}}function fC(t){let e=z(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=uC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=LL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ML.bind(null,e),e.hu.J_=bL.bind(null,e.eventManager),e.hu.pu=DL.bind(null,e.eventManager),e}function VL(t){let e=z(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=xL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=kL.bind(null,e),e}var pC=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(n){return _(this,null,function*(){this.serializer=Nl(n.databaseInfo.databaseId),this.sharedClientState=this.bu(n),this.persistence=this.Du(n),yield this.persistence.start(),this.localStore=this.vu(n),this.gcScheduler=this.Cu(n,this.localStore),this.indexBackfillerScheduler=this.Fu(n,this.localStore)})}Cu(n,r){return null}Fu(n,r){return null}vu(n){return sL(this.persistence,new hm,n.initialUser,this.serializer)}Du(n){return new rl(um.Vi,this.serializer)}bu(n){return new gm}terminate(){return _(this,null,function*(){var n,r;(n=this.gcScheduler)===null||n===void 0||n.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return t.provider={build:()=>new t},t})(),Fm=class extends pC{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){de(this.persistence.referenceDelegate instanceof il,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new Yg(r,e.asyncQueue,n)}Du(e){let n=this.cacheSizeBytes!==void 0?Nt.withCacheSize(this.cacheSizeBytes):Nt.DEFAULT;return new rl(r=>il.Vi(r,n),this.serializer)}};var UL=(()=>{class t{initialize(n,r){return _(this,null,function*(){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>$b(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=FL.bind(null,this.syncEngine),yield TL(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(n){return function(){return new Rm}()}createDatastore(n){let r=Nl(n.databaseInfo.databaseId),i=function(o){return new Im(o)}(n.databaseInfo);return function(o,a,u,l){return new bm(o,a,u,l)}(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return function(i,s,o,a,u){return new Cm(i,s,o,a,u)}(this.localStore,this.datastore,n.asyncQueue,r=>$b(this.syncEngine,r,0),function(){return ol.C()?new ol:new mm}())}createSyncEngine(n,r){return function(s,o,a,u,l,h,p){let g=new km(s,o,a,u,l,h);return p&&(g.fu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){return _(this,null,function*(){var n,r;yield function(s){return _(this,null,function*(){let o=z(s);F(ci,"RemoteStore shutting down."),o.Ia.add(5),yield Yo(o),o.Ea.shutdown(),o.Aa.set("Unknown")})}(this.remoteStore),(n=this.datastore)===null||n===void 0||n.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return t.provider={build:()=>new t},t})();var gl=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):kn("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var hr="FirestoreClient",Lm=class{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=He.UNAUTHENTICATED,this.clientId=Lo.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,o=>_(this,null,function*(){F(hr,"Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(F(hr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new $t;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>_(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=uy(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function cg(t,e){return _(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),F(hr,"Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>_(null,null,function*(){r.isEqual(i)||(yield ZD(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>{cr("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{F("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{cr("Terminating Firestore due to IndexedDb database deletion failed",i)})}),t._offlineComponents=e})}function zb(t,e){return _(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield jL(t);F(hr,"Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>jb(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>jb(e.remoteStore,i)),t._onlineComponents=e})}function jL(t){return _(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){F(hr,"Using user provided OfflineComponentProvider");try{yield cg(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!function(i){return i.name==="FirebaseError"?i.code===P.FAILED_PRECONDITION||i.code===P.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;cr("Error using user provided cache. Falling back to memory cache: "+n),yield cg(t,new pC)}}else F(hr,"Using default OfflineComponentProvider"),yield cg(t,new Fm(void 0));return t._offlineComponents})}function gC(t){return _(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(F(hr,"Using user provided OnlineComponentProvider"),yield zb(t,t._uninitializedComponentsProvider._online)):(F(hr,"Using default OnlineComponentProvider"),yield zb(t,new UL))),t._onlineComponents})}function BL(t){return gC(t).then(e=>e.syncEngine)}function mC(t){return _(this,null,function*(){let e=yield gC(t),n=e.eventManager;return n.onListen=CL.bind(null,e.syncEngine),n.onUnlisten=RL.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=SL.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=NL.bind(null,e.syncEngine),n})}function HL(t,e,n={}){let r=new $t;return t.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return function(s,o,a,u,l){let h=new gl({next:g=>{h.Ou(),o.enqueueAndForget(()=>aC(s,p));let m=g.docs.has(a);!m&&g.fromCache?l.reject(new k(P.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&g.fromCache&&u&&u.source==="server"?l.reject(new k(P.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(g)},error:g=>l.reject(g)}),p=new hl(ty(a.path),h,{includeMetadataChanges:!0,ka:!0});return oC(s,p)}(yield mC(t),t.asyncQueue,e,n,r)})),r.promise}function $L(t,e,n={}){let r=new $t;return t.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return function(s,o,a,u,l){let h=new gl({next:g=>{h.Ou(),o.enqueueAndForget(()=>aC(s,p)),g.fromCache&&u.source==="server"?l.reject(new k(P.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(g)},error:g=>l.reject(g)}),p=new hl(a,h,{includeMetadataChanges:!0,ka:!0});return oC(s,p)}(yield mC(t),t.asyncQueue,e,n,r)})),r.promise}function yC(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var Gb=new Map;var _C="firestore.googleapis.com",Wb=!0,ml=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new k(P.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=_C,this.ssl=Wb}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:Wb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=JD;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<nL)throw new k(P.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}eF("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=yC((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new k(P.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new k(P.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new k(P.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},ys=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ml({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new k(P.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new k(P.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ml(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new ug;switch(r.type){case"firstParty":return new fg(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new k(P.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return _(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=Gb.get(n);r&&(F("ComponentProvider","Removing Datastore"),Gb.delete(n),r.terminate())}(this),Promise.resolve()}};function qL(t,e,n,r={}){var i;t=qt(t,ys);let s=Ht(e),o=t._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${n}`;s&&(Wi(`https://${u}`),Ki("Firestore",!0)),o.host!==_C&&o.host!==u&&cr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},o),{host:u,ssl:s,emulatorOptions:r});if(!on(l,a)&&(t._setSettings(l),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=He.MOCK_USER;else{h=Pu(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new k(P.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new He(g)}t._authCredentials=new lg(new $u(h,p))}}var ui=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},qe=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ir(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}toJSON(){return{type:t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Qo(n,t._jsonSchema))return new t(e,r||null,new U(we.fromString(n.referencePath)))}};qe._jsonSchemaVersion="firestore/documentReference/1.0",qe._jsonSchema={type:Le("string",qe._jsonSchemaVersion),referencePath:Le("string")};var ir=class t extends ui{constructor(e,n,r){super(e,n,ty(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new qe(this.firestore,null,new U(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function it(t,e,...n){if(t=Ie(t),eD("collection","path",e),t instanceof ys){let r=we.fromString(e,...n);return db(r),new ir(t,null,r)}{if(!(t instanceof qe||t instanceof ir))throw new k(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(we.fromString(e,...n));return db(r),new ir(t.firestore,null,r)}}function Wt(t,e,...n){if(t=Ie(t),arguments.length===1&&(e=Lo.newId()),eD("doc","path",e),t instanceof ys){let r=we.fromString(e,...n);return lb(r),new qe(t,null,new U(r))}{if(!(t instanceof qe||t instanceof ir))throw new k(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(we.fromString(e,...n));return lb(r),new qe(t.firestore,t instanceof ir?t.converter:null,new U(r))}}var Kb="AsyncQueue",yl=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new al(this,"async_queue_retry"),this.oc=()=>{let r=ag();r&&F(Kb,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let n=ag();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let n=ag();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let n=new $t;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return _(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Es(e))throw e;F(Kb,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,kn("INTERNAL UNHANDLED ERROR: ",Qb(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);let i=Sm.createAndSchedule(this,e,n,r,s=>this.lc(s));return this.ec.push(i),i}ac(){this.tc&&j(47125,{hc:Qb(this.tc)})}verifyOperationInProgress(){}Pc(){return _(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let n=this.ec.indexOf(e);this.ec.splice(n,1)}};function Qb(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}var Un=class extends ys{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new yl,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return _(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new yl(e),this._firestoreClient=void 0,yield e}})}};function vC(t,e){let n=typeof t=="object"?t:Ji(),r=typeof t=="string"?t:e||Ku,i=Jr(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=Nu("firestore");s&&qL(i,...s)}return i}function fy(t){if(t._terminated)throw new k(P.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||zL(t),t._firestoreClient}function zL(t){var e,n,r;let i=t._freezeSettings(),s=function(a,u,l,h){return new _g(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,yC(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new Lm(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(t._componentsProvider))}var sr=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(rt.fromBase64String(e))}catch(n){throw new k(P.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(rt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:t._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Qo(e,t._jsonSchema))return t.fromBase64String(e.bytes)}};sr._jsonSchemaVersion="firestore/bytes/1.0",sr._jsonSchema={type:Le("string",sr._jsonSchemaVersion),bytes:Le("string")};var _s=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new k(P.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ct(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Wo=class{constructor(e){this._methodName=e}};var or=class t{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new k(P.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new k(P.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Z(this._lat,e._lat)||Z(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:t._jsonSchemaVersion}}static fromJSON(e){if(Qo(e,t._jsonSchema))return new t(e.latitude,e.longitude)}};or._jsonSchemaVersion="firestore/geoPoint/1.0",or._jsonSchema={type:Le("string",or._jsonSchemaVersion),latitude:Le("number"),longitude:Le("number")};var ar=class t{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:t._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Qo(e,t._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new t(e.vectorValues);throw new k(P.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};ar._jsonSchemaVersion="firestore/vectorValue/1.0",ar._jsonSchema={type:Le("string",ar._jsonSchemaVersion),vectorValues:Le("object")};var GL=/^__.*__$/,Vm=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new gn(e,this.data,this.fieldMask,n,this.fieldTransforms):new ai(e,this.data,n,this.fieldTransforms)}},_l=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new gn(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function IC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw j(40011,{Ec:t})}}var Um=class t{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Ac(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Il(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(IC(this.Ec)&&GL.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},jm=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Nl(e)}Dc(e,n,r,i=!1){return new Um({Ec:e,methodName:n,bc:r,path:Ct.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function xl(t){let e=t._freezeSettings(),n=Nl(t._databaseId);return new jm(t._databaseId,!!e.ignoreUndefinedProperties,n)}function EC(t,e,n,r,i,s={}){let o=t.Dc(s.merge||s.mergeFields?2:0,e,n,i);py("Data must be an object, but it was:",o,r);let a=wC(r,o),u,l;if(s.merge)u=new Pt(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let h=[];for(let p of s.mergeFields){let g=Bm(e,p,n);if(!o.contains(g))throw new k(P.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);bC(h,g)||h.push(g)}u=new Pt(h),l=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=o.fieldTransforms;return new Vm(new Dt(a),u,l)}var vl=class t extends Wo{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function WL(t,e,n,r){let i=t.Dc(1,e,n);py("Data must be an object, but it was:",i,r);let s=[],o=Dt.empty();fr(r,(u,l)=>{let h=gy(e,u,n);l=Ie(l);let p=i.gc(h);if(l instanceof vl)s.push(h);else{let g=Zo(l,p);g!=null&&(s.push(h),o.set(h,g))}});let a=new Pt(s);return new _l(o,a,i.fieldTransforms)}function KL(t,e,n,r,i,s){let o=t.Dc(1,e,n),a=[Bm(e,r,n)],u=[i];if(s.length%2!=0)throw new k(P.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<s.length;g+=2)a.push(Bm(e,s[g])),u.push(s[g+1]);let l=[],h=Dt.empty();for(let g=a.length-1;g>=0;--g)if(!bC(l,a[g])){let m=a[g],w=u[g];w=Ie(w);let N=o.gc(m);if(w instanceof vl)l.push(m);else{let R=Zo(w,N);R!=null&&(l.push(m),h.set(m,R))}}let p=new Pt(l);return new _l(h,p,o.fieldTransforms)}function QL(t,e,n,r=!1){return Zo(n,t.Dc(r?4:3,e))}function Zo(t,e){if(TC(t=Ie(t)))return py("Unsupported field value:",e,t),wC(t,e);if(t instanceof Wo)return function(r,i){if(!IC(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let u=Zo(a,i.yc(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Ie(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return PF(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=ge.fromDate(r);return{timestampValue:tl(i.serializer,s)}}if(r instanceof ge){let s=new ge(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:tl(i.serializer,s)}}if(r instanceof or)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof sr)return{bytesValue:qD(i.serializer,r._byteString)};if(r instanceof qe){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.wc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:ry(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ar)return function(o,a){return{mapValue:{fields:{[Ym]:{stringValue:Jm},[cs]:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.wc("VectorValues must only contain numeric values.");return ny(a.serializer,l)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${Dl(r)}`)}(t,e)}function wC(t,e){let n={};return mD(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):fr(t,(r,i)=>{let s=Zo(i,e.Vc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function TC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ge||t instanceof or||t instanceof sr||t instanceof qe||t instanceof Wo||t instanceof ar)}function py(t,e,n){if(!TC(n)||!tD(n)){let r=Dl(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function Bm(t,e,n){if((e=Ie(e))instanceof _s)return e._internalPath;if(typeof e=="string")return gy(t,e);throw Il("Field path arguments must be of type string or ",t,!1,void 0,n)}var YL=new RegExp("[~\\*/\\[\\]]");function gy(t,e,n){if(e.search(YL)>=0)throw Il(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new _s(...e.split("."))._internalPath}catch{throw Il(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Il(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new k(P.INVALID_ARGUMENT,a+t+u)}function bC(t,e){return t.some(n=>n.isEqual(e))}var El=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new qe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Hm(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(kl("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},Hm=class extends El{data(){return super.data()}};function kl(t,e){return typeof e=="string"?gy(t,e):e instanceof _s?e._internalPath:e._delegate._internalPath}function JL(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new k(P.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Ko=class{},wl=class extends Ko{};function jn(t,e,...n){let r=[];e instanceof Ko&&r.push(e),r=r.concat(n),function(s){let o=s.filter(u=>u instanceof $m).length,a=s.filter(u=>u instanceof Tl).length;if(o>1||o>0&&a>0)throw new k(P.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var Tl=class t extends wl{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return DC(e._query,n),new ui(e.firestore,e.converter,Pg(e._query,n))}_parse(e){let n=xl(e.firestore);return function(s,o,a,u,l,h,p){let g;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new k(P.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Jb(p,h);let w=[];for(let N of p)w.push(Yb(u,s,N));g={arrayValue:{values:w}}}else g=Yb(u,s,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Jb(p,h),g=QL(a,o,p,h==="in"||h==="not-in");return Fe.create(l,h,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function pr(t,e,n){let r=e,i=kl("where",t);return Tl._create(i,r,n)}var $m=class t extends Ko{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Gt.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i,a=s.getFlattenedFilters();for(let u of a)DC(o,u),o=Pg(o,u)}(e._query,n),new ui(e.firestore,e.converter,Pg(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var qm=class t extends wl{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(i,s,o){if(i.startAt!==null)throw new k(P.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new k(P.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ii(s,o)}(e._query,this._field,this._direction);return new ui(e.firestore,e.converter,function(i,s){let o=i.explicitOrderBy.concat([s]);return new lr(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}};function gr(t,e="asc"){let n=e,r=kl("orderBy",t);return qm._create(r,n)}function Yb(t,e,n){if(typeof(n=Ie(n))=="string"){if(n==="")throw new k(P.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ND(e)&&n.indexOf("/")!==-1)throw new k(P.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(we.fromString(n));if(!U.isDocumentKey(r))throw new k(P.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return _b(t,new U(r))}if(n instanceof qe)return _b(t,n._key);throw new k(P.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Dl(n)}.`)}function Jb(t,e){if(!Array.isArray(t)||t.length===0)throw new k(P.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function DC(t,e){let n=function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new k(P.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new k(P.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var zm=class{convertValue(e,n="none"){switch(ur(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ee(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Fn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw j(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return fr(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;let s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[cs].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Ee(o.doubleValue));return new ar(s)}convertGeoPoint(e){return new or(Ee(e.latitude),Ee(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=Sl(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(jo(e));default:return null}}convertTimestamp(e){let n=On(e);return new ge(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=we.fromString(e);de(YD(r),9688,{name:e});let i=new Qu(r.get(1),r.get(3)),s=new U(r.popFirst(5));return i.isEqual(n)||kn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function CC(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var ei=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},ti=class t extends El{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new ss(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(kl("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new k(P.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,n={};return n.type=t._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};ti._jsonSchemaVersion="firestore/documentSnapshot/1.0",ti._jsonSchema={type:Le("string",ti._jsonSchemaVersion),bundleSource:Le("string","DocumentSnapshot"),bundleName:Le("string"),bundle:Le("string")};var ss=class extends ti{data(e={}){return super.data(e)}},os=class t{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ei(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ss(this._firestore,this._userDataWriter,r.key,r,new ei(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new k(P.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let u=new ss(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ei(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let u=new ss(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ei(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:ZL(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new k(P.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=t._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Lo.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function ZL(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return j(61501,{type:t})}}function Ol(t){t=qt(t,qe);let e=qt(t.firestore,Un);return HL(fy(e),t._key).then(n=>XL(e,t,n))}os._jsonSchemaVersion="firestore/querySnapshot/1.0",os._jsonSchema={type:Le("string",os._jsonSchemaVersion),bundleSource:Le("string","QuerySnapshot"),bundleName:Le("string"),bundle:Le("string")};var bl=class extends zm{constructor(e){super(),this.firestore=e}convertBytes(e){return new sr(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new qe(this.firestore,null,n)}};function Kt(t){t=qt(t,ui);let e=qt(t.firestore,Un),n=fy(e),r=new bl(e);return JL(t._query),$L(n,t._query).then(i=>new os(e,r,t,i))}function SC(t,e,n){t=qt(t,qe);let r=qt(t.firestore,Un),i=CC(t.converter,e,n);return Fl(r,[EC(xl(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,hn.none())])}function Xo(t,e,n,...r){t=qt(t,qe);let i=qt(t.firestore,Un),s=xl(i),o;return o=typeof(e=Ie(e))=="string"||e instanceof _s?KL(s,"updateDoc",t._key,e,n,r):WL(s,"updateDoc",t._key,e),Fl(i,[o.toMutation(t._key,hn.exists(!0))])}function AC(t){return Fl(qt(t.firestore,Un),[new Ho(t._key,hn.none())])}function Ts(t,e){let n=qt(t.firestore,Un),r=Wt(t),i=CC(t.converter,e);return Fl(n,[EC(xl(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,hn.exists(!1))]).then(()=>r)}function Fl(t,e){return function(r,i){let s=new $t;return r.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return PL(yield BL(r),i,s)})),s.promise}(fy(t),e)}function XL(t,e,n){let r=n.docs.get(e._key),i=new bl(t);return new ti(t,i,e._key,r,new ei(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){vs=i})(un),cn(new _t("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new Un(new dg(r.getProvider("auth-internal")),new pg(o,r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new k(P.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Qu(l.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),vt(ob,ab,e),vt(ob,ab,"esm2017")})();function qC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var zC=qC,GC=new Nn("auth","Firebase",qC());var Hl=new nr("@firebase/auth");function eV(t,...e){Hl.logLevel<=ee.WARN&&Hl.warn(`Auth (${un}): ${t}`,...e)}function Vl(t,...e){Hl.logLevel<=ee.ERROR&&Hl.error(`Auth (${un}): ${t}`,...e)}function yn(t,...e){throw jy(t,...e)}function di(t,...e){return jy(t,...e)}function WC(t,e,n){let r=Object.assign(Object.assign({},zC()),{[e]:n});return new Nn("auth","Firebase",r).create(e,{appName:t.name})}function $n(t){return WC(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function jy(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return GC.create(t,...e)}function B(t,e,...n){if(!t)throw jy(e,...n)}function Bn(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Vl(e),new Error(e)}function _r(t,e){t||Bn(e)}function vy(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function tV(){return RC()==="http:"||RC()==="https:"}function RC(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function nV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(tV()||LT()||"connection"in navigator)?navigator.onLine:!0}function rV(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var hi=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,_r(n>e,"Short delay should be less than long delay!"),this.isMobile=OT()||VT()}get(){return nV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function By(t,e){_r(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var $l=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Bn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Bn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Bn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var iV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var sV=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],oV=new hi(3e4,6e4);function vr(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function Ir(s,o,a,u){return _(this,arguments,function*(t,e,n,r,i={}){return KC(t,i,()=>_(null,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=Ro(Object.assign({key:t.config.apiKey},h)).slice(1),g=yield t._getAdditionalHeaders();g["Content-Type"]="application/json",t.languageCode&&(g["X-Firebase-Locale"]=t.languageCode);let m=Object.assign({method:e,headers:g},l);return FT()||(m.referrerPolicy="no-referrer"),t.emulatorConfig&&Ht(t.emulatorConfig.host)&&(m.credentials="include"),$l.fetch()(yield QC(t,t.config.apiHost,n,p),m)}))})}function KC(t,e,n){return _(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},iV),e);try{let i=new Iy(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Ll(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ll(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Ll(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Ll(t,"user-disabled",o);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw WC(t,h,l);yn(t,h)}}catch(i){if(i instanceof lt)throw i;yn(t,"network-request-failed",{message:String(i)})}})}function ca(s,o,a,u){return _(this,arguments,function*(t,e,n,r,i={}){let l=yield Ir(t,e,n,r,i);return"mfaPendingCredential"in l&&yn(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function QC(t,e,n,r){return _(this,null,function*(){let i=`${e}${n}?${r}`,s=t,o=s.config.emulator?By(t.config,i):`${t.config.apiScheme}://${i}`;return sV.includes(n)&&(yield s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o})}function aV(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var Iy=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(di(this.auth,"network-request-failed")),oV.get())})}};function Ll(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=di(t,e,r);return i.customData._tokenResponse=n,i}function NC(t){return t!==void 0&&t.enterprise!==void 0}var Ey=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return aV(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function cV(t,e){return _(this,null,function*(){return Ir(t,"GET","/v2/recaptchaConfig",vr(t,e))})}function uV(t,e){return _(this,null,function*(){return Ir(t,"POST","/v1/accounts:delete",e)})}function ql(t,e){return _(this,null,function*(){return Ir(t,"POST","/v1/accounts:lookup",e)})}function ta(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function YC(t,e=!1){return _(this,null,function*(){let n=Ie(t),r=yield n.getIdToken(e),i=Hy(r);B(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:ta(my(i.auth_time)),issuedAtTime:ta(my(i.iat)),expirationTime:ta(my(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function my(t){return Number(t)*1e3}function Hy(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Vl("JWT malformed, contained fewer than 3 sections"),null;try{let i=Au(n);return i?JSON.parse(i):(Vl("Failed to decode base64 JWT payload"),null)}catch(i){return Vl("Caught error parsing JWT payload as JSON",i?.toString()),null}}function PC(t){let e=Hy(t);return B(e,"internal-error"),B(typeof e.exp<"u","internal-error"),B(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function ra(t,e,n=!1){return _(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof lt&&lV(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function lV({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var wy=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>_(this,null,function*(){yield this.iteration()}),n)}iteration(){return _(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var ia=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ta(this.lastLoginAt),this.creationTime=ta(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function zl(t){return _(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield ra(t,ql(n,{idToken:r}));B(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?ZC(s.providerUserInfo):[],a=dV(t.providerData,o),u=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!a?.length,h=u?l:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new ia(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,p)})}function JC(t){return _(this,null,function*(){let e=Ie(t);yield zl(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function dV(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function ZC(t){return t.map(e=>{var{providerId:n}=e,r=sh(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function hV(t,e){return _(this,null,function*(){let n=yield KC(t,{},()=>_(null,null,function*(){let r=Ro({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=yield QC(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:a,body:r};return t.emulatorConfig&&Ht(t.emulatorConfig.host)&&(u.credentials="include"),$l.fetch()(o,u)}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function fV(t,e){return _(this,null,function*(){return Ir(t,"POST","/v2/accounts:revokeToken",vr(t,e))})}var na=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){B(e.idToken,"internal-error"),B(typeof e.idToken<"u","internal-error"),B(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):PC(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){B(e.length!==0,"internal-error");let n=PC(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return _(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(B(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return _(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield hV(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(B(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(B(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(B(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Bn("not implemented")}};function mr(t,e){B(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var yr=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=sh(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new wy(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new ia(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return _(this,null,function*(){let n=yield ra(this,this.stsTokenManager.getToken(this.auth,e));return B(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return YC(this,e)}reload(){return JC(this)}_assign(e){this!==e&&(B(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){B(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return _(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield zl(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return _(this,null,function*(){if(tt(this.auth.app))return Promise.reject($n(this.auth));let e=yield this.getIdToken();return yield ra(this,uV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,u,l,h;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(i=n.email)!==null&&i!==void 0?i:void 0,m=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,w=(o=n.photoURL)!==null&&o!==void 0?o:void 0,N=(a=n.tenantId)!==null&&a!==void 0?a:void 0,R=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,O=(l=n.createdAt)!==null&&l!==void 0?l:void 0,L=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:V,emailVerified:H,isAnonymous:Te,providerData:ce,stsTokenManager:b}=n;B(V&&b,e,"internal-error");let v=na.fromJSON(this.name,b);B(typeof V=="string",e,"internal-error"),mr(p,e.name),mr(g,e.name),B(typeof H=="boolean",e,"internal-error"),B(typeof Te=="boolean",e,"internal-error"),mr(m,e.name),mr(w,e.name),mr(N,e.name),mr(R,e.name),mr(O,e.name),mr(L,e.name);let E=new t({uid:V,auth:e,email:g,emailVerified:H,displayName:p,isAnonymous:Te,photoURL:w,phoneNumber:m,tenantId:N,stsTokenManager:v,createdAt:O,lastLoginAt:L});return ce&&Array.isArray(ce)&&(E.providerData=ce.map(T=>Object.assign({},T))),R&&(E._redirectEventId=R),E}static _fromIdTokenResponse(e,n,r=!1){return _(this,null,function*(){let i=new na;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield zl(s),s})}static _fromGetAccountInfoResponse(e,n,r){return _(this,null,function*(){let i=n.users[0];B(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?ZC(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new na;a.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new ia(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(u,l),u})}};var MC=new Map;function Hn(t){_r(t instanceof Function,"Expected a class definition");let e=MC.get(t);return e?(_r(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,MC.set(t,e),e)}var pV=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return _(this,null,function*(){return!0})}_set(n,r){return _(this,null,function*(){this.storage[n]=r})}_get(n){return _(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return _(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),Ty=pV;function Ul(t,e,n){return`firebase:${t}:${e}:${n}`}var Gl=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=Ul(this.userKey,i.apiKey,s),this.fullPersistenceKey=Ul("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return _(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let n=yield ql(this.auth,{idToken:e}).catch(()=>{});return n?yr._fromGetAccountInfoResponse(this.auth,n,e):null}return yr._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return _(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return _(this,null,function*(){if(!n.length)return new t(Hn(Ty),e,r);let i=(yield Promise.all(n.map(l=>_(null,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||Hn(Ty),o=Ul(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let h=yield l._get(o);if(h){let p;if(typeof h=="string"){let g=yield ql(e,{idToken:h}).catch(()=>{});if(!g)break;p=yield yr._fromGetAccountInfoResponse(e,g,h)}else p=yr._fromJSON(e,h);l!==s&&(a=p),s=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new t(s,e,r):(s=u[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(l=>_(null,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new t(s,e,r))})}};function xC(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(nS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(XC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(iS(e))return"Blackberry";if(sS(e))return"Webos";if(eS(e))return"Safari";if((e.includes("chrome/")||tS(e))&&!e.includes("edge/"))return"Chrome";if(rS(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function XC(t=Be()){return/firefox\//i.test(t)}function eS(t=Be()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function tS(t=Be()){return/crios\//i.test(t)}function nS(t=Be()){return/iemobile/i.test(t)}function rS(t=Be()){return/android/i.test(t)}function iS(t=Be()){return/blackberry/i.test(t)}function sS(t=Be()){return/webos/i.test(t)}function $y(t=Be()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function gV(t=Be()){var e;return $y(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function mV(){return UT()&&document.documentMode===10}function oS(t=Be()){return $y(t)||rS(t)||sS(t)||iS(t)||/windows phone/i.test(t)||nS(t)}function aS(t,e=[]){let n;switch(t){case"Browser":n=xC(Be());break;case"Worker":n=`${xC(Be())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${un}/${r}`}var by=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,a)=>{try{let u=e(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return _(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function yV(n){return _(this,arguments,function*(t,e={}){return Ir(t,"GET","/v2/passwordPolicy",vr(t,e))})}var _V=6,Dy=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:_V,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Cy=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Wl(this),this.idTokenSubscription=new Wl(this),this.beforeStateQueue=new by(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=GC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Hn(n)),this._initializationPromise=this.queue(()=>_(this,null,function*(){var r,i,s;if(!this._deleted&&(this.persistenceManager=yield Gl.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return _(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return _(this,null,function*(){try{let n=yield ql(this,{idToken:e}),r=yield yr._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return _(this,null,function*(){var n;if(tt(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!o||o===a)&&u?.user&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return B(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return _(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return _(this,null,function*(){try{yield zl(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=rV()}_delete(){return _(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return _(this,null,function*(){if(tt(this.app))return Promise.reject($n(this));let n=e?Ie(e):null;return n&&B(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return _(this,null,function*(){if(!this._deleted)return e&&B(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>_(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return _(this,null,function*(){return tt(this.app)?Promise.reject($n(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return tt(this.app)?Promise.reject($n(this)):this.queue(()=>_(this,null,function*(){yield this.assertedPersistence.setPersistence(Hn(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return _(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return _(this,null,function*(){let e=yield yV(this),n=new Dy(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Nn("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return _(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield fV(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return _(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return _(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&Hn(e)||this._popupRedirectResolver;B(n,this,"argument-error"),this.redirectPersistenceManager=yield Gl.create(this,[Hn(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return _(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>_(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return _(this,null,function*(){if(e===this.currentUser)return this.queue(()=>_(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(B(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{let u=e.addObserver(n);return()=>{o=!0,u()}}}directlySetCurrentUser(e){return _(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return B(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=aS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return _(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return _(this,null,function*(){var e;if(tt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&eV(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function pi(t){return Ie(t)}var Wl=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=$T(n=>this.observer=n)}get next(){return B(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var ed={loadJS(){return _(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function vV(t){ed=t}function cS(t){return ed.loadJS(t)}function IV(){return ed.recaptchaEnterpriseScript}function EV(){return ed.gapiScript}function uS(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var Sy=class{constructor(){this.enterprise=new Ay}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}},Ay=class{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}};var wV="recaptcha-enterprise",lS="NO_RECAPTCHA",Ry=class{constructor(e){this.type=wV,this.auth=pi(e)}verify(e="verify",n=!1){return _(this,null,function*(){function r(s){return _(this,null,function*(){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((o,a)=>_(null,null,function*(){cV(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new Ey(u);return s.tenantId==null?s._agentRecaptchaConfig=l:s._tenantRecaptchaConfigs[s.tenantId]=l,o(l.siteKey)}}).catch(u=>{a(u)})}))})}function i(s,o,a){let u=window.grecaptcha;NC(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:e}).then(l=>{o(l)}).catch(()=>{o(lS)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Sy().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&NC(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=IV();u.length!==0&&(u+=a),cS(u).then(()=>{i(a,s,o)}).catch(l=>{o(l)})}}).catch(a=>{o(a)})})})}};function ea(t,e,n,r=!1,i=!1){return _(this,null,function*(){let s=new Ry(t),o;if(i)o=lS;else try{o=yield s.verify(n)}catch{o=yield s.verify(n,!0)}let a=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let u=a.phoneEnrollmentInfo.phoneNumber,l=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let u=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function Ny(t,e,n,r,i){return _(this,null,function*(){var s,o;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let a=yield ea(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(a=>_(null,null,function*(){if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let u=yield ea(t,e,n,n==="getOobCode");return r(t,u)}else return Promise.reject(a)}));else if(i==="PHONE_PROVIDER")if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("PHONE_PROVIDER")){let a=yield ea(t,e,n);return r(t,a).catch(u=>_(null,null,function*(){var l;if(((l=t._getRecaptchaConfig())===null||l===void 0?void 0:l.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(u.code==="auth/missing-recaptcha-token"||u.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);let h=yield ea(t,e,n,!1,!0);return r(t,h)}return Promise.reject(u)}))}else{let a=yield ea(t,e,n,!1,!0);return r(t,a)}else return Promise.reject(i+" provider is not supported.")})}function dS(t,e){let n=Jr(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),s=n.getOptions();if(on(s,e??{}))return i;yn(i,"already-initialized")}return n.initialize({options:e})}function TV(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Hn);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function hS(t,e,n){let r=pi(t);B(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,s=fS(e),{host:o,port:a}=bV(e),u=a===null?"":`:${a}`,l={url:`${s}//${o}${u}/`},h=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){B(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),B(on(l,r.config.emulator)&&on(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Ht(o)?(Wi(`${s}//${o}${u}`),Ki("Auth",!0)):i||DV()}function fS(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function bV(t){let e=fS(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:kC(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:kC(o)}}}function kC(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function DV(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var sa=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Bn("not implemented")}_getIdTokenResponse(e){return Bn("not implemented")}_linkToIdToken(e,n){return Bn("not implemented")}_getReauthenticationResolver(e){return Bn("not implemented")}};function CV(t,e){return _(this,null,function*(){return Ir(t,"POST","/v1/accounts:signUp",e)})}function SV(t,e){return _(this,null,function*(){return ca(t,"POST","/v1/accounts:signInWithPassword",vr(t,e))})}function AV(t,e){return _(this,null,function*(){return ca(t,"POST","/v1/accounts:signInWithEmailLink",vr(t,e))})}function RV(t,e){return _(this,null,function*(){return ca(t,"POST","/v1/accounts:signInWithEmailLink",vr(t,e))})}var oa=class t extends sa{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new t(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new t(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(e){return _(this,null,function*(){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ny(e,n,"signInWithPassword",SV,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return AV(e,{email:this._email,oobCode:this._password});default:yn(e,"internal-error")}})}_linkToIdToken(e,n){return _(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ny(e,r,"signUpPassword",CV,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return RV(e,{idToken:n,email:this._email,oobCode:this._password});default:yn(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function yy(t,e){return _(this,null,function*(){return ca(t,"POST","/v1/accounts:signInWithIdp",vr(t,e))})}function NV(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function PV(t){let e=Qi(Yi(t)).link,n=e?Qi(Yi(e)).deep_link_id:null,r=Qi(Yi(t)).deep_link_id;return(r?Qi(Yi(r)).link:null)||r||n||e||t}var Kl=class t{constructor(e){var n,r,i,s,o,a;let u=Qi(Yi(e)),l=(n=u.apiKey)!==null&&n!==void 0?n:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,p=NV((i=u.mode)!==null&&i!==void 0?i:null);B(l&&h&&p,"argument-error"),this.apiKey=l,this.operation=p,this.code=h,this.continueUrl=(s=u.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=u.lang)!==null&&o!==void 0?o:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let n=PV(e);try{return new t(n)}catch{return null}}};var pS=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(n,r){return oa._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){let i=Kl.parseLink(r);return B(i,"argument-error"),oa._fromEmailAndCode(n,i.code,i.tenantId)}}t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return t})(),Ql=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Py=class extends Ql{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function MV(t,e){return _(this,null,function*(){return ca(t,"POST","/v1/accounts:signUp",vr(t,e))})}var bs=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return _(this,null,function*(){let s=yield yr._fromIdTokenResponse(e,r,i),o=OC(r);return new t({user:s,providerId:o,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return _(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=OC(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function OC(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var My=class t extends lt{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function gS(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?My._fromErrorAndOperation(t,s,e,r):s})}function xV(t,e,n=!1){return _(this,null,function*(){let r=yield ra(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return bs._forOperation(t,"link",r)})}function kV(t,e,n=!1){return _(this,null,function*(){let{auth:r}=t;if(tt(r.app))return Promise.reject($n(r));let i="reauthenticate";try{let s=yield ra(t,gS(r,i,e,t),n);B(s.idToken,r,"internal-error");let o=Hy(s.idToken);B(o,r,"internal-error");let{sub:a}=o;return B(t.uid===a,r,"user-mismatch"),bs._forOperation(t,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&yn(r,"user-mismatch"),s}})}function mS(t,e,n=!1){return _(this,null,function*(){if(tt(t.app))return Promise.reject($n(t));let r="signIn",i=yield gS(t,r,e),s=yield bs._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(s.user)),s})}function yS(t,e){return _(this,null,function*(){return mS(pi(t),e)})}function _S(t){return _(this,null,function*(){let e=pi(t);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function qy(t,e,n){return _(this,null,function*(){if(tt(t.app))return Promise.reject($n(t));let r=pi(t),o=yield Ny(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",MV,"EMAIL_PASSWORD_PROVIDER").catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&_S(t),u}),a=yield bs._fromIdTokenResponse(r,"signIn",o);return yield r._updateCurrentUser(a.user),a})}function zy(t,e,n){return tt(t.app)?Promise.reject($n(t)):yS(Ie(t),pS.credential(e,n)).catch(r=>_(null,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&_S(t),r}))}function vS(t,e,n,r){return Ie(t).onIdTokenChanged(e,n,r)}function IS(t,e,n){return Ie(t).beforeAuthStateChanged(e,n)}function Gy(t){return Ie(t).signOut()}var Yl="__sak";var Jl=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Yl,"1"),this.storage.removeItem(Yl),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var OV=1e3,FV=10,LV=(()=>{class t extends Jl{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=oS(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&n(r,s,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);mV()&&o!==n.newValue&&n.newValue!==n.oldValue?setTimeout(s,FV):s()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},OV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return _(this,null,function*(){yield Kn(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return _(this,null,function*(){let r=yield Kn(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return _(this,null,function*(){yield Kn(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),ES=LV;var VV=(()=>{class t extends Jl{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),Wy=VV;function UV(t){return Promise.all(t.map(e=>_(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var jV=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(s=>s.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return _(this,null,function*(){let r=n,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let u=Array.from(a).map(h=>_(this,null,function*(){return h(r.origin,o)})),l=yield UV(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function wS(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var xy=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return _(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{let l=wS("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){let g=p;if(g.data.eventId===l)switch(g.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(g.data.response);break;default:clearTimeout(h),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function mn(){return window}function BV(t){mn().location.href=t}function TS(){return typeof mn().WorkerGlobalScope<"u"&&typeof mn().importScripts=="function"}function HV(){return _(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function $V(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function qV(){return TS()?self:null}var bS="firebaseLocalStorageDb",zV=1,Zl="firebaseLocalStorage",DS="fbase_key",fi=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function td(t,e){return t.transaction([Zl],e?"readwrite":"readonly").objectStore(Zl)}function GV(){let t=indexedDB.deleteDatabase(bS);return new fi(t).toPromise()}function ky(){let t=indexedDB.open(bS,zV);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(Zl,{keyPath:DS})}catch(i){n(i)}}),t.addEventListener("success",()=>_(null,null,function*(){let r=t.result;r.objectStoreNames.contains(Zl)?e(r):(r.close(),yield GV(),e(yield ky()))}))})}function FC(t,e,n){return _(this,null,function*(){let r=td(t,!0).put({[DS]:e,value:n});return new fi(r).toPromise()})}function WV(t,e){return _(this,null,function*(){let n=td(t,!1).get(e),r=yield new fi(n).toPromise();return r===void 0?null:r.value})}function LC(t,e){let n=td(t,!0).delete(e);return new fi(n).toPromise()}var KV=800,QV=3,YV=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return _(this,null,function*(){return this.db?this.db:(this.db=yield ky(),this.db)})}_withRetries(n){return _(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>QV)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return _(this,null,function*(){return TS()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return _(this,null,function*(){this.receiver=jV._getInstance(qV()),this.receiver._subscribe("keyChanged",(n,r)=>_(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>_(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return _(this,null,function*(){var n,r;if(this.activeServiceWorker=yield HV(),!this.activeServiceWorker)return;this.sender=new xy(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return _(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||$V()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return _(this,null,function*(){try{if(!indexedDB)return!1;let n=yield ky();return yield FC(n,Yl,"1"),yield LC(n,Yl),!0}catch{}return!1})}_withPendingWrite(n){return _(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(i=>FC(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return _(this,null,function*(){let r=yield this._withRetries(i=>WV(i,n));return this.localCache[n]=r,r})}_remove(n){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(r=>LC(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return _(this,null,function*(){let n=yield this._withRetries(s=>{let o=td(s,!1).getAll();return new fi(o).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:s,value:o}of n)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>_(this,null,function*(){return this._poll()}),KV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),CS=YV;var yz=uS("rcb"),_z=new hi(3e4,6e4);function JV(t,e){return e?Hn(e):(B(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var aa=class extends sa{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return yy(e,this._buildIdpRequest())}_linkToIdToken(e,n){return yy(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return yy(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function ZV(t){return mS(t.auth,new aa(t),t.bypassAuthState)}function XV(t){let{auth:e,user:n}=t;return B(n,e,"internal-error"),kV(n,new aa(t),t.bypassAuthState)}function e2(t){return _(this,null,function*(){let{auth:e,user:n}=t;return B(n,e,"internal-error"),xV(n,new aa(t),t.bypassAuthState)})}var Oy=class{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>_(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return _(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ZV;case"linkViaPopup":case"linkViaRedirect":return e2;case"reauthViaPopup":case"reauthViaRedirect":return XV;default:yn(this.auth,"internal-error")}}resolve(e){_r(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){_r(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var vz=new hi(2e3,1e4);var t2="pendingRedirect",jl=new Map,Fy=class t extends Oy{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return _(this,null,function*(){let e=jl.get(this.auth._key());if(!e){try{let r=(yield n2(this.resolver,this.auth))?yield Kn(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}jl.set(this.auth._key(),e)}return this.bypassAuthState||jl.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return _(this,null,function*(){if(e.type==="signInViaRedirect")return Kn(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,Kn(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return _(this,null,function*(){})}cleanUp(){}};function n2(t,e){return _(this,null,function*(){let n=s2(e),r=i2(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function r2(t,e){jl.set(t._key(),e)}function i2(t){return Hn(t._redirectPersistence)}function s2(t){return Ul(t2,t.config.apiKey,t.name)}function o2(t,e,n=!1){return _(this,null,function*(){if(tt(t.app))return Promise.reject($n(t));let r=pi(t),i=JV(r,e),o=yield new Fy(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var a2=10*60*1e3,Ly=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!c2(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!SS(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(di(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=a2&&this.cachedEventUids.clear(),this.cachedEventUids.has(VC(e))}saveEventToCache(e){this.cachedEventUids.add(VC(e)),this.lastProcessedEventTime=Date.now()}};function VC(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function SS({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function c2(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return SS(t);default:return!1}}function u2(n){return _(this,arguments,function*(t,e={}){return Ir(t,"GET","/v1/projects",e)})}var l2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,d2=/^https?/;function h2(t){return _(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield u2(t);for(let n of e)try{if(f2(n))return}catch{}yn(t,"unauthorized-domain")})}function f2(t){let e=vy(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!d2.test(n))return!1;if(l2.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var p2=new hi(3e4,6e4);function UC(){let t=mn().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function g2(t){return new Promise((e,n)=>{var r,i,s;function o(){UC(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{UC(),n(di(t,"network-request-failed"))},timeout:p2.get()})}if(!((i=(r=mn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=mn().gapi)===null||s===void 0)&&s.load)o();else{let a=uS("iframefcb");return mn()[a]=()=>{gapi.load?o():n(di(t,"network-request-failed"))},cS(`${EV()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw Bl=null,e})}var Bl=null;function m2(t){return Bl=Bl||g2(t),Bl}var y2=new hi(5e3,15e3),_2="__/auth/iframe",v2="emulator/auth/iframe",I2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},E2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function w2(t){let e=t.config;B(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?By(e,v2):`https://${t.config.authDomain}/${_2}`,r={apiKey:e.apiKey,appName:t.name,v:un},i=E2.get(t.config.apiHost);i&&(r.eid=i);let s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Ro(r).slice(1)}`}function T2(t){return _(this,null,function*(){let e=yield m2(t),n=mn().gapi;return B(n,t,"internal-error"),e.open({where:document.body,url:w2(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:I2,dontclear:!0},r=>new Promise((i,s)=>_(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=di(t,"network-request-failed"),a=mn().setTimeout(()=>{s(o)},y2.get());function u(){mn().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})})))})}var b2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},D2=500,C2=600,S2="_blank",A2="http://localhost",Xl=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function R2(t,e,n,r=D2,i=C2){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},b2),{width:r.toString(),height:i.toString(),top:s,left:o}),l=Be().toLowerCase();n&&(a=tS(l)?S2:n),XC(l)&&(e=e||A2,u.scrollbars="yes");let h=Object.entries(u).reduce((g,[m,w])=>`${g}${m}=${w},`,"");if(gV(l)&&a!=="_self")return N2(e||"",a),new Xl(null);let p=window.open(e||"",a,h);B(p,t,"popup-blocked");try{p.focus()}catch{}return new Xl(p)}function N2(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var P2="__/auth/handler",M2="emulator/auth/handler",x2=encodeURIComponent("fac");function jC(t,e,n,r,i,s){return _(this,null,function*(){B(t.config.authDomain,t,"auth-domain-config-required"),B(t.config.apiKey,t,"invalid-api-key");let o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:un,eventId:i};if(e instanceof Ql){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",HT(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(s||{}))o[h]=p}if(e instanceof Py){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);let a=o;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=yield t._getAppCheckToken(),l=u?`#${x2}=${encodeURIComponent(u)}`:"";return`${k2(t)}?${Ro(a).slice(1)}${l}`})}function k2({config:t}){return t.emulator?By(t,M2):`https://${t.authDomain}/${P2}`}var _y="webStorageSupport",Vy=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Wy,this._completeRedirectFn=o2,this._overrideRedirectResult=r2}_openPopup(e,n,r,i){return _(this,null,function*(){var s;_r((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield jC(e,n,r,vy(),i);return R2(e,o,wS())})}_openRedirect(e,n,r,i){return _(this,null,function*(){yield this._originValidation(e);let s=yield jC(e,n,r,vy(),i);return BV(s),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(_r(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return _(this,null,function*(){let n=yield T2(e),r=new Ly(e);return n.register("authEvent",i=>(B(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(_y,{type:_y},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[_y];o!==void 0&&n(!!o),yn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=h2(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return oS()||eS()||$y()}},AS=Vy;var BC="@firebase/auth",HC="1.10.8";var Uy=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return _(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){B(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function O2(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function F2(t){cn(new _t("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;B(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:aS(t)},l=new Cy(r,i,s,u);return TV(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),cn(new _t("auth-internal",e=>{let n=pi(e.getProvider("auth").getImmediate());return(r=>new Uy(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),vt(BC,HC,O2(t)),vt(BC,HC,"esm2017")}var L2=5*60,V2=Fp("authIdTokenMaxAge")||L2,$C=null,U2=t=>e=>_(null,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>V2)return;let i=n?.token;$C!==i&&($C=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Ky(t=Ji()){let e=Jr(t,"auth");if(e.isInitialized())return e.getImmediate();let n=dS(t,{popupRedirectResolver:AS,persistence:[CS,ES,Wy]}),r=Fp("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=U2(s.toString());IS(n,o,()=>o(n.currentUser)),vS(n,a=>o(a))}}let i=kp("auth");return i&&hS(n,`http://${i}`),n}function j2(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}vV({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=di("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",j2().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});F2("Browser");var OS="firebasestorage.googleapis.com",FS="storageBucket",B2=2*60*1e3,H2=10*60*1e3;var Re=class t extends lt{constructor(e,n,r=0){super(Qy(e),`Firebase Storage: ${n} (${Qy(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,t.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Qy(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},Ne=function(t){return t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment",t}(Ne||{});function Qy(t){return"storage/"+t}function t_(){let t="An unknown error occurred, please check the error payload for server response.";return new Re(Ne.UNKNOWN,t)}function $2(t){return new Re(Ne.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function q2(t){return new Re(Ne.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function z2(){let t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Re(Ne.UNAUTHENTICATED,t)}function G2(){return new Re(Ne.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function W2(t){return new Re(Ne.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function K2(){return new Re(Ne.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Q2(){return new Re(Ne.CANCELED,"User canceled the upload/download.")}function Y2(t){return new Re(Ne.INVALID_URL,"Invalid URL '"+t+"'.")}function J2(t){return new Re(Ne.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Z2(){return new Re(Ne.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+FS+"' property when initializing the app?")}function X2(){return new Re(Ne.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function eU(){return new Re(Ne.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function tU(t){return new Re(Ne.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Yy(t){return new Re(Ne.INVALID_ARGUMENT,t)}function LS(){return new Re(Ne.APP_DELETED,"The Firebase app was deleted.")}function nU(t){return new Re(Ne.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function la(t,e){return new Re(Ne.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function ua(t){throw new Re(Ne.INTERNAL_ERROR,"Internal error: "+t)}var Qt=class t{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=t.makeFromUrl(e,n)}catch{return new t(e,"")}if(r.path==="")return r;throw J2(e)}static makeFromUrl(e,n){let r=null,i="([A-Za-z0-9.\\-_]+)";function s(H){H.path.charAt(H.path.length-1)==="/"&&(H.path_=H.path_.slice(0,-1))}let o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function l(H){H.path_=decodeURIComponent(H.path)}let h="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",m=new RegExp(`^https?://${p}/${h}/b/${i}/o${g}`,"i"),w={bucket:1,path:3},N=n===OS?"(?:storage.googleapis.com|storage.cloud.google.com)":n,R="([^?#]*)",O=new RegExp(`^https?://${N}/${i}/${R}`,"i"),V=[{regex:a,indices:u,postModify:s},{regex:m,indices:w,postModify:l},{regex:O,indices:{bucket:1,path:2},postModify:l}];for(let H=0;H<V.length;H++){let Te=V[H],ce=Te.regex.exec(e);if(ce){let b=ce[Te.indices.bucket],v=ce[Te.indices.path];v||(v=""),r=new t(b,v),Te.postModify(r);break}}if(r==null)throw Y2(e);return r}},Jy=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function rU(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function u(){return a===2}let l=!1;function h(...R){l||(l=!0,e.apply(null,R))}function p(R){i=setTimeout(()=>{i=null,t(m,u())},R)}function g(){s&&clearTimeout(s)}function m(R,...O){if(l){g();return}if(R){g(),h.call(null,R,...O);return}if(u()||o){g(),h.call(null,R,...O);return}r<64&&(r*=2);let V;a===1?(a=2,V=0):V=(r+Math.random())*1e3,p(V)}let w=!1;function N(R){w||(w=!0,g(),!l&&(i!==null?(R||(a=2),clearTimeout(i),p(0)):R||(a=1)))}return p(0),s=setTimeout(()=>{o=!0,N(!0)},n),N}function iU(t){t(!1)}function sU(t){return t!==void 0}function oU(t){return typeof t=="object"&&!Array.isArray(t)}function n_(t){return typeof t=="string"||t instanceof String}function RS(t){return r_()&&t instanceof Blob}function r_(){return typeof Blob<"u"}function NS(t,e,n,r){if(r<e)throw Yy(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Yy(`Invalid value for '${t}'. Expected ${n} or less.`)}function i_(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function VS(t){let e=encodeURIComponent,n="?";for(let r in t)if(t.hasOwnProperty(r)){let i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Cs=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}(Cs||{});function aU(t,e){let n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}var Zy=class{constructor(e,n,r,i,s,o,a,u,l,h,p,g=!0,m=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=h,this.connectionFactory_=p,this.retry=g,this.isUsingEmulator=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((w,N)=>{this.resolve_=w,this.reject_=N,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new Ds(!1,null,!0));return}let s=this.connectionFactory_();this.pendingConnection_=s;let o=a=>{let u=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;let a=s.getErrorCode()===Cs.NO_ERROR,u=s.getStatus();if(!a||aU(u,this.additionalRetryCodes_)&&this.retry){let h=s.getErrorCode()===Cs.ABORT;r(!1,new Ds(!1,null,h));return}let l=this.successCodes_.indexOf(u)!==-1;r(!0,new Ds(l,s))})},n=(r,i)=>{let s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{let u=this.callback_(a,a.getResponse());sU(u)?s(u):s()}catch(u){o(u)}else if(a!==null){let u=t_();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(i.canceled){let u=this.appDelete_?LS():Q2();o(u)}else{let u=K2();o(u)}};this.canceled_?n(!1,new Ds(!1,null,!0)):this.backoffId_=rU(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&iU(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},Ds=class{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}};function cU(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function uU(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function lU(t,e){e&&(t["X-Firebase-GMPID"]=e)}function dU(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function hU(t,e,n,r,i,s,o=!0,a=!1){let u=VS(t.urlParams),l=t.url+u,h=Object.assign({},t.headers);return lU(h,e),cU(h,n),uU(h,s),dU(h,r),new Zy(l,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o,a)}function fU(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function pU(...t){let e=fU();if(e!==void 0){let n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(r_())return new Blob(t);throw new Re(Ne.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function gU(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}function mU(t){if(typeof atob>"u")throw tU("base-64");return atob(t)}var _n={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},da=class{constructor(e,n){this.data=e,this.contentType=n||null}};function yU(t,e){switch(t){case _n.RAW:return new da(US(e));case _n.BASE64:case _n.BASE64URL:return new da(jS(t,e));case _n.DATA_URL:return new da(vU(e),IU(e))}throw t_()}function US(t){let e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{let s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function _U(t){let e;try{e=decodeURIComponent(t)}catch{throw la(_n.DATA_URL,"Malformed data URL.")}return US(e)}function jS(t,e){switch(t){case _n.BASE64:{let i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw la(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case _n.BASE64URL:{let i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw la(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=mU(e)}catch(i){throw i.message.includes("polyfill")?i:la(t,"Invalid character found")}let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}var rd=class{constructor(e){this.base64=!1,this.contentType=null;let n=e.match(/^data:([^,]+)?,/);if(n===null)throw la(_n.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");let r=n[1]||null;r!=null&&(this.base64=EU(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}};function vU(t){let e=new rd(t);return e.base64?jS(_n.BASE64,e.rest):_U(e.rest)}function IU(t){return new rd(t).contentType}function EU(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}var id=class t{constructor(e,n){let r=0,i="";RS(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(RS(this.data_)){let r=this.data_,i=gU(r,e,n);return i===null?null:new t(i)}else{let r=new Uint8Array(this.data_.buffer,e,n-e);return new t(r,!0)}}static getBlob(...e){if(r_()){let n=e.map(r=>r instanceof t?r.data_:r);return new t(pU.apply(null,n))}else{let n=e.map(o=>n_(o)?yU(_n.RAW,o).data:o.data_),r=0;n.forEach(o=>{r+=o.byteLength});let i=new Uint8Array(r),s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new t(i,!0)}}uploadData(){return this.data_}};function BS(t){let e;try{e=JSON.parse(t)}catch{return null}return oU(e)?e:null}function wU(t){if(t.length===0)return null;let e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function TU(t,e){let n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function HS(t){let e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}function bU(t,e){return e}var We=class{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||bU}},nd=null;function DU(t){return!n_(t)||t.length<2?t:HS(t)}function $S(){if(nd)return nd;let t=[];t.push(new We("bucket")),t.push(new We("generation")),t.push(new We("metageneration")),t.push(new We("name","fullPath",!0));function e(s,o){return DU(o)}let n=new We("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}let i=new We("size");return i.xform=r,t.push(i),t.push(new We("timeCreated")),t.push(new We("updated")),t.push(new We("md5Hash",null,!0)),t.push(new We("cacheControl",null,!0)),t.push(new We("contentDisposition",null,!0)),t.push(new We("contentEncoding",null,!0)),t.push(new We("contentLanguage",null,!0)),t.push(new We("contentType",null,!0)),t.push(new We("metadata","customMetadata",!0)),nd=t,nd}function CU(t,e){function n(){let r=t.bucket,i=t.fullPath,s=new Qt(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function SU(t,e,n){let r={};r.type="file";let i=n.length;for(let s=0;s<i;s++){let o=n[s];r[o.local]=o.xform(r,e[o.server])}return CU(r,t),r}function qS(t,e,n){let r=BS(e);return r===null?null:SU(t,r,n)}function AU(t,e,n,r){let i=BS(e);if(i===null||!n_(i.downloadTokens))return null;let s=i.downloadTokens;if(s.length===0)return null;let o=encodeURIComponent;return s.split(",").map(l=>{let h=t.bucket,p=t.fullPath,g="/b/"+o(h)+"/o/"+o(p),m=i_(g,n,r),w=VS({alt:"media",token:l});return m+w})[0]}function RU(t,e){let n={},r=e.length;for(let i=0;i<r;i++){let s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}var sd=class{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}};function zS(t){if(!t)throw t_()}function NU(t,e){function n(r,i){let s=qS(t,i,e);return zS(s!==null),s}return n}function PU(t,e){function n(r,i){let s=qS(t,i,e);return zS(s!==null),AU(s,i,t.host,t._protocol)}return n}function GS(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=G2():i=z2():n.getStatus()===402?i=q2(t.bucket):n.getStatus()===403?i=W2(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function MU(t){let e=GS(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=$2(t.path)),s.serverResponse=i.serverResponse,s}return n}function xU(t,e,n){let r=e.fullServerUrl(),i=i_(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new sd(i,s,PU(t,n),o);return a.errorHandler=MU(e),a}function kU(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function OU(t,e,n){let r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=kU(null,e)),r}function FU(t,e,n,r,i){let s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let V="";for(let H=0;H<2;H++)V=V+Math.random().toString().slice(2);return V}let u=a();o["Content-Type"]="multipart/related; boundary="+u;let l=OU(e,r,i),h=RU(l,n),p="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+u+`\r
Content-Type: `+l.contentType+`\r
\r
`,g=`\r
--`+u+"--",m=id.getBlob(p,r,g);if(m===null)throw X2();let w={name:l.fullPath},N=i_(s,t.host,t._protocol),R="POST",O=t.maxUploadRetryTime,L=new sd(N,R,NU(t,n),O);return L.urlParams=w,L.headers=o,L.body=m.uploadData(),L.errorHandler=GS(e),L}var $8=256*1024;var PS=null,Xy=class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Cs.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Cs.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Cs.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i,s){if(this.sent_)throw ua("cannot .send() more than once");if(Ht(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(let o in s)s.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,s[o].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ua("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ua("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ua("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ua("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}},e_=class extends Xy{initXhr(){this.xhr_.responseType="text"}};function WS(){return PS?PS():new e_}var Ss=class t{constructor(e,n){this._service=e,n instanceof Qt?this._location=n:this._location=Qt.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new t(e,n)}get root(){let e=new Qt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return HS(this._location.path)}get storage(){return this._service}get parent(){let e=wU(this._location.path);if(e===null)return null;let n=new Qt(this._location.bucket,e);return new t(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw nU(e)}};function LU(t,e,n){t._throwIfRoot("uploadBytes");let r=FU(t.storage,t._location,$S(),new id(e,!0),n);return t.storage.makeRequestWithTokens(r,WS).then(i=>({metadata:i,ref:t}))}function VU(t){t._throwIfRoot("getDownloadURL");let e=xU(t.storage,t._location,$S());return t.storage.makeRequestWithTokens(e,WS).then(n=>{if(n===null)throw eU();return n})}function UU(t,e){let n=TU(t._location.path,e),r=new Qt(t._location.bucket,n);return new Ss(t.storage,r)}function jU(t){return/^[A-Za-z]+:\/\//.test(t)}function BU(t,e){return new Ss(t,e)}function KS(t,e){if(t instanceof ha){let n=t;if(n._bucket==null)throw Z2();let r=new Ss(n,n._bucket);return e!=null?KS(r,e):r}else return e!==void 0?UU(t,e):t}function HU(t,e){if(e&&jU(e)){if(t instanceof ha)return BU(t,e);throw Yy("To use ref(service, url), the first argument must be a Storage instance.")}else return KS(t,e)}function MS(t,e){let n=e?.[FS];return n==null?null:Qt.makeFromBucketSpec(n,t)}function $U(t,e,n,r={}){t.host=`${e}:${n}`;let i=Ht(e);i&&(Wi(`https://${t.host}/b`),Ki("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";let{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:Pu(s,t.app.options.projectId))}var ha=class{constructor(e,n,r,i,s,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._isUsingEmulator=o,this._bucket=null,this._host=OS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=B2,this._maxUploadRetryTime=H2,this._requests=new Set,i!=null?this._bucket=Qt.makeFromBucketSpec(i,this._host):this._bucket=MS(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Qt.makeFromBucketSpec(this._url,e):this._bucket=MS(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){NS("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){NS("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return _(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let n=yield e.getToken();if(n!==null)return n.accessToken}return null})}_getAppCheckToken(){return _(this,null,function*(){if(tt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ss(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new Jy(LS());{let o=hU(e,this._appId,r,i,n,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,n){return _(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()})}},xS="@firebase/storage",kS="0.13.14";var QS="storage";function YS(t,e,n){return t=Ie(t),LU(t,e,n)}function JS(t){return t=Ie(t),VU(t)}function ZS(t,e){return t=Ie(t),HU(t,e)}function XS(t=Ji(),e){t=Ie(t);let r=Jr(t,QS).getImmediate({identifier:e}),i=Nu("storage");return i&&qU(r,...i),r}function qU(t,e,n,r={}){$U(t,e,n,r)}function zU(t,{instanceIdentifier:e}){let n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new ha(n,r,i,e,un)}function GU(){cn(new _t(QS,zU,"PUBLIC").setMultipleInstances(!0)),vt(xS,kS,""),vt(xS,kS,"esm2017")}GU();var WU={apiKey:"AIzaSyClqFEICeJQAKyzYP3jWRSx78u9Yw4tg1w",authDomain:"interview-evaluation-sys-5d095.firebaseapp.com",projectId:"interview-evaluation-sys-5d095",storageBucket:"interview-evaluation-sys-5d095.firebasestorage.app",messagingSenderId:"240867469944",appId:"1:240867469944:web:6138e968b36bbc8c5b5b8d",measurementId:"G-4YEVB1FRF6"},e0=class t{app=Zp(WU);db=vC(this.app);auth=Ky(this.app);storage=XS(this.app);currentUserSubject=new Sr(null);currentUser$=this.currentUserSubject.asObservable();constructor(){this.auth.onAuthStateChanged(e=>_(this,null,function*(){if(e){let n=yield this.getUserById(e.uid);this.currentUserSubject.next(n)}else this.currentUserSubject.next(null)}))}login(e,n){return _(this,null,function*(){return(yield zy(this.auth,e,n)).user})}register(e,n,r){return _(this,null,function*(){let i=yield qy(this.auth,e,n);yield this.createUser(ie({id:i.user.uid,email:e},r))})}logout(){return _(this,null,function*(){yield Gy(this.auth)})}createUser(e){return _(this,null,function*(){if(!e.id)throw new Error("User id (firebase uid) required");let n=Wt(this.db,"users",e.id);return yield SC(n,De(ie({},e),{createdAt:ge.now()})),yield this.logAction("create_user",e.id,"user",e),e.id})}getUserById(e){return _(this,null,function*(){let n=Wt(this.db,"users",e),r=yield Ol(n);return r.exists()?ie({id:r.id},r.data()):null})}getAllUsers(){return _(this,null,function*(){return(yield Kt(it(this.db,"users"))).docs.map(n=>ie({id:n.id},n.data()))})}updateUser(e,n){return _(this,null,function*(){let r=Wt(this.db,"users",e);yield Xo(r,n),yield this.logAction("update_user",e,"user",n)})}createEvaluationTemplate(e){return _(this,null,function*(){let n=yield Ts(it(this.db,"evaluation_templates"),De(ie({},e),{createdAt:ge.now()}));return yield this.logAction("create_template",n.id,"user",e),n.id})}getEvaluationTemplates(e){return _(this,null,function*(){let n=it(this.db,"evaluation_templates"),r=e?jn(n,pr("position","==",e)):n;return(yield Kt(r)).docs.map(s=>ie({id:s.id},s.data()))})}updateEvaluationTemplate(e,n){return _(this,null,function*(){let r=Wt(this.db,"evaluation_templates",e);yield Xo(r,n),yield this.logAction("update_template",e,"user",n)})}deleteEvaluationTemplate(e){return _(this,null,function*(){let n=Wt(this.db,"evaluation_templates",e);yield AC(n),yield this.logAction("delete_template",e,"user",{})})}rejectCandidate(e,n,r){return _(this,null,function*(){let i=yield this.getCandidateById(e),s=this.currentUserSubject.value;yield this.updateCandidate(e,{status:"rejected"});let o={candidateId:e,candidateName:i?.name,stage:n,reason:r,rejectedAt:new Date,rejectedBy:s?.id||"system",rejectedByName:s?.name||"System"};yield Ts(it(this.db,"candidate_rejections"),De(ie({},o),{rejectedAt:ge.now()})),yield this.logAction("reject_candidate",e,"candidate",{stage:n,reason:r})})}getRejectionsForCandidate(e){return _(this,null,function*(){let n=jn(it(this.db,"candidate_rejections"),pr("candidateId","==",e),gr("rejectedAt","desc"));return(yield Kt(n)).docs.map(i=>De(ie({id:i.id},i.data()),{rejectedAt:i.data().rejectedAt.toDate()}))})}createCandidate(e){return _(this,null,function*(){let n=yield Ts(it(this.db,"candidates"),De(ie({},e),{createdAt:ge.now()}));return yield this.logAction("create_candidate",n.id,"candidate",e),n.id})}updateCandidate(e,n){return _(this,null,function*(){let r=Wt(this.db,"candidates",e);yield Xo(r,n),yield this.logAction("update_candidate",e,"candidate",n)})}getCandidateById(e){return _(this,null,function*(){let n=Wt(this.db,"candidates",e),r=yield Ol(n);return r.exists()?ie({id:r.id},r.data()):null})}getAllCandidates(){return _(this,null,function*(){return(yield Kt(jn(it(this.db,"candidates"),gr("createdAt","desc")))).docs.map(n=>ie({id:n.id},n.data()))})}getCandidatesByStatus(e){return _(this,null,function*(){let n=jn(it(this.db,"candidates"),pr("status","==",e),gr("createdAt","desc"));return(yield Kt(n)).docs.map(i=>ie({id:i.id},i.data()))})}getCandidatesByPosition(e){return _(this,null,function*(){let n=jn(it(this.db,"candidates"),pr("position","==",e),gr("createdAt","desc"));return(yield Kt(n)).docs.map(i=>ie({id:i.id},i.data()))})}createEvaluation(e){return _(this,null,function*(){let n=yield Ts(it(this.db,"evaluations"),De(ie({},e),{completedAt:e.isCompleted?ge.now():null}));return yield this.logAction("create_evaluation",n.id,"evaluation",e),e.isCompleted&&(yield this.updateCandidateStage(e.candidateId,e.stage)),n.id})}updateEvaluation(e,n){return _(this,null,function*(){let r=Wt(this.db,"evaluations",e),i=De(ie({},n),{completedAt:n.isCompleted?ge.now():null});yield Xo(r,i),yield this.logAction("update_evaluation",e,"evaluation",n)})}getEvaluationById(e){return _(this,null,function*(){let n=Wt(this.db,"evaluations",e),r=yield Ol(n);return r.exists()?ie({id:r.id},r.data()):null})}getEvaluationsByCandidateId(e){return _(this,null,function*(){let n=jn(it(this.db,"evaluations"),pr("candidateId","==",e),gr("completedAt","asc"));return(yield Kt(n)).docs.map(i=>ie({id:i.id},i.data()))})}getCandidateEvaluationFlow(e){return _(this,null,function*(){let n=yield this.getEvaluationsByCandidateId(e),r=["initial","system-task","technical","manager","hr"];return n.sort((i,s)=>{let o=i.completedAt?.toDate?i.completedAt.toDate().getTime():0,a=s.completedAt?.toDate?s.completedAt.toDate().getTime():0;return o&&a?o-a:r.indexOf(i.stage)-r.indexOf(s.stage)})})}getEvaluationsByStage(e){return _(this,null,function*(){let n=jn(it(this.db,"evaluations"),pr("stage","==",e),gr("completedAt","desc"));return(yield Kt(n)).docs.map(i=>ie({id:i.id},i.data()))})}getEvaluationsByInterviewer(e){return _(this,null,function*(){let n=jn(it(this.db,"evaluations"),pr("interviewerId","==",e),gr("completedAt","desc"));return(yield Kt(n)).docs.map(i=>ie({id:i.id},i.data()))})}generateConsolidatedReport(e){return _(this,null,function*(){let n=yield this.getCandidateById(e),r=yield this.getEvaluationsByCandidateId(e);if(!n)throw new Error("Candidate not found");let i={},s=0,o=0,a=[],u=[];Object.values(Cu).forEach(g=>{let m=r.find(w=>w.stage===g);i[g]={completed:!!m?.isCompleted,rating:m?.overallRating,status:m?this.getStageStatus(m.overallRating):"pending",completedAt:m?.completedAt,interviewerName:m?.interviewerName},m?.isCompleted&&(s+=m.overallRating,o++,a.push(...m.strengths),u.push(...m.areasForImprovement))});let l=o>0?s/o:0,h=this.calculateWeightedScore(r);return{candidateId:e,candidateName:n.name,position:n.position,stageStatus:i,overallScore:l,weightedScore:h,finalDecision:this.determineFinalDecision(l,o),decisionMadeBy:this.currentUserSubject.value?.name||"System",decisionDate:new Date,totalInterviewTime:this.calculateTotalInterviewTime(r),keyStrengths:[...new Set(a)],keyWeaknesses:[...new Set(u)],recommendationSummary:this.generateRecommendationSummary(r,l),evaluations:r}})}getHRDashboardMetrics(){return _(this,null,function*(){let e=yield this.getAllCandidates(),n=yield this.getAllEvaluations(),r=e.length,i=n.length,s=n.filter(g=>g.isCompleted).length,o={};Object.values(Cu).forEach(g=>{let m=n.filter(R=>R.stage===g),w=m.filter(R=>R.isCompleted),N=w.filter(R=>R.overallRating>=3);o[g]={total:m.length,completed:w.length,passed:N.length,failed:w.length-N.length,averageRating:this.calculateAverageRating(w),averageTime:this.calculateAverageTime(w)}});let a=this.calculateOverallPassRate(n),u=this.generateFunnelData(e,n),l=yield this.generateInterviewerStats(n),h=this.generateMonthlyTrends(e),p=this.generatePositionStats(e,n);return{totalCandidates:r,interviewsScheduled:i,interviewsCompleted:s,stageStats:o,overallPassRate:a,averageTimePerStage:this.calculateAverageTimePerStage(n),candidateFunnelData:u,interviewerStats:l,monthlyHiringTrends:h,positionWiseStats:p}})}uploadFile(e,n){return _(this,null,function*(){let r=ZS(this.storage,n),i=yield YS(r,e);return yield JS(i.ref)})}logAction(e,n,r,i){return _(this,null,function*(){let s=this.currentUserSubject.value;if(!s)return;let o={action:e,performedBy:s.id||"",performedByName:s.name,targetId:n,targetType:r,changes:i,timestamp:new Date};yield Ts(it(this.db,"audit_logs"),De(ie({},o),{timestamp:ge.now()}))})}updateCandidateStage(e,n){return _(this,null,function*(){let r=["initial","system-task","technical","manager","hr"],i=r.indexOf(n),s=r[i+1],o={currentStage:s||n,status:s?"in-progress":"in-progress"};yield this.updateCandidate(e,o)})}getStageStatus(e){return e>=3?"pass":e<3?"fail":"pending"}calculateWeightedScore(e){let n={initial:.1,"system-task":.2,technical:.4,manager:.2,hr:.1},r=0,i=0;return e.forEach(s=>{if(s.isCompleted){let o=n[s.stage];r+=s.overallRating*o,i+=o}}),i>0?r/i:0}determineFinalDecision(e,n){return n<3?"pending":e>=4?"hired":e>=3?"on-hold":"rejected"}calculateTotalInterviewTime(e){return e.length*60}generateRecommendationSummary(e,n){return e.filter(i=>i.isCompleted).length===0?"No evaluations completed yet.":n>=4?"Strong candidate with excellent performance across all stages. Recommended for hire.":n>=3?"Good candidate with solid performance. Consider for hire based on team needs.":"Candidate did not meet the required standards. Not recommended for hire."}getAllEvaluations(){return _(this,null,function*(){return(yield Kt(it(this.db,"evaluations"))).docs.map(n=>ie({id:n.id},n.data()))})}calculateAverageRating(e){return e.length===0?0:e.reduce((r,i)=>r+i.overallRating,0)/e.length}calculateAverageTime(e){return 60}calculateOverallPassRate(e){let n=e.filter(i=>i.isCompleted);return n.length===0?0:n.filter(i=>i.overallRating>=3).length/n.length*100}generateFunnelData(e,n){let r=["initial","system-task","technical","manager","hr"],i=[],s=null;return r.forEach(o=>{let a=e.filter(l=>{let h=r.indexOf(l.currentStage),p=r.indexOf(o);return h>=p?!0:n.some(g=>g.candidateId===l.id&&g.stage===o)}).length,u=s?s===0?0:(s-a)/s*100:0;i.push({stage:o,candidateCount:a,dropOffRate:u}),s=a}),i}generateInterviewerStats(e){return _(this,null,function*(){let n={};e.filter(i=>i.interviewerId).forEach(i=>{n[i.interviewerId]=n[i.interviewerId]||[],n[i.interviewerId].push(i)});let r=[];return Object.keys(n).forEach(i=>{let o=n[i].filter(g=>g.isCompleted);if(!o.length)return;let a=o.reduce((g,m)=>g+m.overallRating,0)/o.length,u=o.reduce((g,m)=>g+Math.pow(m.overallRating-a,2),0)/o.length,l=Math.sqrt(u),h=Math.max(0,1-l/5),p=[...new Set(o.map(g=>g.stage))];r.push({interviewerId:i,interviewerName:o[0].interviewerName||"N/A",totalInterviews:o.length,averageRating:+a.toFixed(2),consistency:+(h*100).toFixed(1),averageTime:60,specialization:p})}),r.sort((i,s)=>s.totalInterviews-i.totalInterviews).slice(0,10)})}generateMonthlyTrends(e){let n={};return e.forEach(r=>{let i=r.createdAt?.toDate?r.createdAt.toDate():r.createdAt instanceof Date?r.createdAt:new Date,s=`${i.getFullYear()}-${i.getMonth()+1}`;n[s]||(n[s]={month:i.toLocaleString("default",{month:"short"}),year:i.getFullYear(),totalCandidates:0,hired:0,rejected:0,averageTime:0}),n[s].totalCandidates++,r.status==="hired"&&n[s].hired++,r.status==="rejected"&&n[s].rejected++}),Object.values(n).sort((r,i)=>r.year===i.year?r.month.localeCompare(i.month):r.year-i.year)}generatePositionStats(e,n){let r={};e.forEach(s=>{r[s.position]=r[s.position]||[],r[s.position].push(s)});let i=[];return Object.keys(r).forEach(s=>{let o=r[s],a=o.filter(m=>m.status==="hired").length,u=new Set(o.map(m=>m.id)),l=n.filter(m=>u.has(m.candidateId)&&m.isCompleted),h=l.length?l.reduce((m,w)=>m+w.overallRating,0)/l.length:0,p={};l.filter(m=>m.overallRating<3).forEach(m=>{p[m.stage]=(p[m.stage]||0)+1});let g=Object.keys(p).sort((m,w)=>p[w]-p[m])[0]||null;i.push({position:s,totalCandidates:o.length,hired:a,averageRating:+h.toFixed(2),mostCommonFailureStage:g})}),i.sort((s,o)=>o.totalCandidates-s.totalCandidates).slice(0,10)}calculateAverageTimePerStage(e){return 60}static \u0275fac=function(n){return new(n||t)};static \u0275prov=he({token:t,factory:t.\u0275fac,providedIn:"root"})};export{ie as a,De as b,_ as c,Ue as d,X0 as e,rh as f,ih as g,Yt as h,Sr as i,eo as j,Jn as k,uA as l,lA as m,dA as n,Tn as o,hA as p,Rr as q,IA as r,Nr as s,oh as t,ic as u,wA as v,TA as w,to as x,Lv as y,bA as z,no as A,sc as B,CA as C,SA as D,ah as E,AA as F,RA as G,NA as H,PA as I,MA as J,xA as K,Q as L,PI as M,he as N,xI as O,Yq as P,se as Q,X as R,Ge as S,K as T,WI as U,JI as V,tr as W,XI as X,_R as Y,Jq as Z,Zq as _,Xq as $,aN as aa,Hr as ba,Uf as ca,eu as da,Zn as ea,Tt as fa,$r as ga,e6 as ha,Wr as ia,t6 as ja,n6 as ka,r6 as la,AN as ma,RN as na,i6 as oa,tu as pa,nu as qa,FN as ra,lo as sa,s6 as ta,o6 as ua,Oc as va,Lc as wa,sp as xa,je as ya,f6 as za,zi as Aa,tx as Ba,nx as Ca,y6 as Da,Nw as Ea,lu as Fa,lx as Ga,vx as Ha,_6 as Ia,hu as Ja,v6 as Ka,bx as La,fo as Ma,Rx as Na,Hx as Oa,$x as Pa,I6 as Qa,$w as Ra,qw as Sa,ek as Ta,rk as Ua,ik as Va,E6 as Wa,hk as Xa,w6 as Ya,pk as Za,Gw as _a,T6 as $a,b6 as ab,D6 as bb,C6 as cb,S6 as db,mk as eb,Ww as fb,yk as gb,_k as hb,vk as ib,A6 as jb,Ik as kb,R6 as lb,N6 as mb,P6 as nb,M6 as ob,x6 as pb,k6 as qb,O6 as rb,F6 as sb,L6 as tb,V6 as ub,U6 as vb,j6 as wb,B6 as xb,H6 as yb,$6 as zb,pp as Ab,q6 as Bb,Hk as Cb,yp as Db,z6 as Eb,G6 as Fb,Io as Gb,pu as Hb,$k as Ib,vp as Jb,qk as Kb,Gi as Lb,iT as Mb,sT as Nb,Kk as Ob,gO as Pb,DT as Qb,mO as Rb,vO as Sb,EO as Tb,TO as Ub,DO as Vb,CO as Wb,RO as Xb,NO as Yb,PO as Zb,MO as _b,xO as $b,Rp as ac,l9 as bc,Cu as cc,e0 as dc};
