import{a as B}from"./chunk-PJRJ33IU.js";import{a as N,b as _,c as l,d as R,e as O,g as D,h as T,i as A,l as M,m as j,n as G,o as J,p as P,q as V,r as W,t as q}from"./chunk-46GCKG2T.js";import{b as w,d as x}from"./chunk-AHEKFUMX.js";import{Da as E,Ha as u,Oa as c,Qb as I,Ra as i,Rb as y,Sa as t,Ta as s,Xa as h,Yb as F,c as g,db as n,dc as H,eb as C,fb as S,mb as b,pb as k,ua as m,ya as p}from"./chunk-BULBJQPZ.js";var L=()=>({key:"cultureFit",label:"Culture Fit"}),$=()=>({key:"communicationSkills",label:"Communication"}),z=()=>({key:"motivation",label:"Motivation"}),K=(o,e,r)=>[o,e,r];function Q(o,e){if(o&1&&(i(0,"div",5)(1,"label",6),n(2),t(),s(3,"input",34),t()),o&2){let r=e.$implicit;m(2),S("",r.label," (1-5)"),m(),c("formControlName",r.key)}}function X(o,e){if(o&1&&(i(0,"option",35),n(1),t()),o&2){let r=e.$implicit;c("value",r.value),m(),C(r.label)}}function Y(o,e){if(o&1&&(i(0,"option",35),n(1),t()),o&2){let r=e.$implicit;c("value",r.value),m(),C(r.label)}}function Z(o,e){o&1&&(i(0,"span"),n(1,"Save HR Evaluation & Decision"),t())}function ee(o,e){o&1&&s(0,"span",36)}var U=class o{constructor(e,r,a,f,v){this.fb=e;this.route=r;this.fs=a;this.toast=f;this.router=v}form;candidateId="";candidate;submitting=!1;finalDecision="pending";recommendationOptions=[{value:"strong-hire",label:"Strong Hire"},{value:"hire",label:"Hire"},{value:"no-hire",label:"No Hire"},{value:"strong-no-hire",label:"Strong No Hire"}];decisionOptions=[{value:"hired",label:"Hire"},{value:"rejected",label:"Reject"},{value:"on-hold",label:"On Hold"}];ngOnInit(){return g(this,null,function*(){this.candidateId=this.route.snapshot.paramMap.get("candidateId")||"",this.form=this.fb.group({cultureFit:[5,[l.required,l.min(1),l.max(5)]],communicationSkills:[5,[l.required,l.min(1),l.max(5)]],motivation:[5,[l.required,l.min(1),l.max(5)]],salaryExpectation:[0,[l.min(0)]],negotiatedSalary:[0,[l.min(0)]],availabilityToJoin:["",l.required],workFromHomePreference:["Hybrid"],relocatationWillingness:[!1],backgroundCheck:[!1],referenceCheck:[!1],careerAspiration:[""],comments:[""],strengths:[""],weaknesses:[""],recommendation:["hire",l.required],decision:["hired",l.required]}),this.candidateId&&(this.candidate=yield this.fs.getCandidateById(this.candidateId),this.candidate||(this.toast.error("Candidate not found"),this.router.navigate(["/candidates"])))})}get f(){return this.form.controls}overall(e){return+([e.cultureFit,e.communicationSkills,e.motivation].reduce((r,a)=>r+a,0)/3).toFixed(2)}save(){return g(this,null,function*(){if(this.form.invalid){this.form.markAllAsTouched();return}this.submitting=!0;try{let e=this.form.value,r=(e.strengths||"").split(/\n|,/).map(d=>d.trim()).filter(d=>!!d),a=(e.weaknesses||"").split(/\n|,/).map(d=>d.trim()).filter(d=>!!d),f={candidateId:this.candidateId,candidateName:this.candidate?.name||"Candidate",position:this.candidate?.position||"Unknown",stage:"hr",interviewerId:this.fs.currentUserSubject.value?.id||"unknown",interviewerName:this.fs.currentUserSubject.value?.name||"Unknown",isCompleted:!0,overallRating:this.overall(e),recommendation:e.recommendation,comments:e.comments||"",strengths:r,areasForImprovement:a,hrInterview:{cultureFit:e.cultureFit,communicationSkills:e.communicationSkills,motivation:e.motivation,careerAspiration:e.careerAspiration,salaryExpectation:e.salaryExpectation,negotiatedSalary:e.negotiatedSalary,availabilityToJoin:e.availabilityToJoin,workFromHomePreference:e.workFromHomePreference,relocatationWillingness:e.relocatationWillingness,backgroundCheck:e.backgroundCheck,referenceCheck:e.referenceCheck}};yield this.fs.createEvaluation(f);let v=e.decision;v==="hired"?yield this.fs.updateCandidate(this.candidateId,{status:"hired",currentStage:"hr"}):v==="rejected"?yield this.fs.updateCandidate(this.candidateId,{status:"rejected",currentStage:"hr"}):v==="on-hold"&&(yield this.fs.updateCandidate(this.candidateId,{status:"on-hold",currentStage:"hr"})),this.toast.success("HR evaluation & decision saved"),this.router.navigate(["/candidates"])}catch(e){this.toast.error(e.message||"Failed to save")}this.submitting=!1})}static \u0275fac=function(r){return new(r||o)(p(W),p(w),p(H),p(B),p(x))};static \u0275cmp=E({type:o,selectors:[["app-hr-interview-form"]],decls:76,vars:16,consts:[[1,"container","py-4","hr-form-wrapper"],[1,"mb-3"],[1,"card","p-4","shadow-sm",3,"ngSubmit","formGroup"],[1,"row","g-3"],["class","col-md-4",4,"ngFor","ngForOf"],[1,"col-md-4"],[1,"form-label"],["type","number","formControlName","salaryExpectation",1,"form-control"],["type","number","formControlName","negotiatedSalary",1,"form-control"],["formControlName","availabilityToJoin","placeholder","e.g. 30 days",1,"form-control"],["formControlName","workFromHomePreference",1,"form-select"],[1,"col-md-4","d-flex","align-items-center","gap-3"],[1,"form-check"],["type","checkbox","formControlName","relocatationWillingness","id","relocateChk",1,"form-check-input"],["for","relocateChk",1,"form-check-label"],["type","checkbox","formControlName","backgroundCheck","id","bgChk",1,"form-check-input"],["for","bgChk",1,"form-check-label"],["type","checkbox","formControlName","referenceCheck","id","refChk",1,"form-check-input"],["for","refChk",1,"form-check-label"],[1,"col-md-6"],["rows","3","formControlName","careerAspiration",1,"form-control"],["rows","3","formControlName","comments",1,"form-control"],["formControlName","recommendation",1,"form-select"],[3,"value",4,"ngFor","ngForOf"],["formControlName","decision",1,"form-select"],["rows","3","formControlName","strengths",1,"form-control"],["rows","3","formControlName","weaknesses",1,"form-control"],[1,"col-md-4","d-flex","flex-column","justify-content-end"],[1,"small","text-muted"],[1,"mt-4","d-flex","gap-2"],[1,"btn","btn-primary",3,"disabled"],[4,"ngIf"],["class","spinner-border spinner-border-sm",4,"ngIf"],["type","button",1,"btn","btn-outline-secondary",3,"click","disabled"],["type","number","min","1","max","5",1,"form-control",3,"formControlName"],[3,"value"],[1,"spinner-border","spinner-border-sm"]],template:function(r,a){r&1&&(i(0,"div",0)(1,"h4",1),n(2,"HR Interview Feedback & Final Decision"),t(),i(3,"form",2),h("ngSubmit",function(){return a.save()}),i(4,"div",3),u(5,Q,4,2,"div",4),i(6,"div",5)(7,"label",6),n(8,"Salary Expectation"),t(),s(9,"input",7),t(),i(10,"div",5)(11,"label",6),n(12,"Negotiated Salary"),t(),s(13,"input",8),t(),i(14,"div",5)(15,"label",6),n(16,"Availability To Join"),t(),s(17,"input",9),t(),i(18,"div",5)(19,"label",6),n(20,"Work Preference"),t(),i(21,"select",10)(22,"option"),n(23,"Remote"),t(),i(24,"option"),n(25,"Hybrid"),t(),i(26,"option"),n(27,"Onsite"),t()()(),i(28,"div",11)(29,"div",12),s(30,"input",13),i(31,"label",14),n(32,"Willing to Relocate"),t()(),i(33,"div",12),s(34,"input",15),i(35,"label",16),n(36,"Background Check"),t()(),i(37,"div",12),s(38,"input",17),i(39,"label",18),n(40,"Reference Check"),t()()(),i(41,"div",19)(42,"label",6),n(43,"Career Aspiration"),t(),s(44,"textarea",20),t(),i(45,"div",19)(46,"label",6),n(47,"Comments"),t(),s(48,"textarea",21),t(),i(49,"div",5)(50,"label",6),n(51,"Recommendation"),t(),i(52,"select",22),u(53,X,2,2,"option",23),t()(),i(54,"div",5)(55,"label",6),n(56,"Final Decision"),t(),i(57,"select",24),u(58,Y,2,2,"option",23),t()(),i(59,"div",5)(60,"label",6),n(61,"Strengths (comma/new line)"),t(),s(62,"textarea",25),t(),i(63,"div",5)(64,"label",6),n(65,"Weaknesses"),t(),s(66,"textarea",26),t(),i(67,"div",27)(68,"div",28),n(69),t()()(),i(70,"div",29)(71,"button",30),u(72,Z,2,0,"span",31)(73,ee,1,0,"span",32),t(),i(74,"button",33),h("click",function(){return a.router.navigate(["/candidates"])}),n(75,"Cancel"),t()()()()),r&2&&(m(3),c("formGroup",a.form),m(2),c("ngForOf",k(12,K,b(9,L),b(10,$),b(11,z))),m(48),c("ngForOf",a.recommendationOptions),m(5),c("ngForOf",a.decisionOptions),m(11),S("Auto Overall: ",a.overall(a.form.value),""),m(2),c("disabled",a.form.invalid||a.submitting),m(),c("ngIf",!a.submitting),m(),c("ngIf",a.submitting),m(),c("disabled",a.submitting))},dependencies:[F,I,y,q,D,G,J,_,T,N,j,R,O,V,P,A,M],styles:[".hr-form-wrapper[_ngcontent-%COMP%]{max-width:1100px}"]})};export{U as HrInterviewFormComponent};
