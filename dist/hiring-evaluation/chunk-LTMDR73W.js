import{a as U}from"./chunk-PJRJ33IU.js";import{b as w,c as m,d as V,e as R,g as T,h as k,i as A,l as j,m as D,n as O,o as G,p as q,q as Q,r as B,t as P}from"./chunk-46GCKG2T.js";import{b as _,d as M}from"./chunk-AHEKFUMX.js";import{Da as g,Ha as u,Oa as o,Qb as C,Ra as t,Rb as x,Sa as i,Ta as p,Wb as F,Xa as f,Yb as N,c as v,db as r,dc as E,eb as b,fb as h,mb as S,tb as I,ua as n,vb as y,ya as c}from"./chunk-BULBJQPZ.js";var z=()=>["resumeQuality","experienceMatch","educationMatch"];function H(s,e){if(s&1&&(t(0,"div",7)(1,"label",20),r(2),i(),p(3,"input",21),i()),s&2){let l=e.$implicit;n(2),h("",l.replace("Match"," Match")," (1-5)"),n(),o("formControlName",l)}}function L(s,e){s&1&&(t(0,"span"),r(1,"Save Initial Evaluation"),i())}function $(s,e){s&1&&p(0,"span",22)}var Y=class s{constructor(e,l,a,d,J){this.fb=e;this.route=l;this.fs=a;this.toast=d;this.router=J;this.form=this.fb.group({eligibilityCheck:[!0,m.required],resumeQuality:[5,[m.required,m.min(1),m.max(5)]],experienceMatch:[5,[m.required,m.min(1),m.max(5)]],educationMatch:[5,[m.required,m.min(1),m.max(5)]],documentationComplete:[!0,m.required],comments:[""]}),this.candidateId=this.route.snapshot.paramMap.get("candidateId")||""}form;saving=!1;candidateId="";overallScore(){let e=this.form.value,l=[e.resumeQuality,e.experienceMatch,e.educationMatch].map(Number);return l.reduce((a,d)=>a+d,0)/l.length}save(){return v(this,null,function*(){if(!(this.form.invalid||!this.candidateId)){this.saving=!0;try{let e=this.form.value;yield this.fs.createEvaluation({candidateId:this.candidateId,candidateName:"",position:"",stage:"initial",interviewerId:this.fs.currentUserSubject.value?.id||"system",interviewerName:this.fs.currentUserSubject.value?.name||"System",isCompleted:!0,completedAt:new Date,overallRating:this.overallScore(),recommendation:"hire",comments:e.comments||"",strengths:[],areasForImprovement:[],initialForm:{eligibilityCheck:e.eligibilityCheck,resumeQuality:e.resumeQuality,experienceMatch:e.experienceMatch,educationMatch:e.educationMatch,documentationComplete:e.documentationComplete,backgroundVerified:!1}}),this.toast.success("Initial evaluation saved"),this.router.navigate(["/candidates"])}catch(e){this.toast.error(e.message||"Save failed")}this.saving=!1}})}static \u0275fac=function(l){return new(l||s)(c(B),c(_),c(E),c(U),c(M))};static \u0275cmp=g({type:s,selectors:[["app-initial-form"]],decls:38,vars:15,consts:[[1,"container","py-4","initial-form-wrapper"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"mb-0"],[1,"small","text-muted"],[1,"fw-semibold"],[1,"card","p-4","shadow-sm","rounded-4",3,"ngSubmit","formGroup"],[1,"row","g-3"],[1,"col-md-3","col-sm-6"],[1,"form-label"],["formControlName","eligibilityCheck",1,"form-select"],[3,"ngValue"],["class","col-md-3 col-sm-6",4,"ngFor","ngForOf"],["formControlName","documentationComplete",1,"form-select"],[1,"col-12"],["rows","3","formControlName","comments","placeholder","Observations, red flags, next steps...",1,"form-control"],[1,"mt-4","d-flex","gap-2"],[1,"btn","btn-primary",3,"disabled"],[4,"ngIf"],["class","spinner-border spinner-border-sm",4,"ngIf"],["type","button",1,"btn","btn-outline-secondary",3,"click","disabled"],[1,"form-label","text-capitalize"],["type","number","min","1","max","5",1,"form-control",3,"formControlName"],[1,"spinner-border","spinner-border-sm"]],template:function(l,a){l&1&&(t(0,"div",0)(1,"div",1)(2,"h4",2),r(3,"Initial Interview Checklist"),i(),t(4,"div",3),r(5,"Avg Score: "),t(6,"span",4),r(7),I(8,"number"),i()()(),t(9,"form",5),f("ngSubmit",function(){return a.save()}),t(10,"div",6)(11,"div",7)(12,"label",8),r(13,"Eligibility"),i(),t(14,"select",9)(15,"option",10),r(16,"Yes"),i(),t(17,"option",10),r(18,"No"),i()()(),u(19,H,4,2,"div",11),t(20,"div",7)(21,"label",8),r(22,"Documentation"),i(),t(23,"select",12)(24,"option",10),r(25,"Yes"),i(),t(26,"option",10),r(27,"No"),i()()(),t(28,"div",13)(29,"label",8),r(30,"Comments"),i(),p(31,"textarea",14),i()(),t(32,"div",15)(33,"button",16),u(34,L,2,0,"span",17)(35,$,1,0,"span",18),i(),t(36,"button",19),f("click",function(){return a.form.reset()}),r(37,"Reset"),i()()()()),l&2&&(n(7),b(y(8,11,a.overallScore(),"1.1-1")),n(2),o("formGroup",a.form),n(6),o("ngValue",!0),n(2),o("ngValue",!1),n(2),o("ngForOf",S(14,z)),n(5),o("ngValue",!0),n(2),o("ngValue",!1),n(7),o("disabled",a.form.invalid||a.saving),n(),o("ngIf",!a.saving),n(),o("ngIf",a.saving),n(),o("disabled",a.saving))},dependencies:[N,C,x,F,P,T,O,G,w,k,D,V,R,Q,q,A,j],styles:[".initial-form-wrapper[_ngcontent-%COMP%]{max-width:1000px}"]})};export{Y as InitialFormComponent};
