import{b as V}from"./chunk-AHEKFUMX.js";import{Da as R,Ha as p,Oa as m,Pb as T,Qa as O,Qb as N,Ra as t,Rb as D,Sa as e,Ta as g,Ua as E,Ub as j,Va as h,Wa as k,Wb as $,Xa as f,Ya as c,Yb as M,Z as _,_ as v,c as S,cb as y,cc as w,db as i,dc as A,eb as d,fb as x,pb as F,tb as u,ua as a,vb as b,xb as I,ya as C}from"./chunk-BULBJQPZ.js";var P=(r,o,n)=>({"text-bg-success":r,"text-bg-danger":o,"text-bg-secondary":n});function W(r,o){if(r&1){let n=k();t(0,"div",9)(1,"button",10),f("click",function(){_(n);let l=c();return v(l.exportJSON())}),g(2,"i",11),i(3,"JSON"),e(),t(4,"button",10),f("click",function(){_(n);let l=c();return v(l.print())}),g(5,"i",12),i(6,"Print"),e(),t(7,"button",13),f("click",function(){_(n);let l=c();return v(l.load())}),g(8,"i",14),e()()}}function J(r,o){r&1&&(t(0,"div",15),g(1,"div",16),e())}function K(r,o){if(r&1&&(t(0,"div",17),i(1),e()),r&2){let n=c();a(),d(n.error)}}function L(r,o){if(r&1&&(E(0),t(1,"td",41),i(2),e(),t(3,"td")(4,"span",42),i(5),e()(),t(6,"td"),i(7),e(),t(8,"td"),i(9),e(),t(10,"td"),i(11),u(12,"date"),e(),h()),r&2){let n=o.ngIf,s=c().$implicit;a(2),d(s.replace("-"," ")),a(2),m("ngClass",F(9,P,n.status==="pass",n.status==="fail",n.status==="pending")),a(),d(n.status),a(2),x("",n.rating||"-"," "),a(2),d(n.interviewerName||"-"),a(2),d(n.completedAt?b(12,6,n.completedAt,"short"):"-")}}function U(r,o){if(r&1&&(t(0,"tr"),p(1,L,13,13,"ng-container",8),e()),r&2){let n=o.$implicit,s=c(2);a(),m("ngIf",s.stageData(n))}}function z(r,o){if(r&1&&(t(0,"span",45),i(1),e()),r&2){let n=o.$implicit;a(),d(n)}}function q(r,o){if(r&1&&(t(0,"div",43),p(1,z,2,1,"span",44),e()),r&2){let n=c(2);a(),m("ngForOf",n.report.keyStrengths)}}function G(r,o){r&1&&(t(0,"div",46),i(1,"No strengths captured."),e())}function H(r,o){if(r&1&&(t(0,"span",48),i(1),e()),r&2){let n=o.$implicit;a(),d(n)}}function Q(r,o){if(r&1&&(t(0,"div",43),p(1,H,2,1,"span",47),e()),r&2){let n=c(2);a(),m("ngForOf",n.report.keyWeaknesses)}}function X(r,o){r&1&&(t(0,"div",46),i(1,"No weaknesses captured."),e())}function Y(r,o){if(r&1&&(t(0,"span",52),i(1),e()),r&2){let n=o.$implicit;a(),d(n)}}function Z(r,o){if(r&1&&(t(0,"span",53),i(1),e()),r&2){let n=o.$implicit;a(),d(n)}}function ee(r,o){if(r&1&&(t(0,"tr")(1,"td",41),i(2),e(),t(3,"td"),i(4),e(),t(5,"td"),i(6),e(),t(7,"td"),p(8,Y,2,1,"span",49),e(),t(9,"td"),p(10,Z,2,1,"span",50),e(),t(11,"td",51),i(12),e()()),r&2){let n=o.$implicit;a(2),d(n.stage.replace("-"," ")),a(2),d(n.overallRating),a(2),d(n.recommendation),a(2),m("ngForOf",n.strengths),a(2),m("ngForOf",n.areasForImprovement),a(2),d(n.comments)}}function te(r,o){if(r&1&&(E(0),t(1,"div",18)(2,"div",19)(3,"div",20)(4,"div",21),i(5,"Candidate"),e(),t(6,"div",22),i(7),e(),t(8,"div",23),i(9),e()(),t(10,"div",24)(11,"div",21),i(12,"Overall Score"),e(),t(13,"div",25),i(14),u(15,"number"),e(),t(16,"div",23),i(17),u(18,"number"),e()(),t(19,"div",24)(20,"div",21),i(21,"Decision"),e(),t(22,"span"),i(23),e(),t(24,"div",26),i(25),e()(),t(26,"div",24)(27,"div",21),i(28,"Interview Time"),e(),t(29,"div"),i(30),e()(),t(31,"div",20)(32,"div",21),i(33,"Summary"),e(),t(34,"div",27),i(35),e()()()(),t(36,"div",28)(37,"div",29)(38,"div",30)(39,"div",31),i(40,"Stage Status"),e(),t(41,"div",32)(42,"table",33)(43,"thead",34)(44,"tr")(45,"th"),i(46,"Stage"),e(),t(47,"th"),i(48,"Status"),e(),t(49,"th"),i(50,"Rating"),e(),t(51,"th"),i(52,"Interviewer"),e(),t(53,"th"),i(54,"Completed At"),e()()(),t(55,"tbody"),p(56,U,2,1,"tr",35),e()()()()(),t(57,"div",36)(58,"div",18)(59,"div",31),i(60,"Key Strengths"),e(),p(61,q,2,1,"div",37)(62,G,2,0,"ng-template",null,0,I),e(),t(64,"div",38)(65,"div",31),i(66,"Key Weaknesses"),e(),p(67,Q,2,1,"div",37)(68,X,2,0,"ng-template",null,1,I),e()()(),t(70,"div",39)(71,"div",31),i(72,"Detailed Evaluations"),e(),t(73,"div",32)(74,"table",40)(75,"thead",34)(76,"tr")(77,"th"),i(78,"Stage"),e(),t(79,"th"),i(80,"Overall"),e(),t(81,"th"),i(82,"Recommendation"),e(),t(83,"th"),i(84,"Strengths"),e(),t(85,"th"),i(86,"Improvements"),e(),t(87,"th"),i(88,"Comments"),e()()(),t(89,"tbody"),p(90,ee,13,6,"tr",35),e()()()(),h()),r&2){let n=y(63),s=y(69),l=c();a(7),d(l.report.candidateName),a(2),d(l.report.position),a(5),d(b(15,17,l.report.overallScore,"1.2-2")),a(3),x("Weighted: ",b(18,20,l.report.weightedScore,"1.2-2"),""),a(5),O("badge text-bg-",l.overallStatusClass()," text-capitalize"),a(),d(l.report.finalDecision),a(2),x("By ",l.report.decisionMadeBy,""),a(5),x("",l.report.totalInterviewTime," mins"),a(5),d(l.report.recommendationSummary),a(21),m("ngForOf",l.stageKeys()),a(5),m("ngIf",l.report.keyStrengths.length)("ngIfElse",n),a(6),m("ngIf",l.report.keyWeaknesses.length)("ngIfElse",s),a(23),m("ngForOf",l.report.evaluations)}}var B=class r{constructor(o,n){this.route=o;this.fs=n}candidateId="";loading=!1;error="";report;stages=Object.values(w);InterviewStage=w;ngOnInit(){return S(this,null,function*(){this.candidateId=this.route.snapshot.paramMap.get("id")||"",this.candidateId?yield this.load():this.error="Candidate id missing"})}load(){return S(this,null,function*(){this.loading=!0,this.error="";try{this.report=yield this.fs.generateConsolidatedReport(this.candidateId)}catch(o){this.error=o.message||"Failed to load report"}this.loading=!1})}stageKeys(){return this.report?Object.keys(this.report.stageStatus):[]}stageData(o){return this.report?.stageStatus[o]}exportJSON(){if(!this.report)return;let o=new Blob([JSON.stringify(this.report,null,2)],{type:"application/json"}),n=document.createElement("a");n.href=URL.createObjectURL(o),n.download=`consolidated-report-${this.report.candidateName}.json`,n.click(),URL.revokeObjectURL(n.href)}print(){window.print()}overallStatusClass(){if(!this.report)return"secondary";switch(this.report.finalDecision){case"hired":return"success";case"rejected":return"danger";case"on-hold":return"warning";default:return"secondary"}}static \u0275fac=function(n){return new(n||r)(C(V),C(A))};static \u0275cmp=R({type:r,selectors:[["app-consolidated-report"]],decls:8,vars:4,consts:[["noStr",""],["noWeak",""],[1,"container","py-4","report-wrapper"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"mb-0"],["class","btn-group btn-group-sm",4,"ngIf"],["class","text-center py-5",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[4,"ngIf"],[1,"btn-group","btn-group-sm"],[1,"btn","btn-outline-secondary",3,"click"],[1,"bi","bi-filetype-json","me-1"],[1,"bi","bi-printer","me-1"],[1,"btn","btn-outline-primary",3,"click"],[1,"bi","bi-arrow-clockwise"],[1,"text-center","py-5"],[1,"spinner-border"],[1,"alert","alert-danger"],[1,"card","shadow-sm","mb-3"],[1,"card-body","row","g-3","small"],[1,"col-md-3"],[1,"fw-semibold"],[1,"fs-6"],[1,"text-muted"],[1,"col-md-2"],[1,"fs-5"],[1,"text-muted","mt-1",2,"font-size",".7rem"],[1,"text-muted",2,"max-height","70px","overflow","auto"],[1,"row","g-3"],[1,"col-lg-8"],[1,"card","shadow-sm","h-100"],[1,"card-header","py-2","small","fw-semibold"],[1,"table-responsive"],[1,"table","table-sm","table-bordered","align-middle","mb-0","small"],[1,"table-light"],[4,"ngFor","ngForOf"],[1,"col-lg-4"],["class","card-body small",4,"ngIf","ngIfElse"],[1,"card","shadow-sm"],[1,"card","shadow-sm","mt-3"],[1,"table","table-sm","small","mb-0"],[1,"text-capitalize"],[1,"badge",3,"ngClass"],[1,"card-body","small"],["class","badge text-bg-success-subtle border border-success text-success me-1 mb-1",4,"ngFor","ngForOf"],[1,"badge","text-bg-success-subtle","border","border-success","text-success","me-1","mb-1"],[1,"text-muted","small","p-2"],["class","badge text-bg-danger-subtle border border-danger text-danger me-1 mb-1",4,"ngFor","ngForOf"],[1,"badge","text-bg-danger-subtle","border","border-danger","text-danger","me-1","mb-1"],["class","badge bg-success-subtle text-success border me-1",4,"ngFor","ngForOf"],["class","badge bg-warning-subtle text-warning border me-1",4,"ngFor","ngForOf"],[2,"max-width","250px"],[1,"badge","bg-success-subtle","text-success","border","me-1"],[1,"badge","bg-warning-subtle","text-warning","border","me-1"]],template:function(n,s){n&1&&(t(0,"div",2)(1,"div",3)(2,"h4",4),i(3,"Consolidated Report"),e(),p(4,W,9,0,"div",5),e(),p(5,J,2,0,"div",6)(6,K,2,1,"div",7)(7,te,91,23,"ng-container",8),e()),n&2&&(a(4),m("ngIf",s.report),a(),m("ngIf",s.loading),a(),m("ngIf",s.error),a(),m("ngIf",!s.loading&&!s.error&&s.report))},dependencies:[M,T,N,D,$,j],styles:[".report-wrapper[_ngcontent-%COMP%]{max-width:1000px}"]})};export{B as ConsolidatedReportComponent};
