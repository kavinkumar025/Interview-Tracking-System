import{a as B}from"./chunk-PJRJ33IU.js";import{b as E,c as i,d as N,e as x,g as O,h as A,i as R,l as D,m as q,n as H,o as M,p as G,q as j,r as V,t as K}from"./chunk-46GCKG2T.js";import{b as F,d as _}from"./chunk-AHEKFUMX.js";import{Da as b,Ha as f,Oa as c,Qb as y,Ra as r,Rb as k,Sa as t,Ta as u,Xa as h,Yb as C,c as g,db as s,dc as T,eb as S,fb as I,mb as p,rb as w,ua as m,ya as v}from"./chunk-BULBJQPZ.js";var U=()=>({key:"technicalSkills",label:"Technical Skills"}),Q=()=>({key:"problemSolvingAbility",label:"Problem Solving"}),$=()=>({key:"codingSkills",label:"Coding Skills"}),L=()=>({key:"systemDesignSkills",label:"System Design"}),W=()=>({key:"architecturalKnowledge",label:"Architecture"}),z=()=>({key:"communicationDuringTechnical",label:"Communication"}),J=(l,e,n,o,d,a)=>[l,e,n,o,d,a];function X(l,e){if(l&1&&(r(0,"div",20)(1,"label",6),s(2),t(),u(3,"input",21),t()),l&2){let n=e.$implicit;m(2),I("",n.label," (1-5)"),m(),c("formControlName",n.key)}}function Y(l,e){if(l&1&&(r(0,"option",22),s(1),t()),l&2){let n=e.$implicit;c("value",n.value),m(),S(n.label)}}function Z(l,e){l&1&&(r(0,"span"),s(1,"Save Technical Evaluation"),t())}function ee(l,e){l&1&&u(0,"span",23)}var P=class l{constructor(e,n,o,d,a){this.fb=e;this.route=n;this.fs=o;this.toast=d;this.router=a}form;candidateId="";candidate;submitting=!1;recommendationOptions=[{value:"strong-hire",label:"Strong Hire"},{value:"hire",label:"Hire"},{value:"no-hire",label:"No Hire"},{value:"strong-no-hire",label:"Strong No Hire"}];ngOnInit(){return g(this,null,function*(){this.candidateId=this.route.snapshot.paramMap.get("candidateId")||"",this.form=this.fb.group({technicalSkills:[5,[i.required,i.min(1),i.max(5)]],problemSolvingAbility:[5,[i.required,i.min(1),i.max(5)]],codingSkills:[5,[i.required,i.min(1),i.max(5)]],systemDesignSkills:[5,[i.required,i.min(1),i.max(5)]],architecturalKnowledge:[5,[i.required,i.min(1),i.max(5)]],communicationDuringTechnical:[5,[i.required,i.min(1),i.max(5)]],questions:[""],solutions:[""],improve:[""],strengths:[""],weaknesses:[""],recommendation:["hire",i.required]}),this.candidateId&&(this.candidate=yield this.fs.getCandidateById(this.candidateId),this.candidate||(this.toast.error("Candidate not found"),this.router.navigate(["/candidates"])))})}get f(){return this.form.controls}save(){return g(this,null,function*(){if(this.form.invalid){this.form.markAllAsTouched();return}this.submitting=!0;try{let e=this.form.value,n=(e.strengths||"").split(/\n|,/).map(a=>a.trim()).filter(a=>!!a),o=(e.weaknesses||"").split(/\n|,/).map(a=>a.trim()).filter(a=>!!a),d={candidateId:this.candidateId,candidateName:this.candidate?.name||"Candidate",position:this.candidate?.position||"Unknown",stage:"technical",interviewerId:this.fs.currentUserSubject.value?.id||"unknown",interviewerName:this.fs.currentUserSubject.value?.name||"Unknown",isCompleted:!0,overallRating:this.calculateOverall(e),recommendation:e.recommendation,comments:e.solutions||"",strengths:n,areasForImprovement:o,technicalInterview:{technicalSkills:e.technicalSkills,problemSolvingAbility:e.problemSolvingAbility,codingSkills:e.codingSkills,systemDesignSkills:e.systemDesignSkills,architecturalKnowledge:e.architecturalKnowledge,communicationDuringTechnical:e.communicationDuringTechnical,questionAsked:(e.questions||"").split(/\n/).filter(a=>!!a.trim()),solutionsProvided:(e.solutions||"").split(/\n/).filter(a=>!!a.trim()),technicalChallenges:(e.improve||"").split(/\n/).filter(a=>!!a.trim())}};yield this.fs.createEvaluation(d),this.toast.success("Technical evaluation saved"),this.router.navigate(["/evaluation/manager",this.candidateId])}catch(e){this.toast.error(e.message||"Failed to save")}this.submitting=!1})}calculateOverall(e){let n=[e.technicalSkills,e.problemSolvingAbility,e.codingSkills,e.systemDesignSkills,e.architecturalKnowledge,e.communicationDuringTechnical];return+(n.reduce((o,d)=>o+d,0)/n.length).toFixed(2)}static \u0275fac=function(n){return new(n||l)(v(V),v(F),v(T),v(B),v(_))};static \u0275cmp=b({type:l,selectors:[["app-technical-interview-form"]],decls:39,vars:20,consts:[[1,"container","py-4","technical-form-wrapper"],[1,"mb-3"],[1,"card","p-4","shadow-sm",3,"ngSubmit","formGroup"],[1,"row","g-3"],["class","col-md-4",4,"ngFor","ngForOf"],[1,"col-md-6"],[1,"form-label"],["rows","4","formControlName","questions","placeholder","Question 1\\nQuestion 2",1,"form-control"],["rows","4","formControlName","solutions","placeholder","Observation 1\\nObservation 2",1,"form-control"],["rows","4","formControlName","improve","placeholder","Area 1\\nArea 2",1,"form-control"],["formControlName","recommendation",1,"form-select"],[3,"value",4,"ngFor","ngForOf"],[1,"form-text"],["rows","3","formControlName","strengths","placeholder","Strong analytical skill\\nClean code",1,"form-control"],["rows","3","formControlName","weaknesses","placeholder","Needs deeper system design examples",1,"form-control"],[1,"mt-4","d-flex","gap-2"],[1,"btn","btn-primary",3,"disabled"],[4,"ngIf"],["class","spinner-border spinner-border-sm",4,"ngIf"],["type","button",1,"btn","btn-outline-secondary",3,"click","disabled"],[1,"col-md-4"],["type","number","min","1","max","5",1,"form-control",3,"formControlName"],[3,"value"],[1,"spinner-border","spinner-border-sm"]],template:function(n,o){n&1&&(r(0,"div",0)(1,"h4",1),s(2,"Technical Interview Feedback"),t(),r(3,"form",2),h("ngSubmit",function(){return o.save()}),r(4,"div",3),f(5,X,4,2,"div",4),r(6,"div",5)(7,"label",6),s(8,"Questions Asked (one per line)"),t(),u(9,"textarea",7),t(),r(10,"div",5)(11,"label",6),s(12,"Solutions / Observations (one per line)"),t(),u(13,"textarea",8),t(),r(14,"div",5)(15,"label",6),s(16,"Areas to Improve (one per line)"),t(),u(17,"textarea",9),t(),r(18,"div",5)(19,"label",6),s(20,"Recommendation"),t(),r(21,"select",10),f(22,Y,2,2,"option",11),t(),r(23,"div",12),s(24,"Overall rating auto-calculated."),t()(),r(25,"div",5)(26,"label",6),s(27,"Strengths (comma or newline separated)"),t(),u(28,"textarea",13),t(),r(29,"div",5)(30,"label",6),s(31,"Weaknesses / Areas for Improvement"),t(),u(32,"textarea",14),t()(),r(33,"div",15)(34,"button",16),f(35,Z,2,0,"span",17)(36,ee,1,0,"span",18),t(),r(37,"button",19),h("click",function(){return o.router.navigate(["/candidates"])}),s(38,"Cancel"),t()()()()),n&2&&(m(3),c("formGroup",o.form),m(2),c("ngForOf",w(13,J,p(7,U),p(8,Q),p(9,$),p(10,L),p(11,W),p(12,z))),m(17),c("ngForOf",o.recommendationOptions),m(12),c("disabled",o.form.invalid||o.submitting),m(),c("ngIf",!o.submitting),m(),c("ngIf",o.submitting),m(),c("disabled",o.submitting))},dependencies:[C,y,k,K,O,H,M,E,A,q,N,x,j,G,R,D],styles:[".technical-form-wrapper[_ngcontent-%COMP%]{max-width:1000px}"]})};export{P as TechnicalInterviewFormComponent};
